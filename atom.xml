<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[rcmdnk's blog]]></title>
  <link href="http://rcmdnk.github.io/atom.xml" rel="self"/>
  <link href="http://rcmdnk.github.io/"/>
  <link href="http://rcmdnk.superfeedr.com/" rel="hub"/>
  <updated>2013-09-18T16:44:41+02:00</updated>
  <id>http://rcmdnk.github.io/</id>
  <author>
    <name><![CDATA[rcmdnk]]></name>
    <email><![CDATA[rdmdnk@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Macでのトラックパッドでのドラッグについて #Mac #Firefox]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/09/18/computer-mac-firefox/"/>
    <updated>2013-09-18T14:51:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/09/18/computer-mac-firefox</id>
    <content type="html"><![CDATA[<p>Macのトラックパッドでのドラッグについて、ちょっと詰まった所が
あったりしたのでメモ。
多分ですが、Macでアップデードを入れて再起動した際、いくつか設定項目が</p>

<!-- more -->


<br class="clearBoth">




<h1>Contents</h1>


<p>
 <ul>
 <li><a href="#ボタンを押してドラッグ">ボタンを押してドラッグ</a> </li>
 <li><a href="#3本指設定">3本指設定</a> </li>
 <li><a href="#タップしてドラッグ">タップしてドラッグ</a> </li>
 <li><a href="#Firefox上での問題">Firefox上での問題</a> </li>
 </ul>

</p>

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3802317723662375";
/* imgRectMid */
google_ad_slot = "9043394444";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>


<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


<h1 id="ボタンを押してドラッグ">ボタンを押してドラッグ</h1>

<p>Macのトラックパッドは全体が1つのボタンになってますが、
それを一本指で押して押したまま動かすとドラッグ出来ます。</p>

<p>さらに、Windowsノートの様な分離ボタンでやるように、
ボタンを押した状態で新たに他の指でトラックパッドをなぞってもドラッグできます。</p>

<p>ただ、トラックパッドのボタンはそれそのものが押しにくいのでどちらも滅多に使わない。
(特に1つ目は使ってる人が居るのかも疑問。。。)</p>

<h1 id="3本指設定">3本指設定</h1>

<p><code>システム環境設定</code><i class="icon-arrow-right"></i><code>トラックパッド</code>へ行くと、
一番左の<code>ポイントとクリック</code>の項目に<code>3本指のドラッグ</code>があります。</p>

<p><img src="http://rcmdnk.github.io/images/post/20130918_trackpad.jpg" "trackpad" "trackpad"></p>

<p>これを有効にすると、ウィンドウのバー上で3本指でグリグリするだけでドラッグします。</p>

<p>Windowsから移ると慣れが必要ですが、慣れると結構便利。</p>

<p>ただ、3本指ドラッグは結構他のキーに当てると便利で、
今はBetterTouchToolを使って色々設定に使ってるので
これは現在はOffに。</p>

<h1 id="タップしてドラッグ">タップしてドラッグ</h1>

<p>最後はWindowsでも良く使うダブルタップした状態で掴んだ状態にしでドラッグする方法。</p>

<p>この設定は<code>トラックパッド</code>ではなく、<code>ユニバーサルアクセス</code>の中の
<code>マウスとトラックパッド</code><i class="icon-arrow-right"></i><code>トラックパッドオプション</code>
にあるのでちょっと忘れてると見つかりにくいです。</p>

<p><img src="http://rcmdnk.github.io/images/post/20130918_universalaccess.jpg" "universalaccess" "universalaccess"></p>

<p>下に書くようにちょっとこの辺の挙動がおかしくて、色々いじっているうちに
なぜか外れてしまったようで、ちょっと探しました。
この項目は開いてない(と思う)のですが、丁度Macのアップデートで再起動も
行ったりしたので、その辺で何か設定が変わったのかも
(といいつつ知らない間に自分で外してた可能性が一番高いんだと思いますが。。。)。</p>

<p>上の項目で<code>ドラッグ</code>にチェックを入れるとダブルタップで掴む様になります。</p>

<p>右側にオプションで<code>ドラッグロックあり</code>と<code>ドラッグロックなし</code>が選べる様になってますが、
<code>あり</code>を選ぶと、ドラッグ途中で指を話しても掴んだままになり、
もう一度タップすることで離します。
画面が大きくて遠くへドラッグするときには便利というか必須の場合もあります。</p>

<p><code>なし</code>を選ぶとWindowsと同じ様な感じでドラッグし始めてから指を離した時に
ドラッグ様に掴んでた物も離す事になります。</p>

<p>Windowsだと遠くに運ぶ時はボタンを押しながらのドラッグを使いますが、
Macの場合だとこれで<code>ドラッグロックあり</code>の状態にしてもうボタンを押さずに済むようにしています。</p>

<h1 id="Firefox上での問題">Firefox上での問題</h1>

<p>これは単に個人的に設定が何かおかしかっただけなのかもしれませんが、
一時期からFirefox上でドラッグすると掴んだ物が離せなくなる、と言う現象が
多々起こってました。</p>

<p>しかも毎回ではなく、タップすれば離せる事もあればそうでないことも。</p>

<p>これでちょっと悩んでた間、上の<code>ドラッグロック</code>については忘れてたので
いじってませんでした。
その代わりクリックをwrapする関係のアプリケーションである
BetterTouchToolやKeyRemap4MacBookを疑ったりしましたが、
これらを止めても変わらず。</p>

<p>タップしてもクリックしても何しても離さないので、例えば文章を選択して
何処かへドロップしようとしたり、タグを移動させようとして掴んだ時に
にっちもさっちも行かなくなって最悪再起動したり:fearful:</p>

<p>色々試してた時は、最終的に<i class='key'>esc</i>を押してからクリックする、と言う
事をすれば解除出来たりする時があるということが判明。
暫くこれで乗り切ってました。</p>

<p>これもちゃんと<code>ドラッグロック</code>の項目を覚えててこれをオフにさえすればよかったんだと思いますが。。。</p>

<p>ただ、今回色々いじってたら治りました。
やったこととしては上のユニバーサルアクセス内のドラッグ関係をオン・オフ下くらいです。</p>

<p>それと同時にMacのアップデートもあったので、もしかするとそこで
何か治ったのかも。
この現象はFirefox上でしか起こってなかったので、Firefoxの最近のアップデートに
関連するものだと思ってます。</p>

<p>とか言ってるうちにFirefox 24のアップデートが来ました。。。
全く関係のない話ですが、この勢いだと簡単に100とか行きそうなんですが、この数字の上げて行き方、
一体どうするんでしょうか。。。？</p>

<div class="kaerebalink-box" style="text-align:left;padding-bottom:20px;font-size:small;/zoom: 1;overflow: hidden;"><div class="kaerebalink-image" style="float:left;margin:0 15px 10px 0;"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B003XKO2LW/rcmdnk0c-22/ref=nosim/" rel="nofollow" target="_blank"><img src="http://ecx.images-amazon.com/images/I/314AJLyaJWL._SL160_.jpg" style="border: none;" /></a></div><div class="kaerebalink-info" style="line-height:120%;/zoom: 1;overflow: hidden;"><div class="kaerebalink-name" style="margin-bottom:10px;line-height:120%"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B003XKO2LW/rcmdnk0c-22/ref=nosim/" rel="nofollow" target="_blank">Apple Magic Trackpad MC380J/A</a><div class="kaerebalink-powered-date" style="font-size:8pt;margin-top:5px;font-family:verdana;line-height:120%">posted with <a href="http://kaereba.com" rel="nofollow" target="_blank">カエレバ</a></div></div><div class="kaerebalink-detail" style="margin-bottom:5px;"> アップル 2010-07-29    </div><div class="kaerebalink-link1" style="margin-top:10px;"><div class="shoplinkamazon" style="display:inline;margin-right:5px"><a href="http://www.amazon.co.jp/gp/search?keywords=MC380J%2FA&__mk_ja_JP=%83J%83%5E%83J%83i&tag=rcmdnk0c-22" rel="nofollow" target="_blank" title="アマゾン" >Amazon</a></div><div class="shoplinkrakuten" style="display:inline;margin-right:5px"><a href="http://hb.afl.rakuten.co.jp/hgc/111f634c.5fb25e94.111f634d.1a56ae16/?pc=http%3A%2F%2Fsearch.rakuten.co.jp%2Fsearch%2Fmall%2FMC380J%252FA%2F-%2Ff.1-p.1-s.1-sf.0-st.A-v.2%3Fx%3D0%26scid%3Daf_ich_link_urltxt%26m%3Dhttp%3A%2F%2Fm.rakuten.co.jp%2F" rel="nofollow" target="_blank" title="楽天市場" >楽天市場</a></div></div></div><div class="booklink-footer" style="clear: left"></div></div>


<hr />
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Homebrew用のパッケージの簡単な作り方]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/09/17/computer-mac-homebrew/"/>
    <updated>2013-09-17T21:53:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/09/17/computer-mac-homebrew</id>
    <content type="html"><![CDATA[<p><a href="http://www.amazon.co.jp/exec/obidos/ASIN/0937381578/rcmdnk0c-22/ref=nosim/" rel="nofollow" target="_blank" ><img class="left" src="http://ecx.images-amazon.com/images/I/51M44AG9ZGL._SL160_.jpg" border="0"></a></p>

<p><a href="https://github.com/rcmdnk/homebrew-brewall">Brewall</a>
をGitHubに置いてHomebrew(+tap)で管理できる様にした方法についてのメモ。
<a href="https://github.com/andrew/brewdler">Brewdler</a>を参考にしています。
(というかそれ以上の事はしてない。。。)</p>

<!-- more -->


<br class="clearBoth">




<h1>Contents</h1>


<p>
 <ul>
 <li><a href="#レポジトリを作る">レポジトリを作る</a> </li>
 <li><a href="#インストールするファイルの作成">インストールするファイルの作成</a> </li>
 <li><a href="#Formulaを作る">Formulaを作る</a> </li>
 <li><a href="#タグを作る">タグを作る</a> </li>
 <li><a href="#Homebrewでインストールしてみる">Homebrewでインストールしてみる</a> </li>
 <li><a href="#Brewallで管理">Brewallで管理</a> </li>
 <li><a href="#アップデート">アップデート</a> </li>
 </ul>

</p>

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3802317723662375";
/* imgRectMid */
google_ad_slot = "9043394444";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>


<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


<h1 id="レポジトリを作る">レポジトリを作る</h1>

<p>今回はインストールするパッケージと、Homebrew用のFormulaを
一緒のレポジトリに入れてしまうので、
1つのレポジトリだけ作ります。</p>

<p>レポジトリ名は、tapするため、必ず<code>homebrew-</code>から始まる名前にします<sup id='fnref:1'><a href='#fn:1' rel='footnote'>1</a></sup>。
今回作ったのは<a href="https://github.com/rcmdnk/homebrew-brewall">rcmdnk/homebrew-brewall</a>という名前のレポジトリ。</p>

<h1 id="インストールするファイルの作成">インストールするファイルの作成</h1>

<p>今回作るのはmakeとか必要なく、すでに用意されてる<code>bin</code>ディレクトリ等から
コピーするだけのものです。
今回は実行スクリプトだけなので、<code>bin/brewall</code>と<code>bin</code>ディレクトリに
実行ファイルを置いただけ。</p>

<h1 id="Formulaを作る">Formulaを作る</h1>

<p>brewall用のFormulaはこんな感じ。</p>

<figure class='code'><figcaption><span>brewall.rb  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s1">&#39;formula&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="no">HOMEBREW_BREWALL_VERSION</span> <span class="o">=</span> <span class="s1">&#39;0.0.1&#39;</span>
</span><span class='line'><span class="k">class</span> <span class="nc">Brewall</span> <span class="o">&lt;</span> <span class="no">Formula</span>
</span><span class='line'>  <span class="n">homepage</span> <span class="s1">&#39;https://github.com/rcmdnk/homebrew-brewall/&#39;</span>
</span><span class='line'>  <span class="n">url</span> <span class="s1">&#39;https://github.com/rcmdnk/homebrew-brewall.git&#39;</span><span class="p">,</span> <span class="ss">:tag</span> <span class="o">=&gt;</span> <span class="s2">&quot;v</span><span class="si">#{</span><span class="no">HOMEBREW_BREWALL_VERSION</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>  <span class="n">version</span> <span class="no">HOMEBREW_BREWALL_VERSION</span>
</span><span class='line'>  <span class="n">head</span> <span class="s1">&#39;https://github.com/rcmdnk/homebrew-brewall.git&#39;</span><span class="p">,</span> <span class="ss">:branch</span> <span class="o">=&gt;</span> <span class="s1">&#39;master&#39;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">skip_clean</span> <span class="s1">&#39;bin&#39;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">install</span>
</span><span class='line'>    <span class="n">prefix</span><span class="o">.</span><span class="n">install</span> <span class="s1">&#39;bin&#39;</span>
</span><span class='line'>    <span class="p">(</span><span class="n">bin</span><span class="o">+</span><span class="s1">&#39;brewall&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">chmod</span> <span class="mo">0755</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>Brewall</code>というクラスを作って行きます。</p>

<ul>
<li><code>homepage</code>は参照できる情報があるページ。(今回はGitHubレポジトリにREADMEがあるのでレポジトリそのもの)</li>
<li><code>url</code>はパッケージを取得する<code>url</code>。gitのURLの場合は自動的に<code>git</code>を使って取って来てくれる。
必要なときは取得方法を指定<sup id='fnref:2'><a href='#fn:2' rel='footnote'>2</a></sup>。gitのURLの時、<code>tag</code>を上の様に指定すると
masterブランチでなく指定の<code>tag</code>を取ってくる。<code>branch</code>の指定も可能。</li>
<li><code>version</code>はパッケージのパージョンです。<code>brew update</code>すると、
<code>tap</code>で取ってきたFormulaもすべてGitHub上でmasterブランチに更新があればFormulaを更新する。
その後、<code>brew upgrade</code>した時、Formulaにある<code>version</code>と現在インストールされてる
<code>version</code><sup id='fnref:3'><a href='#fn:3' rel='footnote'>3</a></sup>が違う場合更新を行う。新しいタグを作ったり<code>/bin/brewall</code>自体に
更新があったとしても<code>brew upgrade</code>では更新してくれない。あくまでFormulaベースでの確認。

<ul>
<li>Brewdlerをマネて、<code>HOMEBREW_BREWALL_VERSION</code>という変数を使ってversionを管理。
tag名は<code>v</code>+<code>version number</code>となるように。</li>
</ul>
</li>
<li><code>head</code>は<code>brew install brewall --HEAD</code>の様に<code>HEAD</code>を指定した時に何を取ってくるかの指定。
gitの場合では通常はmasterブランチを指定。</li>
<li><code>skip_clean</code><sup id='fnref:4'><a href='#fn:4' rel='footnote'>4</a></sup>は<code>clean</code>時にスキップするディレクトリの指定。Homeberwはインストール途中で
コンパイルなどを行ったあとに一旦<code>bin</code>以下のバイナリや<code>lib</code>以下の<code>.dylibs</code>に対してリンクを外す、及び空のディレクトリを削除cleanupするが、
この時、今回の様に元々<code>bin</code>ディレクトリがあってそこからコピーしてインストールしたいような場合、
この時点でこの作業が行われると上手くいかない時がある。上の例で<code>skip_clean</code>に<code>bin</code>を指定しておかないと、
<code>brewall</code>コマンド自体は<code>/usr/local/Cellar/brewall/0.0.1/bin/breall</code>にインストールされて
<code>/usr/local/bin</code>にもリンクはできるが、途中で行ってるchmodが効かずに実行不能なファイルのままになる。</li>
<li><code>install</code>内でインストール方法を指定する。
今回は単純に<code>bin</code>ディレクトリをインストールしたいだけなので、
<code>prefix.install 'bin'</code>だけでOK。<code>lib</code>や<code>install</code>がある場合はそれらも<code>prefix.install lib</code>
等と書けば<code>Cellar</code>以下に実体がインストールされて<code>/usr/local/lib</code>等に
リンクが貼られる。

<ul>
<li><code>(bin+'brewall').chmod 0755</code>で<code>bin/brewall</code>を実行可能ファイルに。</li>
<li><code>configure</code>や<code>make</code>が必要なパッケージの場合もここで実行コマンドを記述する。</li>
</ul>
</li>
</ul>


<p>この内容を記述したファイルを<code>brewall.rb</code>などとしてtapするレポジトリに入れておくと、
tap後、このファイル名<code>brewall</code>が<code>brew install</code>で入れられるパッケージの名前として
登録されます。</p>

<h1 id="タグを作る">タグを作る</h1>

<p>Homebrewで<code>updata</code>/<code>upgrade</code>で簡単に更新を適用するためにはタグを作っておくと便利です。
上でFormulaで指定したように<code>v</code>+<code>version number</code>のタグを作ります<sup id='fnref:5'><a href='#fn:5' rel='footnote'>5</a></sup>。</p>

<p>上で作業をひと通り終えたあとで</p>

<pre><code>$ git add .
$ git commit -m "initial import"
$ git push # push master branch
$ git tag -a v0.0.1 -m "first tag"
$ git tag --tag # push tag
</code></pre>

<p>こんな感じでmasterブランチを送ったあと、masterブランチの現在のスナップショットで
tagを作って送ります。</p>

<h1 id="Homebrewでインストールしてみる">Homebrewでインストールしてみる</h1>

<pre><code>$ brew tap rcmdnk/breall
$ brew search brewall
brewall
$ brew install brewall
</code></pre>

<h1 id="Brewallで管理">Brewallで管理</h1>

<p>Brewall自身の場合は鶏が先か卵が先かになってしまいますが、それ以外の場合は</p>

<pre><code>$ brewall -e # open Brewfile
...
tapall 'rcmdnk/brewall'
...
$ brewall
</code></pre>

<p>と、Brewfileに<code>tapall</code>でレポジトリを加えて<code>brewall</code>すれば
レポジトリにある全てのFormulaeに対して<code>brew install</code>まで実行します。</p>

<h1 id="アップデート">アップデート</h1>

<p>パッケージのレポジトリ自体は通常、変更を行っても<code>brew update</code>/<code>brew upgrade</code>で
更新されません。<code>--HEAD</code>オプションを使ってインストールするときは
最新のmasterがインストールされますが、この場合もupgradeなどでは更新されません。
(<code>--HEAD</code>を使うといずれにしろ<code>upgrade</code>ではアップデート出来ない。)</p>

<p>更新がある程度まとまったら、新たにタグを作り、Formula内のバージョンも
上げてpushします。</p>

<p>これで、</p>

<pre><code>$ brew update
$ brew upgrade
</code></pre>

<p>の作業で自動的に新しいタグの内容が反映されます。</p>

<hr />

<div class="footnotes">
    <ol>
        <li id='fn:1'><p><a href="https://github.com/mxcl/homebrew/wiki/brew-tap">brew tap</a>
  <a href='#fnref:1' rev='footnote'>↩</a></p>
</li><li id='fn:2'><p><a href="https://github.com/mxcl/homebrew/wiki/Formula-Cookbook#specifying-the-download-strategy-explicitly">Formula Cookbook#Specifying the Download Strategy explicitly</a>
  <a href='#fnref:2' rev='footnote'>↩</a></p>
</li><li id='fn:3'><p>各パッケージは<code>/usr/local/Cellar/brewall/0.0.1/</code>な感じでバージョン名のディレクトリにインストールされてます。
  <a href='#fnref:3' rev='footnote'>↩</a></p>
</li><li id='fn:4'><p><a href="https://github.com/adamv/homebrew-cookbook/blob/master/topics/06_anatomy_of_a_formula.md#skip_clean">Anatomy of a Formula#skip_clean</a>
  <a href='#fnref:4' rev='footnote'>↩</a></p>
</li><li id='fn:5'><p><a href="http://rcmdnk.github.io/blog/2013/09/16/computer-git/">Gitでタグを使う</a>
<a href='#fnref:5' rev='footnote'>↩</a></p>
</li>
    </ol>
</div>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Gitでタグを使う]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/09/16/computer-git/"/>
    <updated>2013-09-16T14:25:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/09/16/computer-git</id>
    <content type="html"><![CDATA[<p><a href="http://rcmdnk.github.io/blog/2013/09/13/computer-mac-install-homebrew/">Brewall</a>
をそれ自身Homebrewで管理できる様にするためにFormulaを書いてる時に
バージョン情報があるとアップデートが簡単に出来るので、
そのためレポジトリにタグ付けを初めてしてみたのでついでにメモ。</p>

<!-- more -->


<br class="clearBoth">




<h1>Contents</h1>


<p>
 <ul>
 <li><a href="#タグを付ける">タグを付ける</a> </li>
 <li><a href="#リモートにpush">リモートにpush</a> </li>
 <li><a href="#タグをチェックアウト">タグをチェックアウト</a> </li>
 <li><a href="#タグを削除">タグを削除</a> </li>
 </ul>

</p>

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3802317723662375";
/* imgRectMid */
google_ad_slot = "9043394444";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>


<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


<h1 id="タグを付ける">タグを付ける</h1>

<p><a href="http://subversion.apache.org/">SVN</a>なんかと同じようにGitにもタグがあって<sup id='fnref:1'><a href='#fn:1' rel='footnote'>1</a></sup>、
特定のポイントのスナップショットを残す事が出来ます。</p>

<p>タグを作りたい時は、</p>

<pre><code>$ git tag -a v0.0.2 -m "version 2"
</code></pre>

<p>こんな感じで<code>-a</code>に続きタグ名を与えます。<code>-m</code>はコメント。</p>

<p>現在のローカルレポジトリの状態から作られるので、何か変更してある場合は
<code>commit</code>後に。</p>

<p><code>git tag</code>とするとタグ一覧が見れます。</p>

<pre><code>$ git tag
v0.0.1
v0.0.2
</code></pre>

<h1 id="リモートにpush">リモートにpush</h1>

<p>リモートに送るには<code>push</code>に<code>--tag</code>を与るだけです。</p>

<pre><code>$ git tag --tag
</code></pre>

<p>GitHubに送ると、こんな感じでタグが選べる様になります。</p>

<p><img class="pic" src="http://rcmdnk.github.io/images/post/20130916_github_tag.jpg"></p>

<p>これでタグを作った時のスナップショットをZipで取ってこれる様になります<sup id='fnref:2'><a href='#fn:2' rel='footnote'>2</a></sup>。</p>

<h1 id="タグをチェックアウト">タグをチェックアウト</h1>

<p>ただタグの中身を見たい時はcheckoutすればOK<sup id='fnref:3'><a href='#fn:3' rel='footnote'>3</a></sup><sup id='fnref:4'><a href='#fn:4' rel='footnote'>4</a></sup>。</p>

<pre><code>$ git checkout v0.0.2
Note: checking out 'v0.0.2'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later ) by using -b with the checkout command again. Example:

git checkout -b new_branch_name

HEAD is now at 05745ff... Update: brew in tap repo can be written before tap
</code></pre>

<p>ただ、この場合は<code>detached HEAD</code>状態で他のブランチに移ると消えてしまう状態です。</p>

<p>変更履歴を取って行きたい場合はこの状態から</p>

<pre><code>$ git checkout -b branch_v0.0.2
</code></pre>

<p>などとして新たにブランチを作るか最初から</p>

<pre><code>$ git checkout -b branch_v0.0.2 v0.0.2
</code></pre>

<p>とすれば<code>v0.0.2</code>のタグで初期化された<code>branch_v0.0.2</code>というブランチが出来ます。</p>

<p>この時に、ブランチ名も<code>v0.0.2</code>でも良いんですが、その場合は
ブランチ名とタグ名がconflictするのでその後、ブランチを<code>refs/heads/v0.0.2</code>、
タグを<code>refs/tags/v0.0.2</code>ときちんと指定してあげないと</p>

<pre><code>$ git checkout v0.0.2
warning: refname 'v0.0.2' is ambiguous.
</code></pre>

<p>みたいに注意されます。(一応この場合は<code>refs/heads/v0.0.2</code>を取ってきます。)</p>

<h1 id="タグを削除">タグを削除</h1>

<p>ローカルのタグを削除するには<code>-d</code>オプションを使って</p>

<pre><code>$ git tag -d v0.0.2
</code></pre>

<p>の様にします<sup id='fnref:5'><a href='#fn:5' rel='footnote'>5</a></sup>。</p>

<p>これをリモートに反映するにはGitHub等のリモートレポジトリが<code>origin</code>として
<code>git remote</code>に登録されてるとして</p>

<pre><code>$ git push origin :v0.0.2
</code></pre>

<p>または</p>

<pre><code>$ git push --delete origin v0.0.2
</code></pre>

<p>とすればOK。</p>

<hr />

<div class="footnotes">
    <ol>
        <li id='fn:1'><p><a href="http://git-scm.com/book/ja/Git-%e3%81%ae%e5%9f%ba%e6%9c%ac-%e3%82%bf%e3%82%b0">2.6 Git の基本 - タグ</a>
  <a href='#fnref:1' rev='footnote'>↩</a></p>
</li><li id='fn:2'><p><a href="http://www.goodpic.com/mt/archives2/2010/08/github_tgzzip.html">GitHub でタグを打って tgz/zip アーカイブ をダウンロードできるようにする</a>
  <a href='#fnref:2' rev='footnote'>↩</a></p>
</li><li id='fn:3'><p><a href="http://d.hatena.ne.jp/kanonji/20110304/1299211488">gitでタグをチェックアウトする。</a>
  <a href='#fnref:3' rev='footnote'>↩</a></p>
</li><li id='fn:4'><p><a href="http://cdn8.atwikiimg.com/git_jp/pub/git-manual-jp/Documentation/chunked/ch01s02.html">プロジェクトの他のバージョンのチェックアウト方法</a>
  <a href='#fnref:4' rev='footnote'>↩</a></p>
</li><li id='fn:5'><p><a href="http://qiita.com/usamik26/items/7e53bae128bf130b8a32"> git でリモートのタグやブランチを削除する方法 </a>
<a href='#fnref:5' rev='footnote'>↩</a></p>
</li>
    </ol>
</div>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Brewallにtapall追加]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/09/15/computer-mac-homebrew/"/>
    <updated>2013-09-15T19:58:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/09/15/computer-mac-homebrew</id>
    <content type="html"><![CDATA[<p><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B007HZEBW4/rcmdnk0c-22/ref=nosim/" rel="nofollow" target="_blank" ><img class="left" src="http://ecx.images-amazon.com/images/I/511VNFQvfhL._SL160_.jpg" border="0"></a></p>

<p><a href="http://rcmdnk.github.io/blog/2013/09/12/computer-mac-install/">Homebrewの拡張:brewdler, tap, cask</a>
で書いた所に追記しておきましたが、
<a href="http://rcmdnk.github.io/blog/2013/09/13/computer-mac-install-homebrew/">Brewallをざっと書いてみた</a>
後で、
<a href="https://github.com/mxcl/homebrew/wiki/brew-tap">Homebrew brew-tap</a>
について
ちょっときちんと理解してなかった所があったので、
その辺上手く管理できるように<a href="https://github.com/rcmdnk/homebrew-brewall">Brewall</a>
をアップデートしてみました。</p>

<!-- more -->


<br class="clearBoth">




<h1>Contents</h1>


<p>
 <ul>
 <li><a href="#Tap">Tap</a> </li>
 <li><a href="#tapall">tapall</a> </li>
 </ul>

</p>

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3802317723662375";
/* imgRectMid */
google_ad_slot = "9043394444";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>


<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


<h1 id="Tap">Tap</h1>

<p>Tapは元々Homebrewに元々入ってるFormulaeに加えて、新しい
Formulaeの入ったGitGubレポジトリを追加して扱えるパッケージを簡単に増やせる、
というのが本来の目的の様。</p>

<ul>
<li>Homebrewで紹介されてるレポジトリ一覧:
<a href="https://github.com/mxcl/homebrew/wiki/Interesting-Taps-&amp;-Branches">Interesting Taps &amp; Branches</a></li>
</ul>


<p>最初に<a href="https://github.com/phinze/homebrew-cask">Homebrew-cask</a>だけを見ていたので、
このパッケージの様に1つのレポジトリに1つのパッケージがあって
Formulaとパッケージと同時に管理するのが普通だと勘違いしてました。</p>

<p>なので、<a href="http://rcmdnk.github.io/blog/2013/09/13/computer-mac-install-homebrew/">前回の時は</a>
<code>tap</code>と書いておくと、指定したリポジトリの中にFormulaが1つだけあると仮定して、
そのFormulaに対し<code>brew install</code>も同時に行うようにして、
2つ以上ある時はエラー出すような形にしてました。</p>

<p>これだと色々なレポジトリをtapして追加してる場合は使い勝手が良くないので、
その辺を主にアップデートしました。</p>

<h1 id="tapall">tapall</h1>

<p>新たに<code>tappall</code>コマンドを追加しました。
新しいBrewallだと</p>

<pre><code>tap 'phinze/cask'
</code></pre>

<p>と書いただけだとcaskレポジトリをtapするだけになっています。
もし、<code>brew install</code>も同時に行いたい場合は、代わりに</p>

<pre><code>tapall 'phinze/cask'
</code></pre>

<p>と書くと、caskレポジトリにあるFormulaeを探してきて全てインストールします。
この場合は<code>brew-cask</code>のみですが、複数のFormulaeがある場合も全てインストールします。</p>

<p>インストールするパッケージを限定したい場合、
例えば上のIntaresting Taps &amp; Branchesの中で一番上にある
<code>science</code>というレポジトリの<code>abyss</code>というFormulaについてだけ
インストールしたい場合は</p>

<pre><code>tap 'Homebrew/science'
brew 'abyss'
</code></pre>

<p>とします。この場合でも、順序は気にしなくて大丈夫です。
(Brewfile内にあるtapを常に一番最初に行うようにします。)</p>

<hr />
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Macでssh時の'Permission denied (publickey).'の解決法]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/09/14/computer-mac-github/"/>
    <updated>2013-09-14T21:31:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/09/14/computer-mac-github</id>
    <content type="html"><![CDATA[<p><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B008K411SS/rcmdnk0c-22/ref=nosim/" rel="nofollow" target="_blank" ><img class="left" src="http://ecx.images-amazon.com/images/I/61N6n6LkUAL._SL160_.png" border="0"></a></p>

<p>Macでたまに<code>ssh</code>したり、<code>git</code>コマンドでGitHubに<code>push</code>したりするときに
うまくいかない時があって色々調べたのでそのまとめ。</p>

<!-- more -->


<br class="clearBoth">




<h1>Contents</h1>


<p>
 <ul>
 <li><a href="#sshでPermission+denined">sshでPermission denined</a> </li>
 <li><a href="#Macでのssh-agent:+launchdで立ち上げ">Macでのssh-agent: launchdで立ち上げ</a> </li>
 <li><a href="#SSH_AUTH_SOCKを自動で設定する">SSH_AUTH_SOCKを自動で設定する</a> </li>
 </ul>

</p>

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3802317723662375";
/* imgRectMid */
google_ad_slot = "9043394444";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>


<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


<h1 id="sshでPermission+denined">sshでPermission denined</h1>

<p>普段Mac内でiTermなどターミナルを立ち上げて作業を行ってる時には問題ないんですが、
<code>cron</code>で予約しておいたジョブの中や
Macに外から<code>ssh</code>で入って作業したりするときに、
<code>git</code>コマンドを使ったりすると、</p>

<pre><code>Permission denied (publickey).
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.
</code></pre>

<p>こんな感じのエラーが。
同時にMacの方でターミナルなどを立ち上げて直接試してみると問題なく接続できます。</p>

<p>GitHub関連で調べていたらこんなページを見つけたので</p>

<blockquote><p><a href="https://help.github.com/articles/error-permission-denied-publickey">Error: Permission denied (publickey)</a></p></blockquote>

<p>これに従い取り敢えずMacの中で<code>ssh -vT git@github.com</code>してみると</p>

<pre><code>$ ssh -vT git@github.com
...
debug1: identity file /Users/user/.ssh/id_dsa type 2
debug1: identity file /Users/user/.ssh/id_dsa-cert type -1
...
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /Users/user/.ssh/id_rsa
debug1: Server accepts key: pkalg ssh-rsa blen 279
debug1: Authentication succeeded (publickey).
...
</code></pre>

<p>と。何故かdsa鍵しか最初にみてませんが、最終的にrsa鍵で認証を通してます。</p>

<p>一方、外からssh(内部で<code>ssh local</code>で入っても一緒の状態になりました)してからみると</p>

<pre><code>$ ssh -vT git@github.com
...
debug1: identity file /Users/user/.ssh/id_dsa type 2
debug1: identity file /Users/user/.ssh/id_dsa-cert type -1
...
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /Users/user/.ssh/id_rsa
debug1: Server accepts key: pkalg ssh-rsa blen 279
debug1: Authentication succeeded (publickey).
</code></pre>

<p>な感じで失敗。</p>

<p><code>~/.ssh/</code>には<code>id_rsa</code>もあるのを確認した上で、<code>~/.ssh/config</code>を見ると</p>

<pre><code>Host github
  HostName github.com
  IdentityFile ~/.ssh/id_rsa
  User rcmdnk
  Compression yes
</code></pre>

<p>の記述はあり、GitHubではrsa鍵を使ってたので良いと思ったんですが、
よく見たらその上の方に</p>

<pre><code>Host *
  Protocol 2
  IdentityFile ~/.ssh/id_dsa
</code></pre>

<p>こんな記述が。。。昔どこかで使ったか、少なくとも今使っては居ないので、
なんかのテストで少し使っていたか、全く覚えてないですが、取り敢えずコメントアウト。
これが、ssh時にdsa鍵を強制してたのでいけなかったみたいで、
コメントアウトしたら外からsshした場合も</p>

<pre><code>$ ssh -vT git@github.com
...
debug1: identity file /Users/user/.ssh/id_rsa type 1
debug1: identity file /Users/user/.ssh/id_rsa-cert type -1
debug1: identity file /Users/user/.ssh/id_dsa type 2
debug1: identity file /Users/user/.ssh/id_dsa-cert type -1
...
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /Users/user/.ssh/id_rsa
debug1: PEM_read_PrivateKey failed
debug1: read PEM private key done: type &lt;unknown&gt;
Enter passphrase for key '/Users/user/.ssh/id_rsa':
debug1: read PEM private key done: type RSA
debug1: Authentication succeeded (publickey).
...
</code></pre>

<p>こんな感じでrsaキーを使ってOKに。
ただ、鍵にパスフレーズを入れてたみたいでこの場合パスフレーズを要求されました。
Mac内で行うときは聞かれない。</p>

<p>取り敢えずこれに関しては自分がおかしな設定残してただけで使えるようにはなったんですが、
なぜMac内で直接立ち上げたときは問題なかったのか意味不明だったのでちょっと調べてみることに。</p>

<h1 id="Macでのssh-agent:+launchdで立ち上げ">Macでのssh-agent: launchdで立ち上げ</h1>

<p>ssh-agentは特に気にしてなかったんですが、
Macでは<a href="http://ja.wikipedia.org/wiki/Launchd">launchd</a>
を採用していてこれで<code>ssh-agent</code>も管理されています。</p>

<p>設定ファイルは</p>

<pre><code>/System/Library/LaunchAgents/org.openbsd.ssh-agent.plist
</code></pre>

<p>ターミナルを起動すると<code>SSH_AUTH_SOCK</code>が</p>

<pre><code>$ echo $SSH_AUTH_SOCK
/tmp/launch-XXXXXX/Listeners
</code></pre>

<p>(<code>XXXXXX</code>の部分はランダムな文字列)と設定されてます。
これで<code>ssh</code>とかでこの値にアクセスしようとすると
<code>ssh-agent</code>が起動するようになってるようです<sup id='fnref:1'><a href='#fn:1' rel='footnote'>1</a></sup>。</p>

<p>さらに、この時に一度使った鍵のパスフレーズはKeyChainに保存される？ため<sup id='fnref:2'><a href='#fn:2' rel='footnote'>2</a></sup><sup id='fnref:3'><a href='#fn:3' rel='footnote'>3</a></sup><sup id='fnref:4'><a href='#fn:4' rel='footnote'>4</a></sup>、
次回から起動した時は一度登録したパスフレーズは聞かれません。
で、上の場合Mac内では<code>ssh-agent</code>に鍵を最初の時に登録してあったのでパスフレーズも聞かれず上手く行ってた模様。</p>

<p>一方、外部からsshしたりして<code>SSH_AUTH_SOCK</code>の値を見ると設定されてません。
これがどの部分で設定されてるかは結局良くわからなかったんですが、
取り敢えずこれが原因。</p>

<p>Macの方でこの値を取得して値だけ</p>

<pre><code>$ export SSH_AUTH_SOCK=/tmp/launch-XXXXXX/Listeners
</code></pre>

<p>とすれば、<code>ssh</code>などするときに<code>ssh-agent</code>が自動で起動するようになりました。</p>

<h1 id="SSH_AUTH_SOCKを自動で設定する">SSH_AUTH_SOCKを自動で設定する</h1>

<p>一番単純には<code>/tmp/launch*/Listeners</code>を探して設定すればOK<sup id='fnref:5'><a href='#fn:5' rel='footnote'>5</a></sup>。</p>

<pre><code>export SSH_AUTH_SOCK=`ls -tr /tmp/launch*/Listeners|tail -n1`
</code></pre>

<p>たまに該当するファイルが複数できてる事があるので
時間的に最後の物を選択。</p>

<p>この辺、どこで設定されてるか探し当てられませんでしたが、Macでログインした時に
新しいものが出来る模様。(launchdを勉強すれば分かるのだろうか。。。？
SSH_AUTH_SOCKもMacでログインした時に
全体の環境変数として設定されてる？ログアウトしてログインし直したり<sup id='fnref:6'><a href='#fn:6' rel='footnote'>6</a></sup>すると新しい物が出来る。単に時間が経っても出来る？)</p>

<p>さらに、たまに上の方法で探した最後の物が間違ってる場合もあり(他の物様に作られたもの？)、上手く行かない時があるんですが、
webで探すと<code>ssh-agent</code>で使われてる物を直接探して
<code>ps</code>から取ってきたり<sup id='fnref:7'><a href='#fn:7' rel='footnote'>7</a></sup>、</p>

<pre><code>export SSH_AUTH_SOCK=`ps auxeww | grep ssh-agent | grep SSH_AUTH_SOCK | sed 's/.*SSH_AUTH_SOCK=//' | cut -f 1 -d ' '`
</code></pre>

<p><code>lsof</code>で探してきたり<sup id='fnref:8'><a href='#fn:8' rel='footnote'>8</a></sup></p>

<pre><code>export SSH_AUTH_SOCK=`/usr/sbin/lsof | grep Listeners | grep ssh-agent | awk '{print $8}'`
</code></pre>

<p>するものがありましたが、
<code>ssh-agent</code>が走ってないと駄目なので、例えばMacでログインだけして、
一度もMac内のターミナルから<code>ssh</code>などを実行してない状況で
他からsshしてくるとこれらは使えません。</p>

<p>なので、</p>

<figure class='code'><figcaption><span>.bashrc </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c"># SSH_AUTH_SOCK</span>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;$SSH_AUTH_SOCK&quot;</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="o">]</span>;<span class="k">then</span>
</span><span class='line'><span class="k">  </span><span class="nv">sock_tmp</span><span class="o">=(</span><span class="sb">`</span>ls -t /tmp/launch*/Listeners<span class="sb">`</span><span class="o">)</span>
</span><span class='line'>  <span class="k">for </span>s in <span class="k">${</span><span class="nv">sock_tmp</span><span class="p">[@]</span><span class="k">}</span>;<span class="k">do</span>
</span><span class='line'><span class="k">    </span><span class="nb">export </span><span class="nv">SSH_AUTH_SOCK</span><span class="o">=</span><span class="nv">$s</span>
</span><span class='line'>    ssh-add -l &gt;&amp;amp; /dev/null
</span><span class='line'>    <span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -eq 0 <span class="o">]</span>;<span class="k">then</span>
</span><span class='line'><span class="k">      </span><span class="nb">break</span>
</span><span class='line'><span class="nb">    </span><span class="k">fi</span>
</span><span class='line'><span class="k">    </span><span class="nb">unset </span>SSH_AUTH_SOCK
</span><span class='line'>  <span class="k">done</span>
</span><span class='line'><span class="k">  </span><span class="nb">unset </span>sock_tmp
</span><span class='line'><span class="k">fi</span>
</span></code></pre></td></tr></table></div></figure>


<p>みたいな事を書いておくと正しい物を拾えます。</p>

<p>ただ、これでも、Macを起動しただけで一度もログインしてない状態だと
うまくいかないので、その時は自分で別途<code>ssh-agent</code>を立ち上げるように
すれば良いかも。
<code>.bashrc</code>を読み込んでるスクリプト起動時等に立ち上がるとパスフレーズを聞かれて止まってしまうので
<code>.bash_profile</code>の方に</p>

<figure class='code'><figcaption><span>.bashrc_profile </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="k">if</span> <span class="o">[</span> -f ~/.bashrc <span class="o">]</span> ; <span class="k">then</span>
</span><span class='line'>  . ~/.bashrc
</span><span class='line'><span class="k">fi</span>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;$SSH_AUTH_SOCK&quot;</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="o">]</span>;<span class="k">then</span>
</span><span class='line'><span class="k">  </span><span class="nb">eval</span> <span class="sb">`</span>ssh-agent<span class="sb">`</span> &gt; ~/.ssh-agent.tmp
</span><span class='line'>  <span class="nv">MY_SSH_AGENT_PID</span><span class="o">=</span><span class="sb">`</span>cat ~/.ssh-agent.tmp|cut -d<span class="s2">&quot; &quot;</span> -f3<span class="sb">`</span>
</span><span class='line'>  rm -f ~/.ssh-agent.tmp
</span><span class='line'>  ssh-add ~/.ssh/id_rsa
</span><span class='line'><span class="k">fi</span>
</span></code></pre></td></tr></table></div></figure>


<p>と、<code>.bashrc</code>読み込み後に<code>SSH_AUTH_SOCK</code>が設定されてない時に限り
<code>ssh-agent</code>を起動するように。</p>

<p>これだと<code>ssh-agent</code>が増え続けるので、</p>

<figure class='code'><figcaption><span>.bashrc_logout </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;$MY_SSH_AGENT_PID&quot;</span> !<span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="o">]</span>;
</span><span class='line'>  <span class="nb">kill</span> -9 <span class="nv">$MY_SSH_AGENT_PID</span>
</span><span class='line'><span class="k">fi</span>
</span></code></pre></td></tr></table></div></figure>


<p>と言った感じでログアウト時に<code>kill</code>するようにしておきます。</p>

<p>ただ、Macをサーバーの様に外から再起動させてそのまま置いておく、
ということはまず無いので、後半はやり過ぎで
<code>Listeners</code>を探す程度にしておいて、
もし後半の様な状況で必要ならば手で<code>ssh-agent</code>を起動する、
程度で良いかも。</p>

<hr />

<div class="footnotes">
    <ol>
        <li id='fn:1'><p>ただし、<code>ssh-agent -l</code>というMac特有のオプション？付きで起動: <a href="http://www.gossamer-threads.com/lists/openssh/dev/52278">MacOSX &amp; ssh-agent -l</a>
  <a href='#fnref:1' rev='footnote'>↩</a></p>
</li><li id='fn:2'><p><a href="http://www.dribin.org/dave/blog/archives/2007/11/28/ssh_agent_leopard/">ssh-agent on Mac OS X 10.5 (Leopard)</a>
  <a href='#fnref:2' rev='footnote'>↩</a></p>
</li><li id='fn:3'><p><a href="http://bridge.grumpy-troll.org/2011/07/diversion-into-macosx-launchd-ssh-agent.html">Diversion into MacOSX launchd &amp; ssh-agent </a>
  <a href='#fnref:3' rev='footnote'>↩</a></p>
</li><li id='fn:4'><p><a href="http://aligach.net/diary/20110602.html">keychainでssh-agentと鍵を管理することにした</a>
  <a href='#fnref:4' rev='footnote'>↩</a></p>
</li><li id='fn:5'><p><a href="http://d.hatena.ne.jp/yuyarin/20100225/1267084795">Mac OS X の cron で SSH に失敗する．</a>
  <a href='#fnref:5' rev='footnote'>↩</a></p>
</li><li id='fn:6'><p>普段ログインし直す必要なんて無いわけですが、<a href="https://secure.logmein.com/jp/">LogMeIn</a>を使っていて、たまに調子悪いと勝手にログアウトしてしまうことがある。。。
  <a href='#fnref:6' rev='footnote'>↩</a></p>
</li><li id='fn:7'><p><a href="http://pentestmonkey.net/cheat-sheet/ssh-cheat-sheet">SSH Cheat Sheet</a>
  <a href='#fnref:7' rev='footnote'>↩</a></p>
</li><li id='fn:8'><p><a href="https://discussions.apple.com/thread/1674891?start=0&amp;tstart=0">where is SSH_AUTH_SOCK set?</a>、<code>lsof</code>の方は0.1秒程かかってちょっと遅い
<a href='#fnref:8' rev='footnote'>↩</a></p>
</li>
    </ol>
</div>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Brewall: brewパッケージを管理する]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/09/13/computer-mac-install-homebrew/"/>
    <updated>2013-09-13T12:37:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/09/13/computer-mac-install-homebrew</id>
    <content type="html"><![CDATA[<p><a href="http://www.amazon.co.jp/exec/obidos/ASIN/0062009273/rcmdnk0c-22/ref=nosim/" rel="nofollow" target="_blank" ><img class="left" src="http://ecx.images-amazon.com/images/I/51C2N2o2HkL._SL160_.jpg" border="0"></a>
昨日、<a href="http://rcmdnk.github.io/blog/2013/09/12/computer-mac-install/">Homebrewの拡張:brewdler, tap, cask</a>
という記事でbrewdlerを試したことを書きましたが、
どうもただリストを管理してるだけなうえ、
tapでインストールするパッケージはきちんとインストール出来ないし、
削除も対応してなかったりして利点が見いだせなかったので、
それらを出来るようにしたスクリプトを作りました。</p>

<!-- more -->


<br class="clearBoth">




<h1>Contents</h1>


<p>
 <ul>
 <li><a href="#Brewall">Brewall</a>
  <ul>
  <li><a href="#Brewallのインストール">Brewallのインストール</a>  </li>
  <li><a href="#使い方">使い方</a>
   <ul>
   <li><a href="#インプットファイル">インプットファイル</a>   </li>
   <li><a href="#インストール">インストール</a>   </li>
   <li><a href="#クリーンアップ">クリーンアップ</a>   </li>
   <li><a href="#Brewfile編集">Brewfile編集</a>   </li>
  </ul>
  </li>
 </ul>
 <li><a href="#まとめ">まとめ</a> </li>
 </ul>

</p>

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3802317723662375";
/* imgRectMid */
google_ad_slot = "9043394444";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>


<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


<h1 id="Brewall">Brewall</h1>

<p>ファイルはGitHubにあります:<a href="https://github.com/rcmdnk/homebrew-brewall">Brewall</a>。</p>

<h2 id="Brewallのインストール">Brewallのインストール</h2>

<p>brew-tapでインストール出来るようにしたので、
Homebrewがインストールされてれば</p>

<pre><code>$ brew tap rcmdnk/brewall
$ brew install brewall
</code></pre>

<p>でインストール出来ます。</p>

<p>必要なファイルは<code>/bin/brewall</code>だけなので、これを取ってきてパスが通った好きな所に入れてもOKです。</p>

<h2 id="使い方">使い方</h2>

<h3 id="インプットファイル">インプットファイル</h3>

<p>管理はデフォルトでは<code>/usr/local/Library/Brewfile</code>をインプットファイルとして使います。
最初に</p>

<pre><code>$ brewall -i
</code></pre>

<p>とすると、現在インストールされているファイルからBrewfileを作ってくれます。
このファイルはBrewdlerでも使えますし、
Brewdler様に作ったBrewfileもそのまま流用できます。</p>

<p>Brewdler同様、<code>tap</code>/<code>cask</code>にも対応していて、こんな感じで
Brewfilwを作って下さい(既にHomebrewで何かインストールしてある場合は先
に<code>brewall -i</code>でファイルを作りそれを編集して下さい):</p>

<pre><code>brew 'mercurial'
brew 'macvim --with-lua'
tap 'phinze/cask'
cask 'firefox'
</code></pre>

<p>最初にコマンド(<code>brew</code>/<code>tap</code>/<code>cask</code>)、次にパッケージやインストール時のオプションです。
基本的2番目以降の項目は<code>brew install</code>等の引数に直接渡されるだけなので、
<code>brew install</code>に使える引数は全て使えます。</p>

<p>なので、MacVimを<code>+lua</code>でコンパイルしてインストールしたい場合は上の様に<code>--with-lua</code>付きで。
<code>brewall -i</code>でも、これらのオプション付きでインストールしたものはオプション付きで初期化します。</p>

<p>また、Brewdlerだと<code>tap</code>で書いただけの場合、<code>brew install</code>が行われないので
手作業が必要でしたが(上のファイルだと<code>cask</code>がないと言って怒られる)、
Brewallは<code>brew install</code>もパッケージ名を探してきて自動的に一緒に<code>brew install</code>もされます。</p>

<hr />

<p>2013/09/15 追記</p>

<p>brew-tapに関して少し理解してなかった部分があって1レポジトリ1パッケージ(Formula)
限定にしてましたが、そうでもないので、
それに対応するようアップデート:<a href="http://rcmdnk.github.io/blog/2013/09/15/computer-mac-homebrew/">Brewallにtapall追加</a>。</p>

<p>これに伴い<code>tap</code>だけの場合は<code>tap</code>するだけ、<code>tapall</code>コマンドを使うと
レポジトリ内の全てのFormulaeに従いパッケージをインストールする様になります。
(上で書かれてる様な自動インストールをしたい場合は<code>tapall</code>を使う。)</p>

<hr />

<p>また、<code>cask</code>コマンドがある場合、自動で<code>tap 'phinze/cask'</code>と同じことをするようにしてあるので、
上の例では<code>phinze/cask</code>の項を落としてもOKです。</p>

<p>順番も、先に<code>cask</code>の項目があっても、その時に<code>cask</code>をインストールしてしまうので
問題ありません。</p>

<h3 id="インストール">インストール</h3>

<p>引数なしで<code>brewall</code>を行うと、<code>Brewfile</code>にあるパッケージをインストールします。</p>

<p>MacVim等、アプリケーションを含むパッケージの場合、<code>-l</code>を与えることで、
ローカルの<code>~/Applications/</code>へ各アプリケションへのリンクを作ります(<code>brew linkapps</code>)。
もし、グローバルな<code>/Applications/</code>へインストールしたい場合は<code>-g</code>を使います。
この場合は<code>sudo</code>するのでrootパスワードを聞かれます。</p>

<h3 id="クリーンアップ">クリーンアップ</h3>

<p><code>brewall -c</code>とすると、<code>Brewfile</code>に無い項目を削除します。
デフォルトではdry runモードで走るので実際には削除しません。</p>

<p>一度<code>brewall -c</code>でチェックして、実際に削除したい場合は</p>

<pre><code>$ brew -c -r
</code></pre>

<p>と<code>-r</code>を付けて下さい。</p>

<p>また、<code>cask</code>コマンドがある場合、<code>tap 'phinze/cask'</code>がなくてもこれを削除しません。</p>

<h3 id="Brewfile編集">Brewfile編集</h3>

<pre><code>$ brew -e
</code></pre>

<p>とするとBrewfileを編集できます。Editorはデフォルトでは<code>vim</code>ですが、
<code>EDITOR</code>変数が設定してある場合はその値を使います。</p>

<h1 id="まとめ">まとめ</h1>

<p>Homebrew等、基本Rubyで書かれてるのでRubyで作った方が喜ばれるところかもしれませんが、
RubyはOctopressで使うくらいでおぼつかない(じゃあなぜOctopressを使ったか。。。)ので、
簡単にシェルスクリプトで書きました。</p>

<p>Brewdlerで出来る事は網羅し、かつ、インストールは全自動化、
削除も簡単に行える様にできたので取り敢えず満足なところ。</p>

<hr />
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Homebrewの拡張:brewdler, tap, cask]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/09/12/computer-mac-install/"/>
    <updated>2013-09-12T18:03:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/09/12/computer-mac-install</id>
    <content type="html"><![CDATA[<p><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B003HT5RV8/rcmdnk0c-22/ref=nosim/" rel="nofollow" target="_blank" ><img class="left" src="http://ecx.images-amazon.com/images/I/51FeRgNZqeL._SL160_.jpg" border="0"></a>
Macでのパッケージ管理は<a href="http://rcmdnk.github.io/blog/2013/06/21/computer-mac/">Homebrewで行うようにしてますが</a>、
<a href="https://github.com/andrew/brewdler">brewdler</a>というものがあって、
より簡単に管理できそうだ、と言うことでちょっと試してみました。
ついでに、brewdlerのREADMEで始めてHomebrewにtapというコマンドがあることや
Homebrew-caskという拡張があることも知ったのでその辺について。</p>

<!-- more -->


<br class="clearBoth">




<h1>Contents</h1>


<p>
 <ul>
 <li><a href="#brewdler">brewdler</a> </li>
 <li><a href="#brew+tap">brew tap</a> </li>
 <li><a href="#brew+cask">brew cask</a> </li>
 <li><a href="#まとめ">まとめ</a> </li>
 </ul>

</p>

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3802317723662375";
/* imgRectMid */
google_ad_slot = "9043394444";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>


<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


<hr />

<p>追記 2013/09/13</p>

<p><a href="https://github.com/rcmdnk/homebrew-brewall">Brewall</a>
というHomebrewのパッケージたちをを管理するスクリプトを書いてみました。
Brewdlerでの使い勝手に加え、Brewderでいまいちだったところを改善してあります。
簡単なシェルスクリプトです。</p>

<blockquote><p><a href="http://rcmdnk.github.io/blog/2013/09/13/computer-mac-install-homebrew/">Brewall: brewパッケージを管理する</a></p></blockquote>

<hr />

<h1 id="brewdler">brewdler</h1>

<p><a href="https://github.com/andrew/brewdler">brewdler</a>は、
<a href="http://bundler.io/">Bundler</a>でRubyのプロジェクトを管理する感覚で、
<a href="http://brew.sh/">Homebrew</a>で管理されるパッケージも管理しよう、という向きの管理パッケージです<sup id='fnref:1'><a href='#fn:1' rel='footnote'>1</a></sup>。
現状は、インストールするパッケージリストの記述しておいて他のマシンに移った時でも
簡単にまとめてインストール出来るようにする、と言った感じです。
アップグレード等はbrewコマンド自体で管理。</p>

<p>インストールは簡単でRubyGemsがインストールしてあれば<sup id='fnref:2'><a href='#fn:2' rel='footnote'>2</a></sup></p>

<pre><code>$ gem install brewdler
</code></pre>

<p>でOK。
使い方も簡単で、Gemfileの様な<code>Brewfile</code>と言う名前のファイルを作り、その中に、</p>

<pre><code>brew 'vim'
</code></pre>

<p>と言った感じで記述しておくと、<code>Brewfile</code>のあるディレクトリで</p>

<pre><code>$ brewdle
</code></pre>

<p>とするだけで記述されているパッケージをまとめてインストールしてくれます。</p>

<p>現状Homebrewでインストールするvimは<code>-lua</code>な状態ですが、<code>+lua</code>にしたければ</p>

<pre><code>brew 'vim --with-lua'
</code></pre>

<p>の様に、brewで使えるオプションをそのまま書いておけばそのオプション付きでインストールされます。
(基本的には<code>第一引数のコマンド</code>+<code>install</code>+<code>第二引数</code>の様な感じをしているみたい。)</p>

<p>これだけだとはっきり言って単にシェルスクリプトで回せば良いのでは。。。
という疑問があって、あまりメリットを感じてないので実はbrewdler自体は使わないでいいかな、
と思ってたりするんですが、
<a href="https://github.com/andrew/brewdler">brewderのREADME</a>で、
<a href="https://github.com/mxcl/homebrew/wiki/brew-tap">Homebrew brew-tap</a>と
<a href="https://github.com/phinze/homebrew-cask">Homebrew-cask</a>も使えるとの
記述があって、それらも初めて知ったのでちょっと試してみました。</p>

<h1 id="brew+tap">brew tap</h1>

<p><a href="https://github.com/mxcl/homebrew/wiki/brew-tap">brew tap</a>は
Homebrewに実装されてるコマンドで、GitHubのレポジトリにある
パッケージをそのままインストールするコマンドです。
最近のHomebrewがインストールされてればそのまま使えます。</p>

<p>使い方は<code>brew</code>の後に<code>tap</code>コマンドを入れて、後はレポジトリ名。
次に使うcaskなんかだと、</p>

<pre><code>$ brew tap phinze/homebrew-cask
$ brew install brew-cask
</code></pre>

<p>こんな感じで。まず<code>tap</code>コマンドでHomebrewに必要なファイルを取ってきて<sup id='fnref:3'><a href='#fn:3' rel='footnote'>3</a></sup>、
そのファイルに従いインストール出来るようにします。
(<code>brew-cask</code>の名前は<a href="https://github.com/phinze/homebrew-cask">Homebrew-cask</a>
にある<code>brew-cask.rb</code>の名前)</p>

<p>その後、他のパッケージ同様、<code>brew install</code>コマンドでインストール出来るようになります。</p>

<p>tapするときにレポジトリ名の<code>homebrew-</code>の部分は省略して<code>phinze/cask</code>でも通ります。
逆に、tapで管理したいレポジトリを作りたい時は必ず<code>homebrew-</code>を付ける必要があり、
また、この部分以外に<code>-</code>を付けるのは禁止だそうです<sup id='fnref:4'><a href='#fn:4' rel='footnote'>4</a></sup>。</p>

<p>(<strike><code>/usr/local/Library/Taps/</code>以下にまずレポジトリごと取ってきてその中にある
<code>brew-cask.rb</code>等を参照してるみたいで、かつ、<code>install</code>時には新たに
GitHubから直接ファイルをとて来てるので、<code>Tap</code>ディレクトリにあるものが
ただただムダに思えるんですが。。。
設定ファイル用のレポジトリと実体用のレポジトリを分けて、
設定ファイルでそのレポジトリを指定すれば良いのかもしれませんが、
いずれにしろなんか無駄な感じが。。。</strike>
caskだけ見てたのでよく分かってなかったですが、
本来、Formulaを集めたリポジトリがあって、それをTapすることで
新たにインストールできるパッケージを増やす、と言うのが
Tapの使い方みたいですね。caskみたいな場合は、
自分自身でFormulaも用意してる、と。そうすると、取り敢えず
brewdlerで管理するときもTapするものはTapだけで、必要なパッケージだけ
brew installするのが正しい感じ。)</p>

<p>アンインストールする時はまず通常通り、</p>

<pre><code>$ brew uninstall brew-cask
</code></pre>

<p>でbrew内でアンインストールし、</p>

<pre><code>$ brew untap phinze/homebrew-cask
</code></pre>

<p>でアンタップ(<code>Tap</code>ディレクトリから削除)。</p>

<p>これをbrewdlerで管理したい場合は</p>

<pre><code>tap 'phinze/homebrew-cask'
brew 'brew-cask'
</code></pre>

<p>の様に、<code>tap</code>と<code>brew</code>のコマンドを順に書きます。
<code>tap</code>の方は第一項を<code>tap</code>にして第二項をレポジトリ名に。
<a href="https://github.com/andrew/brewdler">brewderのREADME</a>だと、
caskが<code>tap</code>だけ書かれてますが、
これだと<code>tap</code>するだけでインストールしてくれません。
なので、必ずインストールするために<code>brew</code>の項を下に書く必要があります。</p>

<h1 id="brew+cask">brew cask</h1>

<p><a href="https://github.com/phinze/homebrew-cask">Homebrew-cask</a>は
Homebrewの拡張でWebから落としてきてインストールする様なソフトを
自動でインストールしてくれます。
cask自体のインストールは上でやったように<code>brew tap</code>で。</p>

<p>インストールできるソフトは現在デフォルトではこんな感じ:
<a href="https://gist.github.com/rcmdnk/6541661">brew-cask-search.txt</a>。</p>

<p>インストールは</p>

<pre><code>$ brew cask install firefox
</code></pre>

<p>こんな感じで。
実体は<code>/opt/homebrew-cask/Caskroom</code>にインストールされ、そこから
デフォルトだと、<code>~/Applications/</code>へリンクが貼られます。
(最初に<code>homebrew-cask</code>ディレクトリがない場合はディレクトリを作るためにroot権限が求められます。)</p>

<p>インストール先を変えたい場合は環境変数<code>HOMEBREW_CASK_OPTS</code>を</p>

<pre><code>$ export HOMEBREW_CASK_OPTS="--appdir=/Applications"
</code></pre>

<p>と設定すると<code>/Applications</code>にインストールする様になります。
<code>brew cask install</code>コマンド時に直接<code>--appdir=/Applications</code>を加えてもOK<sup id='fnref:5'><a href='#fn:5' rel='footnote'>5</a></sup>。</p>

<p>アンインストールは</p>

<pre><code>$ brew cask uninstall firefox
</code></pre>

<p>で<code>~/Applications/</code>のリンクも<code>.../Caskroom/</code>の実体も削除。</p>

<p>デフォルトのfirefoxは英語版ですが、日本語版をインストールしたい場合は</p>

<pre><code>$ brew cask edit firefox
</code></pre>

<p>とすると設定ファイルが開けるので、その中で</p>

<pre><code>-  url 'https://download.mozilla.org/?product=firefox-latest&amp;os=osx&amp;lang=en-US'
+  url 'https://download.mozilla.org/?product=firefox-latest&amp;os=osx&amp;lang=ja-JP-mac'
</code></pre>

<p>の様に、<code>url</code>の部分で<code>lang</code>を<code>en-US</code>から<code>ja-JP-mac</code>に変更します。</p>

<p>ここで注意が必要なのが、一回<code>cask install</code>すると、
<code>/Library/Caches/Homebrew/</code>に<code>firefox-latest</code>のキャシュが残ってて、
これを使ってしまうので、再度違う言語でインストールしたい場合には
このファイルを先に消しておく必要があります。
(caskでダウンロードされたキャッシュは<code>brew cleanup</code>等で消えないので、
手で消すしか無い？)</p>

<p>これをbrewdleで管理したい場合はBrewfileに</p>

<pre><code>cask 'firefox'
</code></pre>

<p>と書いて<code>brewdle</code>すれば良いだけです。</p>

<p>ただ、<a href="https://github.com/andrew/brewdler">brewdleのREADME</a>にあるように
いきなり<code>tap</code>での<code>cask</code>のインストールと<code>cask</code>でのインストールを</p>

<pre><code>tap 'phinze/cask'
cask 'firefox'
</code></pre>

<p>こんな感じで書いてもおいても、caskは無いと言われてしまいます。</p>

<p>なので、これらがインストールされてない状態からBrewfileを作る時は、</p>

<ol>
<li>tap &#8216;phinze/homebrew-cask&#8217;</li>
<li>brew &#8216;brew-cask&#8217;</li>
<li>cask &#8216;firefox&#8217;</li>
</ol>


<p>の様にまず、caskを<code>tap</code>、caskをインストール、
その後に<code>cask</code>でインストールするもの、のように書いていく必要があります。</p>

<h1 id="まとめ">まとめ</h1>

<p>brewdlerが便利そうだな、と思って使ってみたんですが、いまいち単なる
リストと違って何が嬉しいのかわからないのが現状。
いっそのこと適当なスクリプトを自分で書いてしまった方が色々できて
良さそう。。。</p>

<p>ただ、
<a href="https://github.com/mxcl/homebrew/wiki/brew-tap">Homebrew brew-tap</a>と
<a href="https://github.com/phinze/homebrew-cask">Homebrew-cask</a>を
知れたのは良かったです。
差し当たり現在入れてある物はcaskで置き換えたりはしてませんが、
そのうち。</p>

<p>と、思って、<code>cask</code>についていろいろ調べてた時、
<code>cask</code>の実体が<code>/opt/</code>以下にあるのでちょっと<code>/opt/</code>行った所、
<code>boxen</code>ディレクトリを発見。
そう言えば、ちょっと前に</p>

<blockquote><p><a href="http://qiita.com/yuku_t/items/c6f20de0e4f4c352046c">Boxen使わなくても許されるのは2012年までだよね</a></p></blockquote>

<p>とかあったので<a href="http://boxen.github.com/">Boxen</a>
入れてみようと思って、
でも途中でMac1台しか持ってないし、まだ暫く買い換えなそうだし、
次Mac買うとも限らないし、、、と思って途中で辞めたのを思い出しました。</p>

<p>ただ、<a href="http://brew.sh/">Homebrew</a>
自体がBoxenで管理できたりするので、
まずはBoxenで管理出来るパッケージはBoxenでして、
それ以外をHomebrew(+cask)で管理する、と言う感じにするのが良いのかも。</p>

<p>そのうちやりたいところ。。。</p>

<hr />

<p>追記 2013/09/13</p>

<p><a href="https://github.com/rcmdnk/homebrew-brewall">Brewall</a>
もせっかく作ったのでもうちょっとHomebrewで弄びたいところでも。</p>

<hr />

<p><a href="https://github.com/rcmdnk/homebrew-brewall">Brewall</a></p>

<hr />

<div class="footnotes">
    <ol>
        <li id='fn:1'><p><a href="http://qiita.com/futoase/items/9a52ddd8bb19863372d0">homebrewのパッケージをGemfileみたく管理したい -> brewdlerがあった&#8230;</a>
  <a href='#fnref:1' rev='footnote'>↩</a></p>
</li><li id='fn:2'><p><a href="http://rcmdnk.github.io/blog/2013/03/07/setup-octopress/">GitHub pages + Octopressの導入</a>でrubyと一緒に導入済。
  <a href='#fnref:2' rev='footnote'>↩</a></p>
</li><li id='fn:3'><p>通常のHomebrewの各パッケージ用の設定ファイルは<code>/usr/local/Library/Formula/</code>内の<code>vim.rb</code>等。
  <a href='#fnref:3' rev='footnote'>↩</a></p>
</li><li id='fn:4'><p><a href="https://github.com/mxcl/homebrew/wiki/brew-tap">brew tap</a>
  <a href='#fnref:4' rev='footnote'>↩</a></p>
</li><li id='fn:5'><p><a href="https://github.com/phinze/homebrew-cask/blob/master/USAGE.md">homebrew-cask/USAGE.md</a>
<a href='#fnref:5' rev='footnote'>↩</a></p>
</li>
    </ol>
</div>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ウェブページを読みやすくするBeeLine Reader]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/09/10/computer/"/>
    <updated>2013-09-10T19:12:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/09/10/computer</id>
    <content type="html"><![CDATA[<p>Gigazineで紹介されてた<a href="http://www.beelinereader.com/">BeeLine Reader</a>がなかなか面白いです。</p>

<!-- more -->


<blockquote><p><a href="http://gigazine.net/news/20130910-beeline-reader/">ウェブページを読む速度が最大30％増加するブックマークレット「BeeLine Reader」</a></p></blockquote>

<p>BeeLine Readerはページ表示を行毎に色付けして表示しなおしてくれるブックマークレット
を提供してくれてます。</p>

<p>文章ばかりのページだとたまに左端に戻った時にどの行だったか
分かりづらい時がありますが、そんな時に行ごとに色付けしておけば
読みやすい、との原理。
横方向にもグラデーションをかけてどの辺りまで読んだかを視認しやすくしてくれます。</p>

<p>また、変換する際に、<a href="http://getpocket.com/">Pocket</a>
や<a href="http://evernote.com/">Evernote</a>の<a href="http://evernote.com/intl/jp/clearly/">Clearly</a>
みたいに余計な物を落としてくれるので、その点でも読みやすくなります。</p>

<p>あまりウェブで長い文章を読むことは無いですが、やってみると意外と読みやすいかも。</p>

<p>試しにこのページをやってみるとこんな感じ。</p>

<p><img src="http://rcmdnk.github.io/images/post/20130910_mypage.jpg" alt="" title="" class="pic" /></p>

<p>実際にこのページで試してみたい場合はここから<i class="icon-arrow-right"></i>
<a href="javascript:(function(){readStyle='style-athelas';readSize='size-large';readMargin='margin-medium';_readability_script=document.createElement('SCRIPT');_readability_script.type='text/javascript';_readability_script.src='http://www.beelinereader.com/beelinereader/readability.js?x='+Math.random();document.getElementsByTagName('head')[0].appendChild(_readability_script);_readability_css=document.createElement('LINK');_readability_css.rel='stylesheet';_readability_css.href='http://www.beelinereader.com/beelinereader/readability.css';_readability_css.type='text/css';_readability_css.media='all';document.getElementsByTagName('head')[0].appendChild(_readability_css);_readability_print_css=document.createElement('LINK');_readability_print_css.rel='stylesheet';_readability_print_css.href='http://www.beelinereader.com/beelinereader/readability_print.css';_readability_print_css.media='print';_readability_print_css.type='text/css';document.getElementsByTagName('head')[0].appendChild(_readability_print_css);}());javascript:(function(){var%20w=window,u='http://www.beelinereader.com/beelinereader/BlackBlueRed',l=w.location,d=w.document,s=d.createElement('script'),e=encodeURIComponent,x='undefined';function%20g(){if(d.readyState&&d.readyState!='complete'){setTimeout(g,2500);}else{if(typeof%20MainApp==x){s.setAttribute('src',u+'.js');d.body.appendChild(s);}function%20f(){if(typeof%20MainApp==x){setTimeout(f,2500)}else{MainApp.show();}}f();}}g();}())">チェック</a>。
たまに上手く行かずに1文字ずつ色が変化してしまう様になってしまう時がありますが、
もう一度やってみると上手く行くことがあります。
(但し、ブラウザの<code>戻る</code>をすると、1つ前のページに戻ってしまうので、代わりに<i class='key'>F5</i>等で
再読み込みをすると元に戻ります。)</p>

<p>これ、PDFとかWordとかで長い文章読むときに出来たら便利だな、と思って、
Firefox内でPDFをプレビュー表示するようにして、ブックマークレットを試してみましたが、
1ページ目だけ？が表示され、さらに単語毎に行分けされる様な感じで全然駄目でした。</p>

<p>これと同じ事をしてくれるPDF viewerとかそのうち出たら便利かもしれないな…と。</p>

<hr />
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[お気に入りに登録ボタンが使えなくなった@Firefox]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/09/09/blog/"/>
    <updated>2013-09-09T18:35:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/09/09/blog</id>
    <content type="html"><![CDATA[<p>ブログに設置してあった<code>お気に入りに登録</code>の
ボタンをなにげに押してみたら上手く動かなくなってました。</p>

<p>確かに前は動いたはずなのに。。。</p>

<!-- more -->


<br class="clearBoth">




<h1>Contents</h1>


<p>
 <ul>
 <li><a href="#設置してあったボタン">設置してあったボタン</a> </li>
 <li><a href="#Firefox23からの変更？">Firefox23からの変更？</a> </li>
 <li><a href="#Firefoxでブックマークする方法">Firefoxでブックマークする方法</a> </li>
 </ul>

</p>

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3802317723662375";
/* imgRectMid */
google_ad_slot = "9043394444";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>


<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


<h1 id="設置してあったボタン">設置してあったボタン</h1>

<p>設置してあったボタンはこんな感じ。</p>

<p>javascript部分が</p>

<figure class='code'><figcaption><span>source/javascripts/utils.js </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">jQuery</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.add_bookmark&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;page_title&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="o">!</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;page_url&#39;</span><span class="p">)</span> <span class="p">){</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">addBookmark</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span> <span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">)</span>
</span><span class='line'>  <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">addBookmark</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;page_title&#39;</span><span class="p">),</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;page_url&#39;</span><span class="p">))</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">function</span> <span class="nx">addBookmark</span><span class="p">(</span><span class="nx">title</span><span class="p">,</span> <span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">metaKey</span> <span class="o">=</span> <span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">appVersion</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;Mac&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;CMD&#39;</span> <span class="o">:</span> <span class="s1">&#39;CTRL&#39;</span><span class="p">;</span>
</span><span class='line'>    <span class="k">if</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;MSIE&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
</span><span class='line'>      <span class="c1">//Internet Explorer</span>
</span><span class='line'>      <span class="nb">window</span><span class="p">.</span><span class="nx">external</span><span class="p">.</span><span class="nx">AddFavorite</span><span class="p">(</span><span class="nx">title</span><span class="p">,</span><span class="nx">url</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;Firefox&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
</span><span class='line'>      <span class="c1">//Firefox</span>
</span><span class='line'>      <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;サイドバーではなく、通常のブックマークにする場合、\n\&quot;このブックマークはサイドバーに読み込む\&quot;のチェックを外して下さい。&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="nb">window</span><span class="p">.</span><span class="nx">sidebar</span><span class="p">.</span><span class="nx">addPanel</span><span class="p">(</span><span class="nx">title</span><span class="p">,</span><span class="nx">url</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;Opera&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
</span><span class='line'>      <span class="c1">//Opera</span>
</span><span class='line'>      <span class="nb">window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="s1">&#39;sidebar&#39;</span><span class="p">,</span><span class="s1">&#39;title=&#39;</span><span class="o">+</span><span class="nx">title</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;Flock&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
</span><span class='line'>      <span class="c1">//Flock</span>
</span><span class='line'>      <span class="nb">window</span><span class="p">.</span><span class="nx">sidebar</span><span class="p">.</span><span class="nx">addPanel</span><span class="p">(</span><span class="nx">title</span><span class="p">,</span><span class="nx">url</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;Chrome&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
</span><span class='line'>      <span class="c1">//Chrome</span>
</span><span class='line'>      <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Push &quot;</span><span class="o">+</span><span class="nx">metaKey</span><span class="o">+</span><span class="s2">&quot;-D to add favorite!&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;Safari&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
</span><span class='line'>      <span class="c1">//Safari</span>
</span><span class='line'>      <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Push &quot;</span><span class="o">+</span><span class="nx">metaKey</span><span class="o">+</span><span class="s2">&quot;-D to add favorite!&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;Lunascape&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
</span><span class='line'>      <span class="c1">//Lunascape</span>
</span><span class='line'>      <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Push &quot;</span><span class="o">+</span><span class="nx">metaKey</span><span class="o">+</span><span class="s2">&quot;-G to add favorite!&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span><span class='line'>      <span class="c1">//other</span>
</span><span class='line'>      <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Please use the browser&#39;s bookmark function!&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>こんな感じ。ブラウザチェックして適当な関数を呼ぶように。
小さなjavascriptの関数とかは
<code>source/javascripts/utils.js</code>に書いて
<code>source/_include/custom/head.html</code>等に</p>

<pre><code>&lt;script src="http://rcmdnk.github.io/javascripts/utils.js"&gt;&lt;/script&gt;
</code></pre>

<p>として読み込んでます。</p>

<p>ボタンは<code>sass</code>内で<code>custom/_styles.css</code>等に</p>

<figure class='code'><figcaption><span>sass/custom/_styles.scss </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.link_btn</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">background-color</span><span class="o">:</span><span class="err">$</span><span class="n">nav</span><span class="o">-</span><span class="n">bg</span><span class="p">;</span>
</span><span class='line'>  <span class="k">padding</span><span class="o">:</span><span class="m">2px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">padding-left</span><span class="o">:</span><span class="m">5px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">padding-right</span><span class="o">:</span><span class="m">5px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">position</span><span class="o">:</span><span class="k">relative</span><span class="p">;</span>
</span><span class='line'>  <span class="k">text-decoration</span><span class="o">:</span><span class="k">none</span><span class="p">;</span>
</span><span class='line'>  <span class="o">//</span><span class="k">color</span><span class="o">:</span><span class="err">$</span><span class="n">nav</span><span class="o">-</span><span class="n">bg</span><span class="p">;</span>
</span><span class='line'>  <span class="k">border</span><span class="o">:</span> <span class="k">solid</span> <span class="m">2px</span> <span class="n">darken</span><span class="p">(</span><span class="err">$</span><span class="n">nav</span><span class="o">-</span><span class="n">bg</span><span class="o">,</span> <span class="m">15</span><span class="p">);</span>
</span><span class='line'>  <span class="k">border</span><span class="o">-</span><span class="n">radius</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nc">.link_btn</span><span class="nd">:active</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">padding-bottom</span><span class="o">:</span><span class="m">1px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">padding-left</span><span class="o">:</span><span class="m">5px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">padding-right</span><span class="o">:</span><span class="m">5px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">padding-top</span><span class="o">:</span><span class="m">3px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">top</span><span class="o">:</span><span class="m">1px</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nc">.link_btn</span><span class="o">:</span><span class="nd">:before</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">background-color</span><span class="o">:</span><span class="err">$</span><span class="n">nav</span><span class="o">-</span><span class="n">bg</span><span class="p">;</span>
</span><span class='line'>  <span class="k">content</span><span class="o">:</span><span class="s2">&quot;&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="k">display</span><span class="o">:</span><span class="k">block</span><span class="p">;</span>
</span><span class='line'>  <span class="k">position</span><span class="o">:</span><span class="k">absolute</span><span class="p">;</span>
</span><span class='line'>  <span class="k">width</span><span class="o">:</span><span class="m">100</span><span class="o">%</span><span class="p">;</span>
</span><span class='line'>  <span class="k">height</span><span class="o">:</span><span class="m">100</span><span class="o">%</span><span class="p">;</span>
</span><span class='line'>  <span class="k">padding</span><span class="o">:</span><span class="m">1px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">left</span><span class="o">:-</span><span class="m">1px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">top</span><span class="o">:-</span><span class="m">1px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">z-index</span><span class="o">:-</span><span class="m">1</span><span class="p">;</span>
</span><span class='line'>  <span class="k">border</span><span class="o">-</span><span class="n">radius</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nt">li</span><span class="nc">.bookmark</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">width</span><span class="o">:</span> <span class="m">130px</span><span class="p">;</span>
</span><span class='line'>    <span class="k">height</span><span class="o">:</span> <span class="m">21px</span><span class="p">;</span>
</span><span class='line'>    <span class="k">line-height</span><span class="o">:</span> <span class="m">15px</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>こんな感じの物を作って、
<code>source/_includes/post/sharing.html</code>内に</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>    <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">&quot;bookmark&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      {% if index %}
</span><span class='line'>      <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">&quot;link_btn add_bookmark&quot;</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">value=</span><span class="s">&quot;{{site.favorite}}&quot;</span> <span class="na">data-page_title=</span><span class="s">&quot;{{post.title}} - {{site.title}}&quot;</span> <span class="na">data-page_url=</span><span class="s">&quot;{{site.url}}{{post.url}}&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>      {% else %}
</span><span class='line'>      <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">&quot;link_btn add_bookmark&quot;</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">value=</span><span class="s">&quot;{{site.favorite}}&quot;</span> <span class="na">data-page_title=</span><span class="s">&quot;{{page.title}} - {{site.title}}&quot;</span> <span class="na">data-page_url=</span><span class="s">&quot;{{site.url}}{{page.url}}&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>      {% endif %}
</span><span class='line'>    <span class="nt">&lt;/li&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>といった感じで追加しておきます。</p>

<p>これで今まではFirefoxではサイドバーのチェックを外す警告の後に
ブックマークのメニューが出てきてたんですが、何故か出て来なくなった。。。</p>

<h1 id="Firefox23からの変更？">Firefox23からの変更？</h1>

<p>上の関数は割りとどこでも見られる物なので、
適当に同じようなボタンを設置してあるページを探して押してみたところ
やっぱり機能してませんでした。アドオンとかを外しても駄目。</p>

<p>で、ちょっと探してたら
<a href="https://developer.mozilla.org/ja/docs/Site_Compatibility_for_Firefox_23">Firefox 23 サイト互換性情報</a>
のページに、</p>

<blockquote><p>サイドバーパネル追加機能が削除されました</p></blockquote>

<p>との記述が。どうもざっくり削除されたようです。</p>

<p>適当に検索しても英語のページでも全然情報がひっかからないので、
こういうお気に入りボタンを設置してる人はいるものの、
普段使ってる人ってのは実際にはほとんど居ない感じなんでしょうか？
(自分で設置しても自分で押すことは滅多に無いので、一度テストしたら
二度と押さないから気付かないかもしれませんが。。。)</p>

<p>という訳で、とりあえずブラウザのせいだと思うので、諦めて、
他に方法も良くわからないので、Chrome等と同じように
自分でショートカットを押して下さい、と表示することに:</p>

<pre><code>//Firefox
-alert("サイドバーではなく、通常のブックマークにする場合、\n\"このブックマークはサイドバーに読み込む\"のチェックを外して下さい。");
-window.sidebar.addPanel(title,url,'');
alert("Push "+metaKey+"-D to add favorite!");
</code></pre>

<p>多分、全く使われてないのでいっそ削除してしまってもいいんですが、
なんとなく見栄え的に取っておきたいと言うことで暫くこのまま放置。。。</p>

<h1 id="Firefoxでブックマークする方法">Firefoxでブックマークする方法</h1>

<p>ついでに、Firefoxでのブックマークに関していくつか。</p>

<p>上に書いたように、<i class='key'>Ctrl</i>-<i class='key'>d</i>で現在のページをブックマーク出来ますが、これを含めて</p>

<ul>
<li><i class='key'>Ctrl</i>-<i class='key'>d</i>: このページをブックマーク</li>
<li><i class='key'>Ctrl</i>-<i class='key'>Shift</i>-<i class='key'>d</i>: 全てのタブをブックマーク</li>
<li><i class='key'>Ctrl</i>-<i class='key'>b</i>: ブックマークサイドバーを表示/非表示</li>
<li><i class='key'>Ctrl</i>-<i class='key'>Shift</i>-<i class='key'>b</i>: 全てのブックマークを表示</li>
</ul>


<p>等があります。(Macの場合は<i class='key'>Ctrl</i>の代わりに<i class='key'>Cmd</i>で。)</p>

<p>ただ、Firefoxには<a href="http://rcmdnk.github.io/blog/tags/vimperator/">Vimperator</a>
を入れてるので、これによってキーマップが変わってます。
<code>Vimperator</code>を入れてる場合は<i class='key'>a</i>または<code>:bmark</code>コマンドで
ブックマークを。コマンドの場合は引数でタイトル等の指定も可能。(<code>:h bmark</code>でチェック)</p>

<p>ショートカットも便利なんですが、普段ブックマークする時は
<a href="https://addons.mozilla.org/ja/firefox/addon/add-bookmark-here-2/">Add Bookmark Here</a>
と言うアドオンを使ってます。
このアドオンを入れると、ブックマーク一覧の中に
<code>Add Bookmark Here</code>というボタンが出てきて、各フォルダを見ながら
直接その場にブックマークを入れることが出来て便利です。</p>

<p>もう一つ、ブックマーク関連のアドオンで、
<a href="https://addons.mozilla.org/ja/firefox/addon/mybookmarks/">MyBookmarks</a>
というのも結構便利です。これは単に自分のブックマーク一覧のページを作ってくれて、
<code>about:mybookmarks</code>と言うアドレスで表示出来るようになります。</p>

<p><code>Vimperator</code>との組み合わせで</p>

<pre><code>nnoremap b :open about:mybookmarks&lt;cr&gt;
</code></pre>

<p>な感じで<i class='key'>b</i>でMyBookmarksを開ける様に。
(<i class='key'>b</i>はVimperatorではbufferコマンド(Firefoxでのタブ操作)に割り当てられてますので使う人は別キーへ。)</p>

<p>それから最後に<a href="https://www.xmarks.com/">Xmarks</a>。
これで全ての端末のブックマークを同期してます。
直接iPhoneでXmarksのアプリを導入すると、アプリ自体は無料ですが、
同期するには有料アカウントが必要だという罠があるので注意です。</p>

<p>ですが、XmarksはSafariやIEとは無料で同期できるので<sup id='fnref:1'><a href='#fn:1' rel='footnote'>1</a></sup>
これらのブックマークをさらにiCloud経由でiPhoneと同期させればOK。
Safariなんかは普段全く起動したことすら無いですが、
このためだけに存在してると言っても過言ではない状態に。。。</p>

<hr />

<div class="footnotes">
    <ol>
        <li id='fn:1'><p>FirefoxやChromeはアドオンとして入れられますが、SafariやIEはMacやWindowsで
  専用ソフトを入れて、それを使って同期を行います。
<a href='#fnref:1' rev='footnote'>↩</a></p>
</li>
    </ol>
</div>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Vimプラグインlightline導入]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/09/06/computer-vim/"/>
    <updated>2013-09-06T00:02:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/09/06/computer-vim</id>
    <content type="html"><![CDATA[<p>前回
<a href="http://rcmdnk.github.io/blog/2013/09/06/computer-cygwin/putty-vim/">Cygwin+screenで256 colorを有効にする</a>
というのを書いたので、
その表示させたかったVimのステータスラインについて。</p>

<!-- more -->


<br class="clearBoth">




<h1>Contents</h1>


<p>
 <ul>
 <li><a href="#lightline">lightline</a> </li>
 </ul>

</p>

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3802317723662375";
/* imgRectMid */
google_ad_slot = "9043394444";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>


<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


<h1 id="lightline">lightline</h1>

<p><a href="https://github.com/itchyny/lightline.vim">lightline</a>は
Vimのステータスラインを綺麗に表示させてくれるプラグインです。</p>

<p>Vimには元々<a href="https://github.com/Lokaltog/vim-powerline">vim-powerline</a>
(とその後継の<a href="https://github.com/Lokaltog/powerline">powerline</a>)
というPythonを使ったプラグインがありましたが、
最近、<a href="https://github.com/bling/vim-airline">vim-airline</a>
というプラグインが出来て、純粋Vim Scriptなので速いし、
他のプラグインとの融合等もあって嬉しい、
ということで移行した、と言う人が増えていました。</p>

<p>元々vim-powerlineはもっさりする気がして一度入れてから外してましたが、
すごい話題になってたのでまずvim-airlineを入れてみました。</p>

<p>そんな中、<a href="https://github.com/itchyny/lightline.vim">lightline</a>
というプラグインが登場。
vim-airlineをさらに拡張性高くしたような感じで、さらに
作者の方のブログ<sup id='fnref:1'><a href='#fn:1' rel='footnote'>1</a></sup>ではその設計思想まで熱く語られています。</p>

<p>ということで、vim-airlineを導入したばかりでしたが、
lightlineも試してみることに。
ちょっと使ってみてとても拡張性が高いのが楽しい所です。</p>

<p>取り敢えず置いてみた設定はこんな感じ。</p>

<div><script src='https://gist.github.com/6457180.js'></script>
<noscript><pre><code></code></pre></noscript></div>


<p>プラグインのhelpや
レポジトリにある<a href="https://github.com/itchyny/lightline.vim">README</a>
がかなり詳しいので、取り敢えず追ってくだけでも色々出来るようになります。</p>

<p>上のも関数などはREADMEを追って作ったものを変更したりしています。
ちょっと工夫してるところとしては、表示幅によって表示する項目を変えれるよう、各関数で表示幅とすべての表示文字数を比較して表示するかどうか決めています。</p>

<p>こんな感じで最後までファイル名は残るように。</p>

<p><img src="http://rcmdnk.github.io/images/post/20130906_lightline.gif" "" ""></p>

<p>表示の優先度などが全部の関数がお互いに上手く対応出来るように
書かないといけない様に関数を作ってしまっているので
もうちょっと上手く書けないかな、と思うところですが、
取り敢えずは良い感じに欲しい情報を載せる事が出来ました。</p>

<p>ちなみに、上のgifアニメでは、
<a href="https://github.com/kana/vim-submode">vim-submode</a>
を使ってWindowを動かしています<sup id='fnref:2'><a href='#fn:2' rel='footnote'>2</a></sup>。</p>

<p>作者の方のブログでは加えて、<a href="http://d.hatena.ne.jp/itchyny/20130828/1377653592">作者が教える！</a>
シリーズもやってくれるみたいで、今後も追っていきたい所です。</p>

<hr />

<div class="footnotes">
    <ol>
        <li id='fn:1'><p><a href="http://d.hatena.ne.jp/itchyny/20130824/1377351527">lightline.vim作りました - プラグインの直交性について</a>
  <a href='#fnref:1' rev='footnote'>↩</a></p>
</li><li id='fn:2'><p><a href="http://d.hatena.ne.jp/thinca/20130131/1359567419">submode.vim とその設定例なんかを紹介</a>
<a href='#fnref:2' rev='footnote'>↩</a></p>
</li>
    </ol>
</div>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Cygwin+screenで256 colorを有効にする]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/09/05/computer-cygwin-putty-vim/"/>
    <updated>2013-09-05T19:26:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/09/05/computer-cygwin-putty-vim</id>
    <content type="html"><![CDATA[<p>最近、vimのステータス表示で
<a href="https://github.com/bling/vim-airline">vim-airline</a>がリリースされたり
それに追随して<a href="https://github.com/itchyny/lightline.vim">lightline</a>
がリリースされたり<sup id='fnref:1'><a href='#fn:1' rel='footnote'>1</a></sup>、
気になっていたのでインストールしました。
これまであまりターミナルの表示色を気にしてませんでしたが、
これらを導入した際にちゃんと表示されてない部分があったので
それらの設定と、後、導入したステータスラインの設定等。</p>

<!-- more -->


<br class="clearBoth">




<h1>Contents</h1>


<p>
 <ul>
 <li><a href="#Cygwin+++GNU+Screen">Cygwin + GNU Screen</a> </li>
 <li><a href="#Putty">Putty</a> </li>
 </ul>

</p>

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3802317723662375";
/* imgRectMid */
google_ad_slot = "9043394444";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>


<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


<h1 id="Cygwin+++GNU+Screen">Cygwin + GNU Screen</h1>

<p>CygwinではMac同様、GNU Screenはソースからコンパイルして
インストールしていますが<sup id='fnref:2'><a href='#fn:2' rel='footnote'>2</a></sup>、
この際、<code>configure</code>で<code>--enable-colors256</code>として256色表示を有効にしてるんですが、
実際にはそれ程色を気にするわけでもないのでCygwin上ではきちんと試してませんでした。</p>

<p>で、今回vimのステータスラインを入れてみて他の端末ではこんな感じで綺麗に見れてたのが</p>

<p><img src="http://rcmdnk.github.io/images/post/20130905_vimstatusok.png" "" ""></p>

<p>Cygwinだと</p>

<p><img src="http://rcmdnk.github.io/images/post/20130905_vimstatusno.png" "" ""></p>

<p>こんな感じで状態がとても見辛く(ともに<code>lightline</code>の<code>jellybeans</code>テーマ)。</p>

<p>色々試していると、GNU screenを起動した時だけがおかしくなるので、
screenインストール時にcolors256オプション付け忘れかと思って再インストールしてみるも駄目。
<code>.screenrc</code>に</p>

<pre><code>term xterm-256color
</code></pre>

<p>とtermを指定したりしても関係なし(そもそも他の端末ではなくてもOK。)</p>

<p>問題はMinttyのターミナルオプションが<code>xterm</code>になっていて、これを
<code>xterm-256color</code>に指定する必要があったみたいです。
(つまりはずっと256色表示でなかった。。。)</p>

<p>ターミナルにメニューバーが無いので、タイトルバーを右クリックから<code>Options...</code>
を選び下の様にTerminalのTypeを<code>xterm-256color</code>に。</p>

<p><img src="http://rcmdnk.github.io/images/post/20130905_cygwin.png" "" ""></p>

<p>これでちゃんと表示出来る様になりました。</p>

<p>テストとして<code>bash</code>でこんなスクリプトを使って表示。</p>

<div><script src='https://gist.github.com/6457780.js'></script>
<noscript><pre><code></code></pre></noscript></div>


<p><img src="http://rcmdnk.github.io/images/post/20130905_256colOK.png" "" ""></p>

<p>こんな感じに見れます。もし256色表示が有効でないと、</p>

<p><img src="http://rcmdnk.github.io/images/post/20130905_256colNO.png" "" ""></p>

<p>こんな感じで、同じ色を表示する所が出てきます。</p>

<h1 id="Putty">Putty</h1>

<p>一応同じWindowsとしてPuttyについても。</p>

<p>Puttyは各Sessionの<code>Connection</code>の<code>Data</code>の所に<code>Terminal-type string</code>
という項目があるので、ここに<code>xterm-256color</code>を記入します。
こちらは昔設定したみたいでこうなっていて、外に繋げたりcoLinuxでは
きちんと256色表示されていたみたいです。</p>

<p><img src="http://rcmdnk.github.io/images/post/20130905_putty.png" "" ""></p>

<hr />

<div class="footnotes">
    <ol>
        <li id='fn:1'><p><a href="http://d.hatena.ne.jp/itchyny/20130824/1377351527">lightline.vim作りました - プラグインの直交性について</a>
  <a href='#fnref:1' rev='footnote'>↩</a></p>
</li><li id='fn:2'><p><a href="http://rcmdnk.github.io/2013/03/22/screen-install/">Macでの文字化け対策用のGNU screenのインストール</a>
<a href='#fnref:2' rev='footnote'>↩</a></p>
</li>
    </ol>
</div>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[オンラインストレージCopy.comを導入]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/09/01/computer/"/>
    <updated>2013-09-01T18:58:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/09/01/computer</id>
    <content type="html"><![CDATA[<p>この前<a href="http://rcmdnk.github.io/blog/2013/08/23/computer/">KDriveの終了のアナウンスがあって、移行先を考えてましたが</a>、
だいぶ前に見て忘れてた<a href="https://copy.com?r=wKmayU">Copy</a>が
いつの間にか大分無料容量が増えていたので使ってみることにしました。</p>

<!-- more -->


<br class="clearBoth">




<h1>Contents</h1>


<p>
 <ul>
 <li><a href="#Copy.com">Copy.com</a> </li>
 <li><a href="#まとめ">まとめ</a> </li>
 </ul>

</p>

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3802317723662375";
/* imgRectMid */
google_ad_slot = "9043394444";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>


<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


<h1 id="Copy.com">Copy.com</h1>

<p>名前が<code>Copy</code>という、非常に検索しづらいサービスですが、
Dropboxの様なオンラインストレージサービスです。
まだ今年出来たばかり？のサービスで、最初は無料5GBとかだったはずですが、
現在最初の無料容量が15GBで
結構な勢いで拡大してる感じです。</p>

<p>さらに、誰かの紹介リンクから登録するとすぐに5GB貰えます。
また、人に紹介する場合でも5GBずつ増えるので結構簡単に増やせます。
(今のところ上限は無しみたい？)
ので良かったらこちらの紹介リンクから<a href="https://copy.com?r=wKmayU">https://copy.com?r=wKmayU</a>登録してみてください。こちらにも5Gb入ります:smirk:
最初に登録してメールアドレスを有効化し、いずれかの端末でアプリをインストールして接続すれば5GB増えます。
登録してもメールが来ない場合は、CopyのWebインターフェースから
右上の矢印から<code>Manage Profile</code>へ行き、Emailの<code>Verify</code>から再送させてみて下さい。</p>

<p><img src="http://rcmdnk.github.io/images/post/20130901_copy_account.jpg" class="pic" ></p>

<p>日本語サポートは無いみたいですが、Dropboxなんかと同じような使い勝手なので
大体わかると思います。</p>

<p>他のサービスに比べて良い点は、ほとんどのプラットホーム用のアプリケーションが
揃っている所で、Linuxやモバイル端末(Windows Phone用まで)あります。
(DropboxもLinuxを含めてかなり広くあります。
余談ですが、今見たらDropboxが対応してるモバイルは、
Android, iPhone, iPad, BlackBerry, Kindle Fire,となってました。
Kindleって使ったことないですが、こういうアプリ入れて使えるもんなんですね。。。)</p>

<p>大体Dropboxと同じような使い勝手ですが、後発な分、いくつか
Copyでだけ出来る事があります。</p>

<p>パソコンの方だと、<code>~/Copy</code>等のフォルダを作り
このフォルダを同期様に使います。
違うフォルダを選択することも可能です。
それから、Dropboxだと同期するものをフォルダ単位で選べますが、
Copyだとファイル単位でも出来ます。</p>

<p>また、端末のアプリケーションから<code>Undelete</code>(復元)を行うことが出来ます。
メニューバーなどにある折り鶴の右クリックから
<code>Preferences</code><i class="icon-arrow-right"></i><code>Manage My Files</code><i class="icon-arrow-right"></i><code>Undelete</code>
でファイルを選び<code>Save</code>することで復元します。
逆に、Webインターフェイスではまだ復元は実装されていませんが、
そのうちやるかもね、とのこと<sup id='fnref:1'><a href='#fn:1' rel='footnote'>1</a></sup>。</p>

<p><img src="http://rcmdnk.github.io/images/post/20130901_copy_preference.jpg" "" ""></p>

<p>履歴はローカルのフォルダ内で右クリックメニューから見れ、
プレビューしながら過去のものに置き換える事も可能です。
履歴はWebからも見れますが、過去のものはダウンロードできるものの、
戻すような作業は今のところ出来ないみたいです。</p>

<p>また、Webにちゃんとしたプレビュー機能がありません。
なのでWebだけで内容見ながら作業するような事が出来ません。
この辺り、他のサービスは結構充実してたりするのですが、
CopyはWebインターフェースはそこそこにしておいて、履歴作業なども
基本的に各端末から行う方に力を入れているみたいです。
まだ始まったばかりなので、そのうちすぐに実装されるかもしれませんが。</p>

<p><img src="http://rcmdnk.github.io/images/post/20130901_copy_web.jpg" "" ""></p>

<p>また、他の人と共有したり(アカウントを持っている人のEmailを登録して
見たり出来るようにする)、直接公開できる様にも各ファイル事に設定できます。
ただこれもきちんとしたプレビューがないので、ちょっと不便。
(jpgファイルでも、公開ページに行くとプレビューされずにDownloadして見るしか無い様です。)</p>

<hr />

<p>追記 2013/09/02</p>

<p>プレビューについてですが、jpgファイルを幾つか送ってみたところ、表示されるものと
表示されないものが有りました。殆ど表示してくれるのですが、
一部何故か表示されないものがある状態です。</p>

<p>なぜ表示されないものがあるのか、何がいけないのかよくわかりませんが、
一応JPGなどをプレビューする事は出来る様になってるみたいです。</p>

<p><code>.txt</code>、<code>.pdf</code>、<code>.doc(x)</code>なども試してみましたが、</p>

<ul>
<li><code>.txt</code>に関しては問題なく中身が見える。文字数が多い場合でもスクロールバーが出てすべて見れる様になる。
日本語も問題なし。</li>
<li><code>.pdf</code>は表示ページのサムネイルの様な感じ。2ページ目移行はダウンロードしないと見れない。</li>
<li><code>.doc</code>は日本語ファイル名だとファイル名は表示されるが中身は見れない。
アルファベットのファイル名だと<code>.pdf</code>同様1ページ目のサムネイルが見える。
ただし、中身に日本語がある場合は化ける。</li>
<li>ちなみに<code>.jpg</code>の場合はファイル名が日本語でも問題ない。ただ、何故かたまにプレビュー表示出来ないものがある。
(jpgだけ沢山入れてるので、他のファイルでもたまに起こる問題かもしれません。)</li>
</ul>


<p>な感じでした。</p>

<hr />

<p>なので、今のところWebインターフェースの方は今後に期待、ということで。
ただ、端末のアプリケーションの方はより色々出来る様になってると思います。</p>

<p>また、iPhone版も使ってみましたが、こちらはアプリ内でプレビュー出来るし、
Dropboxの様に<code>Favorite</code>機能でOfflineに取っておくことも出来るみたいです。</p>

<p>速度ですが、それ程大きなファイルを受け渡ししてないので
まだ良くわからないですが、
Dropboxとくらべてそれ程遅くない気はします。(大量に受け渡すとまた別かもしれません。)</p>

<p>DropboxはAmazon S3を使ってるわけですが、S3にはTokyoリージョンと言うものがあるらしく、
もしそこを使ってるとするならばアドバンテージがあるのかな、と。</p>

<blockquote><p><a href="http://d.hatena.ne.jp/As_hsp/20130701/1372629820">僕がDropboxからBitcasaに乗り換えた理由</a></p></blockquote>

<p>この記事では、最近プチ話題になってる制限無制限になるBitcasaが同じくS3を使っていて、
Dropboxはアメリカだが、BitcasaはTokyoリージョンを使ってるから速い、とのこと。
確定してる話じゃないみたいですし、むしろDropboxはアメリカ？疑惑もあるみたいですが
(そもそもこの記事はそのためにDropboxは遅い、との記事。。。)、
試しにCopyの共有リンクを見てみたらアメリカになっていました。</p>

<p>Copy.comは元々<a href="https://www.barracuda.com/">Barracuda Networks</a>と言うアメリカのストレージ会社が作ったもので、
多分自分のところのストレージを使ってるんだと思います。
<a href="http://www.barracuda.co.jp/press/20130220">日本支社</a>もあるみたいですが、
今のところそういったインフラはアメリカだけにあるのかな、と。</p>

<p>ちなみにBitcasについては、無料だと10GBで安価に(年間99ドル)で
容量無制限になる、との話ですが、元々無料で探してたのと、
使い勝手としては同期アプリケーションではなく、手動で
同期する外付けストレージ的な感じなのでちょっと違うものです。
ローカルに置かずに只管何でもかんでも削除もせずに貯めこんでいく外付けストレージ、
として使う感じで使うと便利かも。</p>

<p>いずれにしろ、自分の今の環境ではそれ程頻繁に大量のファイルを同期することも無いと思うので、それ程
スピードは気にならない(はず)と思います。</p>

<h1 id="まとめ">まとめ</h1>

<p>DropboxとCopyの比較のまとめとして、速さや安定性は環境等もあるのでまだ良くわかりませんが、
大体見た目の比較はこんな感じです。</p>

<table>
<thead>
<tr>
<th align="left"> サービス </th>
<th align="center"> Dropbox  </th>
<th align="center"> Copy </th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">初期容量</td>
<td align="center">2GB</td>
<td align="center">5GB</td>
</tr>
<tr>
<td align="left">無料での容量増加</td>
<td align="left">人に紹介したり(32人まで)Twitterで宣伝したり今年は無かったけどDropQuestで増やしたり、20GB程度まで最大増やせる。</td>
<td align="left">人に紹介で今のところ上限なし(?)(ちょっと前までTwitterでの宣伝で2GBなんてのもあったみたいですが、今は見当たらず)。</td>
</tr>
<tr>
<td align="left">紹介一人あたりの容量増加</td>
<td align="center">500MB</td>
<td align="center">5GB</td>
</tr>
<tr>
<td align="left">有料での容量</td>
<td align="center">100GB: $8.25/month, 200GB: $16.6/month, 500GB: 41.6/month (年間だと17%引き)</td>
<td align="center">250GB: $9.99/month ($99/year), 500GB: $14.9/month ($149/year)</td>
</tr>
<tr>
<td colspan="3" align="left">容量的にはCopyが圧倒的に有利。</td>
</tr>
<tr>
<td align="left">ファイルサイズ制限</td>
<td align="left">Dropboxはファイルサイズは無制限(Webからだと300MB)<sup id='fnref:2'><a href='#fn:2' rel='footnote'>2</a></sup>。</td>
<td align="left">Copyも一応今のところ無制限(Blogとかで試したら1GBまでだったとか1.5GBまでいけた、などの報告があるが、一応公式的には言及してるものは今のところ無し)<sup id='fnref:3'><a href='#fn:3' rel='footnote'>3</a></sup>。</td>
</tr>
<tr>
<td colspan="3" align="left">端末の対応度は(Linuxやモバイル端末含め)どちらも広く対応していている。</td> 
</tr>
<tr>
<td align="left">端末での使い勝手</td>
<td align="left">復元等の作業はWebからになる。同期するかしないかははフォルダ毎に設定できる。</td>
<td align="left">端末内から削除ファイルを復元したり過去のバージョンに戻したり出来る。(但し、`Download`リンク等があるので、履歴等はWeb上にある情報を参照している様で、ローカルだけで出来るものではなさそう。)。同期はフォルダごとでもファイルごとでも選べる。</td>
</tr>
<tr>
<td></td><td colspan="2" align="left">モバイル端末についてはオフラインファイルの使い方などもだいたい同じ感じ。</td> 
</tr>
<tr>
<td align="left">Webインターフェース</td>
<td align="left">プレビューやファイル操作等、色々出来る。</td>
<td align="left">履歴は以前のバージョンをダウンロード出来るだけ。ファイルの復元は出来ない。また、ファイルのリネームは出来るが、ファイルの移動などは出来ない<sup id='fnref:4'><a href='#fn:4' rel='footnote'>4</a></sup>。Copyはプレビューがかなり限られている(そうでもない？)<sup id='fnref:5'><a href='#fn:5' rel='footnote'>5</a></sup><sup id='fnref:6'><a href='#fn:6' rel='footnote'>6</a></sup>。</td>
</tr>
<tr>
<td></td>
<td colspan="2" align="left">WebインターフェースについてはCopyの方はまだまだ発展途上な感じ。</td>
</tr>
<tr>
<td align="left">日本語サポート</td>
<td align="center">あり</td>
<td align="center">なし</td>
</tr>
<tr>
<td align="left">その他</td>
<td colspan="2" align="left">Copyでは、Primary Emailを変えたり、アカウントを消す方法が無い(Supportに連絡してみてよ、とのこと)<sup id='fnref:7'><a href='#fn:7' rel='footnote'>7</a></sup><sup id='fnref:8'><a href='#fn:8' rel='footnote'>8</a></sup>。</td>
</tr>
</tbody>
</table>


<p>ちなみに、何故折り鶴がロゴなのかは</p>

<blockquote><p>Origami is expressive and transformative. We think Copy should be, too.</p><footer><strong>https://www.copy.com/about/</strong></footer></blockquote>


<p>なんだだそうです。</p>

<hr />

<div class="footnotes">
    <ol>
        <li id='fn:1'><p><a href="https://copy.zendesk.com/entries/24056711-Can-I-recover-deleted-files-">Can I recover deleted files?</a>
  <a href='#fnref:1' rev='footnote'>↩</a></p>
</li><li id='fn:2'><p><a href="https://www.dropbox.com/help/5/ja">ファイルの容量制限や最大容量について</a>
  <a href='#fnref:2' rev='footnote'>↩</a></p>
</li><li id='fn:3'><p><a href="https://copy.zendesk.com/entries/24853201-Does-Copy-has-file-size-limitation-">Does Copy has file size limitation?</a>
  <a href='#fnref:3' rev='footnote'>↩</a></p>
</li><li id='fn:4'><p><a href="https://copy.zendesk.com/entries/24462591-Move-files-between-directories-in-browser">Move files between directories in browser</a>
  <a href='#fnref:4' rev='footnote'>↩</a></p>
</li><li id='fn:5'><p><a href="https://copy.zendesk.com/entries/24039751-What-video-formats-do-you-support-for-streaming-on-the-web-">What video formats do you support for streaming on the web?</a>
  <a href='#fnref:5' rev='footnote'>↩</a></p>
</li><li id='fn:6'><p><a href="https://copy.zendesk.com/entries/23864291-Pictures-slideshow">Pictures slideshow</a>
  <a href='#fnref:6' rev='footnote'>↩</a></p>
</li><li id='fn:7'><p><a href="https://copy.zendesk.com/entries/24038002-Can-I-change-my-primary-email-address-">Can I change my primary email address?</a>
  <a href='#fnref:7' rev='footnote'>↩</a></p>
</li><li id='fn:8'><p><a href="https://copy.zendesk.com/entries/24038252-How-do-I-delete-my-account-">How do I delete my account?</a>
<a href='#fnref:8' rev='footnote'>↩</a></p>
</li>
    </ol>
</div>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ブログに置く便利なウィジェット]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/08/31/blog-octopress/"/>
    <updated>2013-08-31T23:47:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/08/31/blog-octopress</id>
    <content type="html"><![CDATA[<p>Octopress上で追加したWidgetについてのまとめ。</p>

<!-- more -->


<br class="clearBoth">




<h1>Contents</h1>


<p>
 <ul>
 <li><a href="#はてブ人気エントリー">はてブ人気エントリー</a> </li>
 <li><a href="#Twitterタイムライン">Twitterタイムライン</a> </li>
 <li><a href="#Zenback">Zenback</a> </li>
 <li><a href="#LinkWithin">LinkWithin</a> </li>
 </ul>

</p>

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3802317723662375";
/* imgRectMid */
google_ad_slot = "9043394444";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>


<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


<h1 id="はてブ人気エントリー">はてブ人気エントリー</h1>

<p><img src="http://rcmdnk.github.io/images/post/20130831_hatebu.jpg" "" ""></p>

<p>はてブの人気エントリーのウィジェットは
はてなの<a href="http://b.hatena.ne.jp/guide/blogparts.select?type=widget">ブログパーツの設定</a>
から作ることが出来ます(はてなアカウントが必要)。</p>

<p>自分のURLを入れるとコードを作ってくれるのでそれを貼り付けるだけで出来ます。
Octopressでは
これを<code>source/_includes/custom/asides/hatebu.html</code>としてコードを保存して
おきます。(<code>section</code>タグを追加)</p>

<figure class='code'><figcaption><span>source/_includes/custom/asides/hatebu.html </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;section&gt;</span>
</span><span class='line'>  <span class="nt">&lt;script </span><span class="na">language=</span><span class="s">&quot;javascript&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;http://b.hatena.ne.jp/js/widget.js&quot;</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>  <span class="nt">&lt;script </span><span class="na">language=</span><span class="s">&quot;javascript&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nx">Hatena</span><span class="p">.</span><span class="nx">BookmarkWidget</span><span class="p">.</span><span class="nx">url</span>   <span class="o">=</span> <span class="s2">&quot;http://rcmdnk.github.io/&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">Hatena</span><span class="p">.</span><span class="nx">BookmarkWidget</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="s2">&quot;人気エントリー&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">Hatena</span><span class="p">.</span><span class="nx">BookmarkWidget</span><span class="p">.</span><span class="nx">sort</span>  <span class="o">=</span> <span class="s2">&quot;count&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">Hatena</span><span class="p">.</span><span class="nx">BookmarkWidget</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="mi">250</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">Hatena</span><span class="p">.</span><span class="nx">BookmarkWidget</span><span class="p">.</span><span class="nx">num</span>   <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">Hatena</span><span class="p">.</span><span class="nx">BookmarkWidget</span><span class="p">.</span><span class="nx">theme</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">Hatena</span><span class="p">.</span><span class="nx">BookmarkWidget</span><span class="p">.</span><span class="nx">load</span><span class="p">();</span>
</span><span class='line'>  <span class="nt">&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;/section&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>こんな感じ。作成ページでもオプションを選べますが、
必要に応じてコードの値を変更することも出来ます。
Octopressのサイドバーに合うように<code>width</code>は<code>250</code>にしました。
<code>sort</code>の値が<code>count</code>だと全ページからはてブの多い順、
<code>hot</code>にすると新着エントリーになります。
載せる数や名前なども後から調整できます。</p>

<p>これで<code>_config.yml</code>の<code>default_asides</code>へ<code>custom/asides/hatebu.html</code>
を加えることでサイドバーへ表示することが出来ます。
(まだ少ないものばかりで敢えて載せるのは微妙。。。)</p>

<h1 id="Twitterタイムライン">Twitterタイムライン</h1>

<p><img src="http://rcmdnk.github.io/images/post/20130831_twitter.jpg" "" ""></p>

<p>Twitterの<a href="https://twitter.com/settings/widgets">ウィジェット</a>(Twitterのアカウントが必要)から好きなウィジェットを作れます<sup id='fnref:1'><a href='#fn:1' rel='footnote'>1</a></sup>。</p>

<p>今、サイドバーでは<code>検索</code>でアカウント名(<code>rcmdnk</code>)を検索したものを使っています(エゴサーチ。。。)。</p>

<p>ウィジェットを作成すると、そのウィジェットはTwitter内でID管理される様で、
出来上がったウィジェットのコードを直接書き換えて変更できることは
限られているようです。
(カスタマイズをすべて出来なくする設定もあります。)</p>

<p>上のページから作ったコードを下の様に
<code>source_includes/custom/asides/twitter_search.html</code>へ保存。
(<code>section</code>と<code>h1</code>も追加)</p>

<figure class='code'><figcaption><span>source/_includes/custom/asides/twitter_search.html </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;section&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h1&gt;</span>Tweets about rcmdnk <span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>  <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;twitter-timeline&quot;</span> <span class="na">data-chrome=</span><span class="s">&quot;transparent&quot;</span> <span class="na">width=</span><span class="s">&quot;280&quot;</span> <span class="na">height=</span><span class="s">&quot;400&quot;</span>  <span class="na">href=</span><span class="s">&quot;https://twitter.com/search?q=rcmdnk&quot;</span>  <span class="na">data-widget-id=</span><span class="s">&quot;373008330047770624&quot;</span><span class="nt">&gt;</span>Tweet about rcmdnk<span class="nt">&lt;/a&gt;</span>
</span><span class='line'><span class="nt">&lt;script&gt;</span><span class="o">!</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">s</span><span class="p">,</span><span class="nx">id</span><span class="p">){</span><span class="kd">var</span> <span class="nx">js</span><span class="p">,</span><span class="nx">fjs</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="nx">s</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span><span class="nx">p</span><span class="o">=</span><span class="sr">/^http:/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">location</span><span class="p">)</span><span class="o">?</span><span class="s1">&#39;http&#39;</span><span class="o">:</span><span class="s1">&#39;https&#39;</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">d</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">id</span><span class="p">)){</span><span class="nx">js</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span><span class="nx">js</span><span class="p">.</span><span class="nx">id</span><span class="o">=</span><span class="nx">id</span><span class="p">;</span><span class="nx">js</span><span class="p">.</span><span class="nx">src</span><span class="o">=</span><span class="nx">p</span><span class="o">+</span><span class="s2">&quot;://platform.twitter.com/widgets.js&quot;</span><span class="p">;</span><span class="nx">fjs</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">js</span><span class="p">,</span><span class="nx">fjs</span><span class="p">);}}(</span><span class="nb">document</span><span class="p">,</span><span class="s2">&quot;script&quot;</span><span class="p">,</span><span class="s2">&quot;twitter-wjs&quot;</span><span class="p">);</span><span class="nt">&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;/section&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>data-chrome</code>を追加することで見た目を変えられます。</p>

<ul>
<li>noheader: ヘッダー無し</li>
<li>nofooter: フッター及びツイートボックス無し</li>
<li>nobarders: 境界線無し</li>
<li>noscrollbar: スクロールバー無し</li>
<li>transparent: 背景を透過</li>
</ul>


<p>のオプションがあります。
また、<code>width</code>、<code>height</code>で大きさを変えることも出来ます。</p>

<p>その他検索ワードなどを変更したい場合はTwitterのウィジェット管理のページから
ウィジェットの設定を変更する必要があります。</p>

<p>できたら、
<code>_config.yml</code>の<code>default_asides</code>へ<code>custom/asides/twitter_search.html</code>
を加えればOK。</p>

<h1 id="Zenback">Zenback</h1>

<p><img src="http://rcmdnk.github.io/images/post/20130831_zenback.jpg" "" ""></p>

<p><a href="http://zenback.jp/">Zenback</a>は色々な形式のフィードバックを
表示してくれるウィジェットを提供してくれます。</p>

<p>上のページからアカウントを作り、自分のブログ用のコードを作ります。
表示できるのは</p>

<ul>
<li>ソーシャルボタンセット</li>
<li>関連する記事</li>
<li>関連するみんなの記事・キーワード (必須)</li>
<li>おしらせ欄 (必須)</li>
<li>Twitterでの反応</li>
<li>はてなブックマークでの反応</li>
<li>Facebook コメント</li>
</ul>


<p>このページでは必須のものと、Twitter/はてブ/Facebookについて使っています。</p>

<p>設定を行いコードを取得したらコードを
<code>source_includes/custom/zenback.html</code>として保存。</p>

<figure class='code'><figcaption><span>source/_includes/custom/zenback.html </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="c">&lt;!-- X:S ZenBackWidget --&gt;</span><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span><span class="nb">document</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">unescape</span><span class="p">(</span><span class="s2">&quot;%3Cscript&quot;</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot; src=&#39;http://widget.zenback.jp/?base_uri=http%3A//rcmdnk.github.io/&amp;nsid=112714283011311473%3A%3A112714293211884381&amp;rand=&quot;</span><span class="o">+</span><span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">((</span><span class="k">new</span> <span class="nb">Date</span><span class="p">()</span><span class="o">*</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">())</span><span class="o">+</span><span class="s2">&quot;&#39; type=&#39;text/javascript&#39;&quot;</span><span class="o">+</span><span class="nx">unescape</span><span class="p">(</span><span class="s2">&quot;%3E%3C/script%3E&quot;</span><span class="p">));</span><span class="nt">&lt;/script&gt;</span><span class="c">&lt;!-- X:E ZenBackWidget --&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>さらに<code>source/_layouts/post.html</code>へ</p>

<figure class='code'><figcaption><span>source/_layouts/post.html </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>...
</span><span class='line'><span class="nt">&lt;/article&gt;</span>
</span><span class='line'>{% if site.zenback_show == true and page.comments == true %}
</span><span class='line'><span class="nt">&lt;section&gt;</span>
</span><span class='line'>  {% include custom/zenback.html %}
</span><span class='line'><span class="nt">&lt;/section&gt;</span>
</span><span class='line'>{% endif %}
</span><span class='line'>{% if site.disqus_short_name and page.comments == true %}
</span><span class='line'>...
</span></code></pre></td></tr></table></div></figure>


<p>の様にDisqusの上に設置。
Disqus同様、<code>article</code>タグの外側に<code>section</code>タグの中に入れて
設定すると綺麗に納まります。
<code>page</code>にも必要な場合、<code>source/_layouts/page.html</code>へも<code>&lt;/article&gt;</code>の下へ設置します。</p>

<p>さらに有効化するために<code>_config.yml</code>へ</p>

<figure class='code'><figcaption><span>_config.yml </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="c1"># Zenback</span>
</span><span class='line'><span class="l-Scalar-Plain">zenback_show</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
</span></code></pre></td></tr></table></div></figure>


<p>を加えておきます。<code>page.comments</code>については、デフォルト状態だと
<code>rake new_post</code>で記事を作った場合にymlブロックに</p>

<pre><code>comments: true
</code></pre>

<p>があるはずです。ページ単位で向こうにしたいときはこれを<code>false</code>へ。</p>

<p>これだけで上の設定についてはOKですが、もし関連ページも表示させたいときは
その精度を上げるためにいくつかタグを追加します。</p>

<div><script src='https://gist.github.com/6401330.js'></script>
<noscript><pre><code></code></pre></noscript></div>


<p>この様に、記事のタイトル前後に<code>zenback_title_begin/end</code>タグ、
記事部分に<code>zenback_body_begin/end</code>タグを入れるとより正確に関連記事と
そのタイトルを表示してくれる様になります<sup id='fnref:2'><a href='#fn:2' rel='footnote'>2</a></sup>。</p>

<p><code>page</code>の方では、直接<code>source/_layouts/page.html</code>の<code>page.title</code>の行の前後と、
<code>content</code>行の前後に上の<code>article.html</code>にあるように
<code>zenback</code>タグ達を入れておきます。</p>

<h1 id="LinkWithin">LinkWithin</h1>

<p><img src="http://rcmdnk.github.io/images/post/20130831_linkwithin.jpg" "" ""></p>

<p><a href="http://www.linkwithin.com/">LinkWitin</a>はブログ内の関連ページを
画像つきでリストするウィジェットを提供してくれます。
Zenbackにも同じ機能があるのですが、
Zenbackの場合は反映されるまでに暫く時間がかかるのと、
ページの画像が上手く取れなかったので<sup id='fnref:3'><a href='#fn:3' rel='footnote'>3</a></sup>、LinkWithinを試してみました。
今のところ、画像もきちんととてくれるし、即座に反映されています。</p>

<p>上のページから自分のページについてのウィジェットを作成
(<code>Platform</code>は<code>Other</code>で)。
得られたコードを<code>source/_include/custom/after_footer.html</code>に追加。</p>

<figure class='code'><figcaption><span>source/_include/custom/after_footer.html  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>{% if site.linkwithin_show == true %}
</span><span class='line'><span class="nt">&lt;script&gt;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">linkwithin_site_id</span> <span class="o">=</span> <span class="mi">1795279</span><span class="p">;</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://www.linkwithin.com/widget.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://www.linkwithin.com/&quot;</span><span class="nt">&gt;&lt;img</span> <span class="na">src=</span><span class="s">&quot;http://www.linkwithin.com/pixel.png&quot;</span> <span class="na">alt=</span><span class="s">&quot;Related Posts Plugin for WordPress, Blogger...&quot;</span> <span class="na">style=</span><span class="s">&quot;border: 0&quot;</span> <span class="nt">/&gt;&lt;/a&gt;</span>
</span><span class='line'><span class="nt">&lt;script&gt;</span><span class="nx">linkwithin_text</span><span class="o">=</span><span class="s1">&#39;You might also like...&#39;</span><span class="nt">&lt;/script&gt;</span>
</span><span class='line'>{% endif %}
</span></code></pre></td></tr></table></div></figure>


<p>最後の<code>linkwithin_text</code>はLinkWithinのタイトルを変更するための値です。</p>

<p>Zenback同様<code>linkwithin_show</code>で<code>_config.yml</code>から表示/非表示を変更出来るようにします。</p>

<p>表示するために、<code>_config.yml</code></p>

<figure class='code'><figcaption><span>_config.yml </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="c1"># LinkWithin</span>
</span><span class='line'><span class="l-Scalar-Plain">linkwithin_show</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
</span></code></pre></td></tr></table></div></figure>


<p>を追加</p>

<p>この状態でもページの適当な部分に表示してくれるみたいですが、</p>

<pre><code>&lt;div class="linkwithin_div"&gt;&lt;/div&gt;
</code></pre>

<p>を置くと、この位置に表示場所を指定することが出来ます。</p>

<p>これを<code>source/_include/custom/linkwitin.html</code>というファイルを作って記入。</p>

<figure class='code'><figcaption><span>source/_include/custom/linkwitin.html  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;linkwithin_div&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>さらに<code>source/_layout/post.html</code>へ</p>

<figure class='code'><figcaption><span>source/_layouts/post.html </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>...
</span><span class='line'><span class="nt">&lt;/article&gt;</span>
</span><span class='line'>{% if site.linkwithin_show == true %}
</span><span class='line'><span class="nt">&lt;section&gt;</span>
</span><span class='line'>  {% include linkwithin.html %}
</span><span class='line'><span class="nt">&lt;/section&gt;</span>
</span><span class='line'>{% endif %}
</span><span class='line'>{% if site.zenback_show == true and page.comments == true %}
</span><span class='line'><span class="nt">&lt;section&gt;</span>
</span><span class='line'>  {% include custom/zenback.html %}
</span><span class='line'><span class="nt">&lt;/section&gt;</span>
</span><span class='line'>{% endif %}
</span><span class='line'>{% if site.disqus_short_name and page.comments == true %}
</span><span class='line'>...
</span></code></pre></td></tr></table></div></figure>


<p>の様にZenbackの上に設置。</p>

<p>また、初期状態のままだと5つとか表示していると、
ブラウザの表示幅が狭くなった時、サイドバーに被ってしまいます。
これを回避するために、次の様な<code>sass/custom/_linkwithin.scss</code>を追加。</p>

<figure class='code'><figcaption><span>sass/custom/_linkwithin.scss  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="nc">.linkwithin_inner</span> <span class="p">{</span>
</span><span class='line'>    <span class="na">width</span><span class="o">:</span> <span class="mi">100</span><span class="kt">%</span> <span class="nv">!important</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>sass/custom/_styles.scss</code>でインクルード</p>

<pre><code>@import "_linkwithin.scss";
</code></pre>

<p>で狭い時は2段組になってくれます。</p>

<hr />

<div class="footnotes">
    <ol>
        <li id='fn:1'><p><a href="https://dev.twitter.com/ja/docs/embedded-timelines">埋め込みタイムライン</a>
  <a href='#fnref:1' rev='footnote'>↩</a></p>
</li><li id='fn:2'><p><code>&lt;/div&gt;&lt;footer&gt;</code>の部分は、この直後に<code>_post.html</code>の中で<code>&lt;footer&gt;</code>があるのですが、
  このつながりをみてOctopressが記事部分を抜き出すフィルターをかけてる
  部分があるので、間に<code>zenback_body_end</code>が入るとこのフィルターが上手く行かず、
  結果的にdescription等に影響が出ます。
  ので、無理矢理コメントでこのつながりを追加してあります。
  (<code>post_filters.rb-&gt;raw_content()</code>)
  <a href='#fnref:2' rev='footnote'>↩</a></p>
</li><li id='fn:3'><p>Zenbackのページを見ると、<code>og:image</code>を指定するとZenbackもそれを参照する、
  ということが書いてありますが、以前から<code>og:image</code>を追加(<a href="http://rcmdnk.github.io/blog/2013/05/21/blog-octopress/">OctopressのIndexページの変更</a>)
  して居るにも関わらず余り上手く行きませんでした(何故かアイコンロゴになることが多い)。
<a href='#fnref:3' rev='footnote'>↩</a></p>
</li>
    </ol>
</div>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Windowsでのショートカットの起動オプション for MagicFormation]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/08/30/computer-windows/"/>
    <updated>2013-08-30T00:02:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/08/30/computer-windows</id>
    <content type="html"><![CDATA[<p><a href="http://rcmdnk.github.io/2013/07/20/computer-windows/">MagicFormation: Windowsで使っているランチャー</a>
でMagicFormationを紹介しましたが、
ソフトを登録する際に注意する点等。</p>

<!-- more -->


<br class="clearBoth">




<h1>Contents</h1>


<p>
 <ul>
 <li><a href="#起動オプション">起動オプション</a> </li>
 <li><a href="#直接登録出来ないフォルダ等の登録方法">直接登録出来ないフォルダ等の登録方法</a> </li>
 </ul>

</p>

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3802317723662375";
/* imgRectMid */
google_ad_slot = "9043394444";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>


<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


<h1 id="起動オプション">起動オプション</h1>

<p>Windowsのスタートメニューに登録されてるソフトの中には、
ショートカットで起動オプション付きで登録されているものがあります<sup id='fnref:1'><a href='#fn:1' rel='footnote'>1</a></sup>。</p>

<p>設定で<code>ショートカットはリンク元の実ファイルを登録</code>(その他の設定内)を選んでると
これらをMagicFormationにドロップして登録しようとする時、
<code>起動パス</code>にソフト実体がが登録されて、オプションは省かれてしまいます<sup id='fnref:2'><a href='#fn:2' rel='footnote'>2</a></sup>。</p>

<p>この場合は必要に応じて、アイコンの設定から<code>起動引数</code>の欄があるので、
ここにオプションを記入します。</p>

<p>以下、起動引数付きで登録してあるソフトです。</p>

<ul>
<li>XWin Server

<ul>
<li>起動パス: <code>C:\cygwin\bin\run.exe</code></li>
<li>起動引数: <code>/usr/bin/bash.exe -l -c</code></li>
<li>アイコン: <code>C:\cygwin\bin\XWin.exe</code></li>
</ul>
</li>
<li>Cygwin-Terminal

<ul>
<li>起動パス: <code>C:\cygwin\bin\mintty.exe</code></li>
<li>起動引数: <code>-i /Cygwin-Terminal.ico -</code></li>
<li>アイコン: <code>C:\cygwin\Cygwin-Terminal.ico</code></li>
</ul>
</li>
<li>Putty: セッション毎に作成、coLinuxの例

<ul>
<li>表示名: coLinux</li>
<li>起動パス: <code>C:\Program Files\PuTTY\putty.exe</code></li>
<li>起動引数: <code>-load coLinux -l user -pw password</code></li>
<li>アイコン: <code>C:\Program Files\coLinux\colinux-daemon.exe</code></li>
</ul>
</li>
</ul>


<p>アイコンは<code>ico</code>ファイルでも<code>exe</code>でも画像ファイルでもOKです。
Puttyの場合、<code>-load</code>でセッション名、<code>-l</code>でユーザー名、
<code>-pw</code>でパスワードが指定出来ます。
パスワードは直ぐ見れる状態になるので、
自分専用のPCでも取られても余り問題ない
(上のようにcoLinuxで外からはssh出来ないような)
様な場合に限った方が良いです。</p>

<h1 id="直接登録出来ないフォルダ等の登録方法">直接登録出来ないフォルダ等の登録方法</h1>

<p><code>コンピューター</code>や<code>ゴミ箱</code>等、デスクトップにある
アイコンを直接登録しようとすると弾かれて登録出来ません。</p>

<p>これらを登録するには、一度自分のDocumentsディレクトリ等にショートカットを作り、そのショートカットを登録します。</p>

<hr />

<div class="footnotes">
    <ol>
        <li id='fn:1'><p>右クリックからプロパティで<code>リンク先</code>を確認。
  ソフト名の後にオプションがある場合があります。
  <a href='#fnref:1' rev='footnote'>↩</a></p>
</li><li id='fn:2'><p>このオプションが選ばれて無いときはショートカット自体(<code>.lnk</code>)が登録され、
  従って起動オプション毎登録されます。
<a href='#fnref:2' rev='footnote'>↩</a></p>
</li>
    </ol>
</div>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Group Policy Clientサービスに接続できませんでした。]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/08/27/computer-windows/"/>
    <updated>2013-08-27T21:55:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/08/27/computer-windows</id>
    <content type="html"><![CDATA[<p>Windows Update後、題名の様なエラーがでてログイン出来ず。</p>

<!-- more -->


<p>Windows7でWindows Updateした後、再起動した時、
ログイン画面までは普通に行ったのに、
ログインしようとしたら</p>

<pre><code>Group Policy Clientサービスに接続できませんでした。
システム管理者に連絡してください。
</code></pre>

<p>と出て、強制ログアウトする状態に。
この際ログインしようとしたのは、管理者権限が無いユーザーでした。</p>

<p>試しにセーフモードで立ち上げてみたら</p>

<pre><code>The user name or password is incorrect.
</code></pre>

<p>というエラーが途中で出ましたが、その後ログイン画面に行き、
普通のログインの様な画面に移行後ログインするような状態に。</p>

<p>取り敢えず一旦再起動しなおして、管理者アカウントでログインすると、
ログインは出来たのですが、</p>

<pre><code>Windowsサービスに接続できませんでした。
Group Policy Clientサービスに接続できませんでした。
このため、標準ユーザーはこのシステムにログオンできません。
管理者ユーザーは、システムイベントログを参照して、このサービスが応答しなかった原因を確認できます。
</code></pre>

<p>というエラーメッセージが。
Windows全般的にそうですが、(知識がないので。。。)エラーログを見ても余りよく分からないので、適当にググってみると</p>

<blockquote><p><a href="http://bit.ly/16ODJZ6">レジストリの修正する</a></p></blockquote>

<p>とか</p>

<blockquote><p><a href="http://bit.ly/1fhbhRb">ユーザープロファイルを削除してみるとか</a></p></blockquote>

<p>とかありましたが、ちょっと大変そうなので、取り敢えず
システムの復元を試すことに。</p>

<p>で、結果的にはUpdate前の復元ポイントまで戻したら問題なく治りました。
その後Updateを適用しても大丈夫そうです。</p>

<p>何が問題だったんだろうか。。。？</p>

<hr />
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[KDriveのサービス終了でオンラインストレージ使用について考えてみる]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/08/23/computer/"/>
    <updated>2013-08-23T09:43:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/08/23/computer</id>
    <content type="html"><![CDATA[<p>オンラインストレージサービスのKDriveが個人向けサービスを終了するようです。</p>

<!-- more -->


<br class="clearBoth">




<h1>Contents</h1>


<p>
 <ul>
 <li><a href="#KDrive終了">KDrive終了</a> </li>
 <li><a href="#乗り換え先">乗り換え先</a> </li>
 <li><a href="#メインで使っているオンラインストレージ">メインで使っているオンラインストレージ</a> </li>
 <li><a href="#人のサーバーを通さないオンライン共有">人のサーバーを通さないオンライン共有</a>
  <ul>
  <li><a href="#AeroFS">AeroFS</a>  </li>
  <li><a href="#ownCloud">ownCloud</a>  </li>
  </ul>
 </li>
 </ul>

</p>

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3802317723662375";
/* imgRectMid */
google_ad_slot = "9043394444";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>


<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


<h1 id="KDrive終了">KDrive終了</h1>

<p>KDriveはアカウント作るだけで40GB無料で使え、さらにログイン等の簡単な作業だけで
50GBまで増えるオンラインストレージサービスなので、
一応アカウント作って、あまり重要でないけど
外から見たくなったら見えたら嬉しい、的な物を
メインのPCのみでバックアップも兼ねて同期して使ってました。</p>

<p>それがサービスを終了するようです。
<a href="http://info.kingsoft.jp/company/information/2013/08/20130823.html">キングソフトからのお知らせ</a>
によると、2013/9/2に新規アカウント停止、9/25日には無料版はアップロード停止、
さらに2014/2/28にはログインもできなくなる模様。
有料版でも2014/8/29で全て終了するみたいです。</p>

<p>法人向けサービスは続くみたいですが、やはり、50GBを簡単に無料で提供する、と言うのは
なかなか成り立つものではないのでしょうかね。
今やオンラインストレージサービスはいたるところにあるので、
有料で使うくらいなら他を使うし、無料で取り敢えず50GBだけ使ってるって人が
多かったんでしょうか？
ちょっと前に30GB無料とかやってたNドライブも<a href="http://ndrive.naver.jp/notice?page=1&amp;docId=4005">終了のアナウンス</a>出してましたが。</p>

<h1 id="乗り換え先">乗り換え先</h1>

<p>乗り換え先としては時々キャンペーンで50GBの振る舞いをしてた時に取った
Boxかな、と思って久々に開いてみたら削除された。。。
<a href="https://app.box.com/legal_text/tos">120日間ノーアクセスだと消されるようですね</a>。
いずれにしろ無料だと最大ファイルサイズが250MBなので使い道が限られるため、
あまり使い勝手が良くないかもしれません。</p>

<p>探してみたら色々ありすぎて大変な状況ですが、同じくらいの量を無料で、となると
<a href="http://www.adrive.com/">ADrive</a>辺りですが、無料だとデスクトップクライアントも
使えないので自動で同期したりすることは出来なそうです。</p>

<p>それであれば、同様にMEAGAUPLOADの後継？の<a href="https://mega.co.nz/">Mega</a>
なんかも50GB使えますが、流石に微妙な所。</p>

<p>差し当たり同じ様な量を同じように使える感じの所はない感じです。
ので、ちょっと別の方向で考えようかな、と。</p>

<hr />

<p>追記 2013/09/01</p>

<p>copyというサービスを忘れてました。
いつの間にか大分無料容量が大きくなってたので使ってみることにします:
<a href="http://rcmdnk.github.io/blog/2013/09/01/computer/">オンラインストレージCopy.comを導入</a></p>

<hr />

<h1 id="メインで使っているオンラインストレージ">メインで使っているオンラインストレージ</h1>

<div class="nailthumb-container title-thumb">
  <a href="https://www.dropbox.com/" rel="nofollow" target="_blank" >
    <img src="http://rcmdnk.github.io/images/WinApp/Dropbox.png" alt="" title="" >
  </a>
</div>


<p>今、オンラインストレージはDropboxをメインに使っていて、これは大分無料でも
容量が増えたので手持ちのマシンで色々共有するのに使っています。
20GB程度まで増えてるので、それなりに必要な物は充分共有できてます。</p>

<p>ですがそれでも20GB程度なので、ちょっと大きな物を取り敢えず入れておこう、というわけにはいきません。</p>

<p>SugerSyncやGoogle Drive等色々使えば増えますが、細切れで入れてくのも
管理が面倒になるので避けたいところです。(SugerSyncはあまり容量が増えてないので。。。)</p>

<h1 id="人のサーバーを通さないオンライン共有">人のサーバーを通さないオンライン共有</h1>

<p>上に挙げた物は<code>オンラインストレージ</code>で、サーバーを借りて
ファイルを入れておき、そこと手元のマシンで同期したりダウンロードしたり
する感じですが、最近、そのような環境をオンラインサーバーを通さず
に作れる様な物も出てきました。</p>

<h2 id="AeroFS">AeroFS</h2>

<div class="nailthumb-container title-thumb">
  <a href="https://www.aerofs.com/" rel="nofollow" target="_blank" >
   <img class="left" src="http://rcmdnk.github.io/images/WinApp/AeroFS.png" >
  </a>
</div>


<p><a href="https://aerofs.com/">AeroFS</a>はDropboxの様なファイル同期を
サーバーを通さず行います。
前にあったWindows Live Meshみたいなものです。
ちょっと前までベータ版で招待制でしたが、今は正式版ですぐに登録できます。</p>

<p>登録すると、各マシンからのアクセス等、ユーザー管理はAeroFSで行いますが、
ファイル自体はP2Pで受け渡しが行われるので完全にPrivateです。
サーバーに置いておくわけではないので、Google Driveで騒ぎになった
所有権の問題も全く関係ありえません。</p>

<p>一方、サーバー通さないので、例えば2つのマシンで共有したい時は
両方が同時に起動してないと同期できません。
一台ファイルサーバー的に常時起動しておくマシンがあればDropboxに限りなく近く
使えると思います。</p>

<p>サーバーを通さないので、基本的に自分の持っているディスク分だけいくらでも
共有可能で制限はありません。</p>

<p>履歴などの機能もありますが、これもローカルディスクに作るので、その分
ディスクは圧迫しますが、逆にディスクさえ充分あればいくらでもできます。</p>

<p>また、Share機能もあって、ファイルをShare設定しておけば
他の人ともAeroFSでフォルダを共有できる用にもなります。</p>

<p>今は一部のPCで比較的大きなファイルの共有をするのに使っています。</p>

<p>ただ、これだとWebインターフェースからファイルにはアクセス出来ないので、
AeroFSのアプリケーションを入れてないとファイルにアクセス出来ません。
それからiOS用のアプリがないので、現状iPhone等からアクセスする手段はありません。
Android版はあるみたいです。</p>

<p>ですので、完全に同期、共有化のためのシステムな感じです。</p>

<h2 id="ownCloud">ownCloud</h2>

<div class="nailthumb-container title-thumb">
  <a href="https://www.aerofs.com/" rel="nofollow" target="_blank" >
    <img class="left" src="http://rcmdnk.github.io/images/WinApp/owncloud.png" >
  </a>
</div>


<p><a href="http://owncloud.org/">ownCloud</a>はAeroFSと違いDropboxのような環境を
自前で作ってしまおう、と言った形のシステムです。
サーバーを自分で作って、そこにクライアントからアクセスします。</p>

<p>ですので、この場合には1台常時起動しているシステムが必須です。
AeroFSの場合は、例えば3台持ってたらそのうち2台ずつでも起動していれば
結果的に全て同期できますが、ownCloudではサーバーを動かしておくための
マシンが必要です。</p>

<p>その代わり、webサーバーを立ち上げて、Dropboxの様にWebアクセスも出来る様になります。
なので、完全にDropboxのようなオンラインストレージサービスを自分で
持つことが出来ます。ユーザー管理等も勿論自前なので、
完全に独立したPrivateな環境を作ることが出来ます。</p>

<p>前に見た時はサーバーがLinux専用で、自分で常時起動しておけるLinuxマシンが無かったので
試してませんでしたが、今はWindowsやMac用もあるみたいなので、そのうち試して見たいと思ってます。</p>

<p>サーバーにするのに固定IPが必要ですが、<a href="http://www.noip.com/">No-IP</a>
の様なサービスを使えば、ドメインを貰えて、そのドメインとマシンのIP
を定期的に同期し続ける事が出来るので、 擬似的に固定IPを使える様な形になり、
無理に固定IPサービスをプロバイダに頼まなくても使えます。(でないと無駄に1000円くらいするので…)</p>

<p>ownCloudで検索した時に<a href="http://owncloud.com/">http://owncloud.com/</a>も出てきましたが、
orgの方が元々立ち上げられたコミュニティのためのページで、
comの方はowonCloudを使ったサービスを提供する企業のページ、ということみたいです<sup id='fnref:1'><a href='#fn:1' rel='footnote'>1</a></sup><sup id='fnref:2'><a href='#fn:2' rel='footnote'>2</a></sup>。</p>

<p>ちなみに日本でもビーグッド・テクノロジーと言う会社が<a href="http://owncloud.jp/">http://owncloud.jp/</a>というドメインを取得してサポート等を提供しているみたいです。</p>

<p>ownCloudはかなり活発に開発が行われてて大分使いやすそうなので、
DropboxやAeroFSで使ってる部分はそのままにして、
KDriveで行っていた作業的なものは、1台古いPCをファイルサーバーにしてしまって
ownCloudで行おうかな、と思ってます。
速度の問題さえ無ければDropbox分も移行しても良いかもしれません。
ハードディスクも大分安くなったので、そのサーバーで適当にバックアップを
取っておけば便利ですし。
完全にサーバー化するならLinuxにしておいた方が便利かな、とも思います。
そのうちやろう…</p>

<hr />

<div class="footnotes">
    <ol>
        <li id='fn:1'><p><a href="http://forum.owncloud.org/viewtopic.php?f=17&amp;t=8594">Difference .ORG and .COM</a>
  <a href='#fnref:1' rev='footnote'>↩</a></p>
</li><li id='fn:2'><p><a href="http://sourceforge.jp/magazine/11/12/15/0513233">オンラインストレージソフトウェアの商用サービスを提供する「ownCloud.com」設立。サービス開始は3か月後を予定</a>
<a href='#fnref:2' rev='footnote'>↩</a></p>
</li>
    </ol>
</div>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iPhoneでMailboxとDropboxを連携して1GBゲット]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/08/18/computer-ios-dropbox/"/>
    <updated>2013-08-18T15:49:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/08/18/computer-ios-dropbox</id>
    <content type="html"><![CDATA[<p><a href="https://www.dropbox.com/">Dropbox</a>の新たなキャンペーンとして、
<a href="https://itunes.apple.com/jp/app/mailbox/id576502633?mt=8">Mailbox</a>
と連携することで1GBゲットできるキャンペーンが始まったようなので<sup id='fnref:1'><a href='#fn:1' rel='footnote'>1</a></sup>
Mailboxを入れてゲットしていみました。</p>

<!-- more -->


<br class="clearBoth">




<h1>Contents</h1>


<p>
 <ul>
 <li><a href="#Dropboxの容量増加ページを見てみると">Dropboxの容量増加ページを見てみると</a> </li>
 <li><a href="#Mailboxをインストールしてみる">Mailboxをインストールしてみる</a> </li>
 </ul>

</p>

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3802317723662375";
/* imgRectMid */
google_ad_slot = "9043394444";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>


<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


<h1 id="Dropboxの容量増加ページを見てみると">Dropboxの容量増加ページを見てみると</h1>

<p>Web上のDropboxの自分のホームから上にある<code>無料で容量アップ</code>の項目に行くと、
次の様な項目が追加されています。</p>

<p><img src="http://rcmdnk.github.io/images/post/20130818_dropbox_mailbox.png" "" ""></p>

<p>iPhoneなどiOSでMailboxを連携させると1GB貰えるようです。
(Androidは今のところ話無しの様。)</p>

<h1 id="Mailboxをインストールしてみる">Mailboxをインストールしてみる</h1>

<p>一時期Gmailの新しいメールクライアントとして登録することに行列を作るという
様なことをやっていたMailboxですが、
基本的な思想はInboxにあるメールに手動で簡単にいつ読むか、重要度などを設定出来るのが
強みだと思いますが、
Gmailだけ対応なのと、手動で振り分けする前にラベルで振り分けで充分
(逆に手動でやってられない)ので使ってませんでした。</p>

<p>ということで、無料なので取り敢えずApple StoreからiPhoneにインストール。</p>

<p>Googleアカウントと紐付けようとした所、Gmailとの連携時に
<code>IMAP Folders Disabled    Mailbox needs access to your IMAP folders in order to sync your data. Please enable your AllMail, Snet, Trash and [Mailbox] folders in Gmail settings and try again.</code>と言ったエラーが出て進めない。</p>

<p>Gmailの設定を見てみると<sup id='fnref:2'><a href='#fn:2' rel='footnote'>2</a></sup>、IMAPは有効にしてあったのですが、
<code>すべてのメール</code>(<code>AllMail</code>)で<code>IMAPで表示</code>のチェックが外れてました。
基本、すべてのメールにラベル付けしているので、
普段、PCのメールクライアントで見るときに、すべてのメールも同期すると
余計に未読数が増えて見えたり、すべてローカルに取ってくる設定だと
重複してしまうのでこの設定は外してました。</p>

<p>ので、一時的にここにチェックを入れてiPhoneでMailboxを再び試してみると
上手く行きました。
後は、設定からDropboxとの連携をポチッとするだけ。(Dropboxは当然インストールされてるとして。)</p>

<p>これで、Dropboxのページを見ると、
獲得したボーナス容量のページに<code>Linking with the Mailbox app</code>として1GB追加されてました。</p>

<p>ちなみに、Mailboxで最初連携ができなかった時、<code>[Mailbox]</code>というラベルを
Gmail側に作れば良い、という様なのをいくつか見かけましたが、
現在はこれは作らなくて良いようです。(MailboxとGmailを連携した後このラベルは自動で作られる様。)</p>

<p>試しにちょっとMailboxを使ってみましたが、一度手動でいつ見るか振り分ける、
という作業をGmailだけでそれもiPhone上でやる気にならないのでやはり使わないかな、と。
GmailだけじゃなくてIMAPやExchange等全般的に対応してデスクトップクライアントも
あればその機能そのものは割と使いこなせば便利だとは思うのですが。。。</p>

<hr />

<div class="footnotes">
    <ol>
        <li id='fn:1'><p><a href="http://lifehacker.com/mailbox-users-can-get-a-free-gigabyte-of-dropbox-space-1159534393">Get 1GB of Free Dropbox Space with Mailbox for iOS</a>
  <a href='#fnref:1' rev='footnote'>↩</a></p>
</li><li id='fn:2'><p>Gmailページの左のラベル一覧の一番下にある<code>ラベルの管理</code>からチェック。
<a href='#fnref:2' rev='footnote'>↩</a></p>
</li>
    </ol>
</div>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Vim 7.4をCygwinへインストール]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/08/17/computer-windows-cygwin-vim/"/>
    <updated>2013-08-17T00:44:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/08/17/computer-windows-cygwin-vim</id>
    <content type="html"><![CDATA[<p>Vim 7.4の正式版がリリースされたので、
Cygwinへもインストールしました。
現在のCygwinで配布されてるバイナリは7.3+patch 1-1110, 1112-1152
なので、ソースからビルドしてインストールです<sup id='fnref:1'><a href='#fn:1' rel='footnote'>1</a></sup>。</p>

<!-- more -->


<br class="clearBoth">




<h1>Contents</h1>


<p>
 <ul>
 <li><a href="#Mercurielをインストール">Mercurielをインストール</a> </li>
 <li><a href="#Vimをインストール">Vimをインストール</a> </li>
 </ul>

</p>

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3802317723662375";
/* imgRectMid */
google_ad_slot = "9043394444";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>


<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


<h1 id="Mercurielをインストール">Mercurielをインストール</h1>

<p>Mercurielをまだインストールしてなかったので
<a href="http://rcmdnk.github.io/blog/2013/08/08/computer-windows-cygwin/">apt-cyg</a>で</p>

<pre><code>apt-cyg -u install mercurial
</code></pre>

<p>最初大文字で<code>Mercurial</code>やコマンドの<code>hg</code>で探しても見つからなかったので
ソースからインストールしなきゃいけないのかと思いましたが、
普通に<code>mercurial</code>でありました。。。</p>

<h1 id="Vimをインストール">Vimをインストール</h1>

<p><a href="http://rcmdnk.github.io/blog/2013/08/11/computer-linux-windows-cygwin/">Stow</a>を使って管理するようにします。
オプションはマルチバイト対応とLuaやPythonなどいくつかのインタプリタを有効に。以前までの色々のオプションはざっくり落としてみました。(要らないものをdisableしてもあまり意味が無い感じがしてきたので。)</p>

<pre><code>$ cd ~/tmp/
$ hg clone https://vim.googlecode.com/hg/ vim
$ cd vim/src/
$ ./configure  --prefix=$HOME/usr/local/stow/vim-7.4  --enable-multibyte  --enable-luainterp=yes  --enable-perlinterp=no --enable-pythoninterp=yes --enable-python3interp=yes --enable-tclinterp --enable-rubyinterp=yes
$ make &amp;&amp; make install
$ cd ~/usr/local/stow
$ stow vim-7.4
</code></pre>

<p>こんな感じで<code>~/usr/local/</code>へ。</p>

<hr />

<div class="footnotes">
    <ol>
        <li id='fn:1'><p>MacではHomebrew版のHEADが7.4になってますのでHomebrewで入れればOK。
  (<a href="http://rcmdnk.github.io/blog/2013/08/07/computer-vim">Lua対応Vimをインストール</a>)
<a href='#fnref:1' rev='footnote'>↩</a></p>
</li>
    </ol>
</div>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[stowでmake installしたパッケージを管理]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/08/11/computer-linux-windows-cygwin/"/>
    <updated>2013-08-11T03:53:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/08/11/computer-linux-windows-cygwin</id>
    <content type="html"><![CDATA[<p><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B003KOAR0G/rcmdnk0c-22/ref=nosim/" rel="nofollow" target="_blank" ><img class="left" src="http://ecx.images-amazon.com/images/I/41PYjDYaZvL._SL160_.jpg" border="0"></a></p>

<p><a href="http://rcmdnk.github.io/blog/2013/08/04/computer-linux-mac/">pacoでmake installしたパッケージを管理</a>
で書いた様に、Linux(WindowsのcoLinuxも含む)で
make installしたパッケージも管理出来る様にしましたが、
Cygwinにもpacoを入れようとした所コンパイル出来なかったので
代わりにstowと言うインストーラーを入れました。</p>

<!-- more -->


<br class="clearBoth">




<h1>Contents</h1>


<p>
 <ul>
 <li><a href="#Cygwinではpacoをコンパイル出来ない">Cygwinではpacoをコンパイル出来ない</a> </li>
 <li><a href="#stow">stow</a>
  <ul>
  <li><a href="#paco+v.s.+stow">paco v.s. stow</a>  </li>
  <li><a href="#stowインストール">stowインストール</a>  </li>
  <li><a href="#stowの使い方">stowの使い方</a>  </li>
  <li><a href="#すでにインストールしてあるパッケージに対してstowで再インストールする場合">すでにインストールしてあるパッケージに対してstowで再インストールする場合</a>  </li>
 </ul>
 <li><a href="#まとめ">まとめ</a> </li>
 </ul>

</p>

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3802317723662375";
/* imgRectMid */
google_ad_slot = "9043394444";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>


<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


<h1 id="Cygwinではpacoをコンパイル出来ない">Cygwinではpacoをコンパイル出来ない</h1>

<p>pacoのパッケージを取ってきてCygwinでコンパイルしようとすると</p>

<pre><code>log.c:67:20: error: ‘RTLD_NEXT’ undeclared (first use in this function)
</code></pre>

<p>と言った様なエラーが出てコンパイル出来ないのですが、これはglibcが入ってないからですが、
Cygwinではglibcは入れられない様です<sup id='fnref:1'><a href='#fn:1' rel='footnote'>1</a></sup>。</p>

<p>いくつかそれっぽいものはありましたが<sup id='fnref:2'><a href='#fn:2' rel='footnote'>2</a></sup><sup id='fnref:3'><a href='#fn:3' rel='footnote'>3</a></sup>、素直に入れることは
出来なそうなのでpacoは辞めておくことに。</p>

<h1 id="stow">stow</h1>

<p><a href="http://www.gnu.org/software/stow/">stow</a>はpacoと同じ様な<code>make install</code>などで
<code>apt-get</code>などを通さず直接インストールするパッケージを管理する
インストーラーです。</p>

<h2 id="paco+v.s.+stow">paco v.s. stow</h2>

<p>pacoとstowの違いは</p>

<ul>
<li>paco: <code>/usr/local/var/log/paco</code>等のディレクトリ以下にパッケージ名情報ファイルを作り、
その情報を元にインストールされたファイルを管理する。</li>
<li>stow: <code>/usr/local/stow/</code>等のディレクトリ以下にパッケージ名ディレクトリを作り、
その中にパッケージをインストールする。
そこから<code>/usr/local/</code>などへリンクを張る。</li>
</ul>


<p>pacoでインストールした場合は、パッケージ自体は通常通りインストールされるので、<code>/usr/local/var/log/paco</code>自体を削除しても問題有りません。</p>

<p>stowの場合は<code>/usr/local/</code>へはリンクが貼られるだけなので
通常インストールとは形が変わります。
一方、stowは<code>/usr/local/stow/</code>からのリンクを管理するので、
例えば1つのパッケージでバージョンの違う物を両方インストールしておいて、
一時的に切り替える事が簡単に出来ます。
新しいバージョンを入れて取り敢えず試してみる、と言うことができるので、
その点でstowが結構便利かもしれません。</p>

<h2 id="stowインストール">stowインストール</h2>

<ul>
<li>Cygwin</li>
</ul>


<p><a href="http://rcmdnk.github.io/blog/2013/06/24/computer-windows-git-cygwin/">apt-cyg</a>で</p>

<pre><code>$ apt-cyg install stow
</code></pre>

<ul>
<li>Mac</li>
</ul>


<p><a href="http://rcmdnk.github.io/blog/2013/06/21/computer-mac/">Homebrew</a>で</p>

<pre><code>$ brew install stow
</code></pre>

<ul>
<li>Linux</li>
</ul>


<p>apt-getなど。root権限がないところでローカルに入れる場合は自分もstowで管理。</p>

<pre><code>$ cd ~/tmp/
$ wget http://ftp.gnu.org/gnu/stow/stow-2.2.0.tar.gz
$ tar xzf stow-2.2.0.tar.gz
$ cd stow-2.2.0
$ ./configure --prefix=$HOME/usr/local/stow/stow-2.2.0
$ make &amp;&amp; make install
$ cd ~/usr/local/stow
$ ./stow-2.2.0/bin/stow stow-2.2.0
</code></pre>

<h2 id="stowの使い方">stowの使い方</h2>

<p>まず、stowで管理するパッケージをインストールするディレクトリを決めておきます。
通常は最終的にインストールするディレクトリ下にstowというディレクトリを作ります。
(上の場合は<code>$HOME/usr/local/</code>に<code>bin/stow</code>などをインストールするので
<code>$HOME/usr/local/stow</code>ディレクトリを作って入れています。)</p>

<p>パッケージをインストールする際は、prefix等でインストール先を
<code>$HOME/usr/local/stow</code>+<code>パッケージ名</code>に指定して後は通常通りインストールします。</p>

<p>インストール後、stowディレクトリへ行き、</p>

<pre><code>$ stow package
</code></pre>

<p>とすることで、package内から<code>../</code>の<code>/bin/</code>等へリンクが張られます。</p>

<p>アンインストールは</p>

<pre><code>$ stow -D package
</code></pre>

<p>とするとリンクが削除されます。パッケージがその後必要なければ
stowディレクトリから実体も削除すればOK。</p>

<p>バージョンの違う同じパッケージをインストールしてる場合は</p>

<pre><code>$ stow -D package-1.0
$ stow package-2.0
</code></pre>

<p>の様にすれば1.0から2.0へ切り替える事が出来、
実体は残ったままなので、同じ様に1.0に戻る事もすぐ出来ます。</p>

<pre><code>$ stow -n package-2.0
</code></pre>

<p>とすると、ドライランすることが出来ます。</p>

<p>通常は、カレントディレクトリがstowディレクトリ、親ディレクトリが
リンクを作るインストール先ですが、これを変えたい場合は</p>

<ul>
<li><code>-d stow_dir</code>、<code>--dir=stow_dir</code>でstowディレクトリを指定。</li>
<li><code>-t target_dir</code>、<code>--target=target_dir</code>でインストール先ディレクトリを指定。</li>
</ul>


<p>します。ただ、pacoの場合と違い、これらの情報は残らないので、
特別指定した場合はアンインストールする場合も指定する必要があるので、
管理上、最終的なインストール先の下にstowディレクトリを作るのが良いかと思います。</p>

<h2 id="すでにインストールしてあるパッケージに対してstowで再インストールする場合">すでにインストールしてあるパッケージに対してstowで再インストールする場合</h2>

<p>すでにパッケージがインストールしてあると、
リンクでなく実体が存在するのでstowでリンクを作ろうとすると
エラーが出ます。
(<code>-D</code>で削除しようとするとリンクじゃない、と言って削除してくれない。)
一旦それらのファイルを削除しないとstowで管理しようがないみたいで、
結構面倒です。</p>

<p>そこで<a href="https://github.com/rcmdnk/scripts/blob/master/stowReset.sh">stowReset.sh</a>
と言うスクリプトを作りました。</p>

<p>使い方は、まず、インストールしたいパッケージをstowディレクトリに
インストールした後、
stowディレクトリに行き、</p>

<pre><code>$ stowReset.sh package
</code></pre>

<p>とすると、packageに関連するファイルが親ディレクトリから削除されます。
stow同様に<code>-d</code>、<code>-t</code>、<code>-n</code>のオプションが使えます(<code>--dir</code>等2重ハイフンオプションは未対応)。</p>

<p>その後、通常通り、</p>

<pre><code>$ stow package
</code></pre>

<p>とすればリンクを作れる様になります。</p>

<h1 id="まとめ">まとめ</h1>

<p>pacoに比べて、新しいバージョンのテスト等にも便利に使えそうなので、
MacやLinuxでもpacoからstowへ移行しようと思います。</p>

<p>pacoだとconfigureの引数等の情報がそのまま残るのでちょっと便利ですが、
その点はちゃんとメモするようにしておけばOKかな、と。</p>

<hr />

<p>追記 2013/08/28</p>

<p><strike>暫く使ってみて問題発見。stowだと、<code>~/usr/local/stow</code>の下にパッケージディレクトリを置いて、
そこから<code>~/usr/local/</code>へリンクを張るわけですが、その際、例えば
<code>~/usr/local/bin</code>がある場合はその下からリンクを作り始め、一方<code>bin</code>ディレクトリが
ない場合は<code>bin</code>自体がリンクになってしまうみたいです。</p>

<p>つまり、最初に何も<code>~/usr/local/</code>にない状態で<code>vim</code>などをインストールすると、
<code>~/usr/local/bin</code>が<code>~/usr/local/stow/vim/bin</code>などへのシンボリックリンクになってしまいます。
こうなると、次に別のソフトをインストールするときに実質的に<code>~/usr/local/stow/vim/bin</code>内に
シンボリックリンクを置くことになってしまうので<code>~/usr/local/stow/vim/</code>を削除してしまうと
<code>~/usr/local/bin</code>自体がリンク切れになってしまいますし、vimをアップデートすると他のソフトのインストールが消えます。</p>

<p>stowのインストールでディレクトリはリンクでなく必ず掘る様にして、
また、アンインストール時はディレクトリ内に何も無いときに限り消す、みたいなラッパーを作れば良いのだと思うのですが。。。
(sourceコード直接いじった方が楽かな。。。？)そのうちなんとかしたい所。
できればpacoみたいにconfigureオプションを保存出来る様になればなおもよしですが。。。
</strike></p>

<hr />

<hr />

<p>さらに追記 2013/08/29</p>

<p>stowは意外と賢かったです。マニュアルを見たらこの辺をきちんと処理する様になってることが
分かりました。</p>

<p>最初にインストールする時は最も上位のディレクトリだけのリンクを作ろうとして
これを<code>folding</code>と呼んでいます。</p>

<p>で、<code>~/usr/local/bin</code>等が<code>~/usr/local/stow/vim/bin</code>などへのシンボリックリンクの
状態で、次にgit等をインストールすると、<code>bin</code>がシンボリックだと言う事を理解して、
まず、vimへのリンクを消し、新たにディレクトリを作り、
その中にvimとgitの<code>bin</code>内のコンテンツへのリンクを作りなおしてくれます。</p>

<p>逆に、<code>stow -D</code>で削除していく時も、中身が1つのパッケージだけになったディレクトリは
まとめてシンボリックリンクに変えられます。</p>

<p>自分でディレクトリを作ってしまったりするとこのアンインストール時に
無駄にディレクトリを残してしまうことが有ります。
(2つ以上のパッケージが同じディレクトリを使っていると、アンインストールしていって
最後の1つになった時にそのディレクトリをシンボリックリンクにしてくれますが、
最初から1つしか無いとそのディレクトリはパッケージをアンインストールしても残ってしまいます。)</p>

<p>なので、基本的に<code>bin</code>等を自分で作るべきではないです。</p>

<p>これに関連するオプションで<code>--no-folding</code>というオプションが有ります(<code>stow -h</code>では記述を忘れてるのか出て来ない)。
このオプションをインストール時につけると、所謂上で間違って指摘していたような、
各ディレクトリをシンボリックリンクでなく全て掘り下げる様に作ってくれます。
ただ、これをしてしまうとアンインストール時にからディレクトリのゴミが残ります。</p>

<p>また、<code>--no-folding</code>をアンインストール時に使うと、仮にそのディレクトリ内が
1つのパッケージだけになるような場合でもシンボリックリンクに変えたりしないで
そのまま残します。
この場合も後々アンインストールするときにゴミが残るような状態になります。</p>

<p>ので、特別理由がない限りあまり使うことはなさそうです。</p>

<p>他に、<code>--adopt</code>というオプションもあり、ちょっと特殊な動きをします。
通常、stowでインストールするとき、上に書いたように、先にシンボリックリンクでない
普通のファイルがインストールされていると上書きできずにエラーとなります。
しかし、このオプションを使うと、もし、通常ファイルがある場合、
<code>そのファイルをstowディレクトリにあるパッケージにコピーした上でシンボリックリンクを作る</code>、という動きをします。</p>

<p>ここで注意しなければいけないのは、もともとパッケージに入っているファイルが上書きされることです。
つまり、古いファイルが残っていて、それを上書きできる様なオプションではありません。</p>

<p>このオプションの使い道としては、上で作っった<code>stowReset.sh</code>を使わなくてはいけない様な状況で、
パッケージをstowディレクトリにインストール後、一度そのコピーを作り、
そのコピーパッケージでadoptし、その後、オリジナルのパッケージをrestowする、とかでしょうか？</p>

<pre><code>$ pwd
~/usr/local/stow
$ ls
vim
$ cp -r vim vim.tmp
$ stow --adopt vim.tmp &amp;&amp; stow -D vim.tmp &amp;&amp; rm -rf stow.tmp
$ stow vim
</code></pre>

<p>これで、<code>stowReset.sh</code>でやってることとだいたい同じことが出来ます。</p>

<p>ただし、パッケージ内にシンボリックリンクが元々入ってる場合があり
(ライブラリーや実行ファイルの別名など)それらは<code>--adopt</code>しようとすると
他のパッケージに管理されてるとみなされて無視されます。
従ってそのまま残り新しくインストール出来ません。その場合には<code>stowRest.sh</code>を
使ってみてください。
(数ファイルだけだと思うので、その際には手作業でもいいかもしれませんが。)</p>

<hr />

<div class="footnotes">
    <ol>
        <li id='fn:1'><p><a href="http://cygwin.com/faq.html#faq.programming.glibc">Where is glibc?</a>
  <a href='#fnref:1' rev='footnote'>↩</a></p>
</li><li id='fn:2'><p><a href="http://www.gurucoding.com/en/pc_cross_compiler/building_glibc_cygwin_vm.php">Building GLibc in the Cygwin VM</a>
  <a href='#fnref:2' rev='footnote'>↩</a></p>
</li><li id='fn:3'><p><a href="http://artfiles.org/cygwin.org/pub/glibc/releases/">Index of /cygwin.org/pub/glibc/releases</a>
<a href='#fnref:3' rev='footnote'>↩</a></p>
</li>
    </ol>
</div>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[apt-cygでsetup.iniが404 Not Foundになった]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/08/08/computer-windows-cygwin/"/>
    <updated>2013-08-08T22:10:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/08/08/computer-windows-cygwin</id>
    <content type="html"><![CDATA[<p><a href="http://rcmdnk.github.io/blog/2013/06/24/computer-windows-git-cygwin/">Cygwinでコマンドラインからパッケージ管理をする</a>で紹介した<code>apt-cyg</code>ですが、
久しぶりに使ったらミラーサイトで必要なsetupファイルが
見つからないと言ったエラーが出たのでその対処について。</p>

<!-- more -->


<br class="clearBoth">




<h1>Contents</h1>


<p>
 <ul>
 <li><a href="#apt-cygの修正">apt-cygの修正</a> </li>
 </ul>

</p>

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3802317723662375";
/* imgRectMid */
google_ad_slot = "9043394444";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>


<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


<h1 id="apt-cygの修正">apt-cygの修正</h1>

<p>以前設定したまま<code>apt-cyg</code>してみると</p>

<pre><code>$ apt-cyg find vim
Working directory is /setup
Mirror is http://ftp.jaist.ac.jp/pub/cygwin/
--2013-08-08 xx:xx:xx--  http://ftp.jaist.ac.jp/pub/cygwin//setup.bz2
Resolving ftp.jaist.ac.jp (ftp.jaist.ac.jp)... 150.65.7.130
Connecting to ftp.jaist.ac.jp (ftp.jaist.ac.jp)|150.65.7.130|:80... connected.
HTTP request sent, awaiting response... 404 Not Found
2013-08-08 xx:xx:xx-- ERROR 404: Not Found.

--2013-08-08 xx:xx:xx--  http://ftp.jaist.ac.jp/pub/cygwin//setup.ini
Resolving ftp.jaist.ac.jp (ftp.jaist.ac.jp)... 150.65.7.130
Connecting to ftp.jaist.ac.jp (ftp.jaist.ac.jp)|150.65.7.130|:80... connected.
HTTP request sent, awaiting response... 404 Not Found
2013-08-08 xx:xx:xx ERROR 404: Not Found.

Error updating setup.ini, reverting
...
</code></pre>

<p>のようにsetupファイルが無いと言われて情報が更新出来ません。</p>

<pre><code>$ apt-cyg update -m http://ftp.jaist.ac.jp/pub/cygwin/
</code></pre>

<p>の様にしてみても同じ。</p>

<p><a href="http://ftp.jaist.ac.jp/pub/cygwin/">http://ftp.jaist.ac.jp/pub/cygwin/</a>
のサイトをブラウザで見てみると、<code>x86</code>、<code>x86_64</code>と言うディレクトリがあり、
それぞれの下にsetupファイルがあることがわかります。</p>

<p>手元にある32bit Windowsマシンで試しに</p>

<pre><code>$ apt-cyg update -m http://ftp.jaist.ac.jp/pub/cygwin/x86
</code></pre>

<p>としてみるとちゃんと設定出来た様子。
ただ、この状態で</p>

<pre><code>$ apt-cyg -u remove git
$ apt-cyg -u install git
</code></pre>

<p>等としてみると、</p>

<pre><code>$ apt-cyg -u install git
...
--2013-xx-xx xx:xx:xx--  http://ftp.jaist.ac.jp/pub/cygwin/x86/x86/release/git/git-1.7.9-1.tar.bz2
...
HTTP request sent, awaiting response... 404 Not Found
...
MD5 sum did not match, exiting
</code></pre>

<p>となり失敗します。
setup.ini等から得る各パッケージパス情報の中に、<code>x86</code>の部分が入ってしまっているため、
ミラーサイト名に<code>x86</code>までいれてしまうと余計に入ってしまてパッケージへのパスが間違ってる様。</p>

<p>仕方ないので<code>apt-cyg</code>自体を書き換えてみました。</p>

<hr />

<p>2013/08/12 追記</p>

<p>修正版をGitHubにUpしました。</p>

<p><a href="https://github.com/rcmdnk/apt-cyg">https://github.com/rcmdnk/apt-cyg</a></p>

<hr />

<hr />

<p>2013/08/13 追記</p>

<p>上のGitHubの修正版をにアップデートしました。
新しいものでは最後にx86等指定する必要がありませんので、
今までのapt-cygと完全に同じ様に使えます。</p>

<p>ちなみに、apt-cygのページをもう一度良く見てみたら、
gitHubにレポジトリが作られた様です:
<a href="https://github.com/transcode-open/apt-cyg">transcode-open/apt-cyg</a>。
16日程前なので、恐らくその頃にこの問題が起こって指摘されて、
勝手に改造して使って、となったのでしょうか？
せっかく見つけたので、何も考えずにpull requestしてみましたが、
数日前にすでに他の人が出してたので取り下げました。(ちゃんと見ないと駄目ですね :sweat: )
数日放置されてるので、どうなるんでしょう？(pull requestされてる内容自体は指摘されてる様にもう1つ書き換える必要がありますが。)
正直に、これ見て、<code>uname</code>で自動で決めちゃえば良いか、と気づいてのアップデートです。</p>

<hr />

<div><script src='https://gist.github.com/6189422.js'></script>
<noscript><pre><code></code></pre></noscript></div>


<p>ミラーサイトの情報が<code>/etc/setup/last-mirror</code>に書かれている様なので、
これに加えて<code>/etc/setup/last-arch</code>でアーキテクチャ情報を管理するようにしています。</p>

<p>ひと通りミラーサイトを見たところ、見た限りすべて<code>x86</code>、<code>x86_64</code>というディレクトリを
持っているので、<code>-m</code>でミラーサイトを指定するときに、最後にかならず
<code>x86</code>か<code>x86_64</code>を入れるようにし、
それらの情報をサイト情報とは分けて保存しておくようにしてあります。</p>

<hr />
]]></content>
  </entry>
  
</feed>
