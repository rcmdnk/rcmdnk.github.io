<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="https://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: Karabiner | rcmdnk's blog]]></title>
  <link href="https://rcmdnk.com/blog/tags/karabiner/atom.xml" rel="self"/>
  <link href="https://rcmdnk.com/"/>
  <updated>2025-11-01T00:19:32+00:00</updated>
  <id>https://rcmdnk.com/</id>
  <author>
    <name><![CDATA[rcmdnk]]></name>
    <email><![CDATA[rcmdnk@gmail.com]]></email>
  </author>
  <generator uri="https://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[WindowsとMacそれぞれでアプリをトグル表示する]]></title>
    <link href="https://rcmdnk.com/blog/2025/01/04/computer-windows-mac-autohotkey-karabiner/"/>
    <updated>2025-01-04T00:00:00+00:00</updated>
    <id>https://rcmdnk.com/blog/2025/01/04/computer-windows-mac-autohotkey-karabiner</id>
    <content type="html"><![CDATA[<p>やりたいことは特定のアプリをどこからでもショートカットキーで呼び出せるようにし、
かつ、同じボタンでそのアプリを隠すことが出来るようにすることです。</p>

<!-- more -->

<ul id="markdown-toc">
  <li><a href="#windows--autohotkey" id="markdown-toc-windows--autohotkey">Windows + AutoHotkey</a></li>
  <li><a href="#mac--karabiner-elements" id="markdown-toc-mac--karabiner-elements">Mac + Karabiner-Elements</a></li>
</ul>
<div class="group"></div>

<div class="center_wrapper">
  <div>
  <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3802317723662375" data-ad-slot="5762198341"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
  </div>
</div>

<h2 id="windows--autohotkey">Windows + AutoHotkey</h2>

<p>Windowsでは
<a href="https://www.autohotkey.com/">AutoHotkey</a>
を使います。</p>

<p>基本的には
[AutoHotkey v2]https://ahkscript.github.io/ja/docs/v2/)(
であることを前提に書いています。</p>

<p>ChromeをToggleするHotkey設定としてはこんな感じ。</p>

<figure class="code"><figcaption><span>toggle.ahk </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
</pre></td><td class="code"><pre><code class="ahk"><span class="line"><span></span><span class="n">#HotIf</span> <span class="nf">WinActive</span><span class="p">(</span><span class="s">&quot;ahk_exe chrome.exe&quot;</span><span class="p">)</span>
</span><span class="line"><span class="o">^!</span><span class="n">c</span><span class="o">::</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="nb">Send</span><span class="p">(</span><span class="s">&quot;!{Tab}&quot;</span><span class="p">)</span>
</span><span class="line">    <span class="nb">Send</span><span class="p">(</span><span class="s">&quot;{Alt Up}&quot;</span><span class="p">)</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="n">#HotIf</span> <span class="nf">WinExist</span><span class="p">(</span><span class="s">&quot;ahk_exe chrome.exe&quot;</span><span class="p">)</span>
</span><span class="line"><span class="o">^!</span><span class="n">c</span><span class="o">::</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="nb">WinActivate</span><span class="p">(</span><span class="s">&quot;ahk_exe chrome.exe&quot;</span><span class="p">)</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="n">#HotIf</span>
</span><span class="line"><span class="o">^!</span><span class="n">c</span><span class="o">::</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="nb">Run</span><span class="p">(</span><span class="nv">A_ProgramFiles</span> <span class="s">&quot;\Google\Chrome\Application\chrome.exe&quot;</span><span class="p">)</span>
</span><span class="line">    <span class="nb">WinWait</span><span class="p">(</span><span class="s">&quot;ahk_exe chrome.exe&quot;</span><span class="p">)</span>
</span><span class="line">    <span class="nb">WinActivate</span><span class="p">(</span><span class="s">&quot;ahk_exe chrome.exe&quot;</span><span class="p">)</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

<p><i class="key">Ctrl</i>-<i class="key">Alt</i>-<i class="key">C</i>でChromeをトグル表示するHotkeyを書いています。</p>

<p>現状アクティブになっている場合には<i class="key">Alt</i>-<i class="key">Tab</i>で1つ前のアプリに戻るようにしています。
これ何度も連続で使うとちょっと不安定に<i class="key">Alt</i>-<i class="key">Tab</i>の表示が残ってしまうこともありますが、
一回であればスムーズに動作してくれるので取り敢えずこれで。</p>

<p><code>WinMinimize</code>という最小化する関数もあるのでもし最小化のほうが良ければそれで。
<code>WinClose</code>で閉じてしまう事もできますがWindowsだと最後のWindowの場合アプリ自体が終了してしまって次の起動が遅くなるので注意。</p>

<p>アクティブでない場合でウィンドウがあれば<code>WinActivate</code>で前面に出すようにしています。
これだと複数同じアプリのウィンドウがある場合は最後にアクティブだったものが前面に出ますが、
もし必要であれば<code>ahk_exe chrome.exe</code>を全体的にタイトル名に変えるなどで特定のウィンドウを指定することもできます。</p>

<p>アクティブでもなくてウィンドウもない場合には<code>Run</code>でアプリを立ち上げます。
立ち上げるだけだとアクティブにならないので<code>WinActivate</code>してやる必要がありますが、
即行うとアプリが立ち上がる前で認識できないので<code>WinWait</code>で待ってから<code>WinActivate</code>しています。</p>

<p>この例ではChromeで、立ち上げるアプリが<code>A_ProgramFiles</code> (<strong>\C:\Program Files (x86)</strong> or <strong>\C:\Program Files</strong>)の下にありますが、
Obsidianなどは通常ユーザーディレクトリの中の<strong>AppData\Local</strong>の中にあります。</p>

<p>AutoHotkeyには<code>A_AppData</code>という変数が定義されていますが、これは
<code>AppData\Roaming</code>のパスを返すので<code>Local</code>を見たいときには上のように<code>A_UserName</code>を使って書くしかありません。(多分)</p>

<p>Chromeなどは<strong>\C:\Program Files (x86)</strong>の下にありますが、
Obsidianなどはユーザーディレクトリの中の<strong>AppData\Local</strong>の中にあるのでそれぞれ場所を指定しています。</p>

<p><code>"C:\Users\" A_UserName "\AppData\Local\obsidian\Obsidian.exe"</code></p>

<p>こんな感じのPathになります。AutohHotkeyには<code>A_AppData</code>という変数が定義されていますが、これは
<code>AppData\Roaming</code>のパスを返すので<code>Local</code>を見たいときには上のように<code>A_UserName</code>を使って書くしかありません。(多分)</p>

<p>このようにしてトグル表示を実現できますが、
複数のアプリでも同じ様なことをする場合には関数化しておくと便利です。</p>

<p>以下のようにしてAuto execute sectionでまとめて書くことが出来ます。</p>

<figure class="code"><figcaption><span>toggle.ahk </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
</pre></td><td class="code"><pre><code class="ahk"><span class="line"><span></span><span class="n">LaunchApp</span><span class="p">(</span><span class="n">winName</span><span class="p">,</span> <span class="n">appPath</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="nb">Run</span><span class="p">(</span><span class="n">appPath</span><span class="p">)</span>
</span><span class="line">    <span class="nb">WinWait</span><span class="p">(</span><span class="n">winName</span><span class="p">)</span>
</span><span class="line">    <span class="nb">WinActivate</span><span class="p">(</span><span class="n">winName</span><span class="p">)</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="n">prevApp</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">    <span class="nb">Send</span><span class="p">(</span><span class="s">&quot;!{Tab}&quot;</span><span class="p">)</span>
</span><span class="line">    <span class="nb">Send</span><span class="p">(</span><span class="s">&quot;{Alt Up}&quot;</span><span class="p">)</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="n">ToggleApp</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">winName</span><span class="p">,</span> <span class="n">appPath</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="n">HotIfWinActive</span><span class="p">(</span><span class="n">winName</span><span class="p">)</span>
</span><span class="line">    <span class="nb">Hotkey</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">prevApp</span><span class="p">())</span>
</span><span class="line">    <span class="n">HotIfWinExist</span><span class="p">(</span><span class="n">winName</span><span class="p">)</span>
</span><span class="line">    <span class="nb">Hotkey</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">WinActivate</span><span class="p">(</span><span class="n">winName</span><span class="p">))</span>
</span><span class="line">    <span class="n">HotIf</span>
</span><span class="line">    <span class="nb">Hotkey</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">LaunchApp</span><span class="p">(</span><span class="n">winName</span><span class="p">,</span> <span class="n">appPath</span><span class="p">))</span>
</span><span class="line">    <span class="n">HotIf</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="n">ToggleApp</span><span class="p">(</span><span class="s">&quot;^!c&quot;</span><span class="p">,</span> <span class="s">&quot;ahk_exe chrome.exe&quot;</span><span class="p">,</span> <span class="nv">A_ProgramFiles</span> <span class="s">&quot;\Google\Chrome\Application\chrome.exe&quot;</span><span class="p">)</span>
</span><span class="line"><span class="n">ToggleApp</span><span class="p">(</span><span class="s">&quot;^!s&quot;</span><span class="p">,</span> <span class="s">&quot;ahk_exe slack.exe&quot;</span><span class="p">,</span> <span class="nv">A_ProgramFiles</span> <span class="s">&quot;\Slack\Slack.exe&quot;</span><span class="p">)</span>
</span><span class="line"><span class="n">ToggleApp</span><span class="p">(</span><span class="s">&quot;^!t&quot;</span><span class="p">,</span> <span class="s">&quot;ahk_exe Hyper.exe&quot;</span><span class="p">,</span> <span class="s">&quot;C:\Users\&quot;</span> <span class="nv">A_UserName</span> <span class="s">&quot;\AppData\Local\Programs\Hyper.exe&quot;</span><span class="p">)</span>
</span><span class="line"><span class="n">ToggleApp</span><span class="p">(</span><span class="s">&quot;^!q&quot;</span><span class="p">,</span> <span class="s">&quot;ahk_exe Obsidian.exe&quot;</span><span class="p">,</span> <span class="s">&quot;C:\Users\&quot;</span> <span class="nv">A_UserName</span> <span class="s">&quot;\AppData\Local\obsidian\Obsidian.exe&quot;</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="nb">Return</span>
</span><span class="line">
</span><span class="line"><span class="c1">; Other hotkeys</span>
</span><span class="line">
</span><span class="line"><span class="o">...</span>
</span></code></pre></td></tr></table></div></figure>

<p>こんな感じで、<code>ToggleApp</code>という関数を使ってアプリをトグル表示するHotkeyをAuto execute sectionの中で書いています。</p>

<p><code>key</code>にはHotkeyのキーを指定します。
<code>winName</code>はWindow Spyで見つけらるclassやexe, titleなどを指定しますが、基本的にはahk_exeを指定しておくのが無難です。
<code>appPath</code>はアプリのパスを指定します。わからない場合はスタートメニューから該当のアプリの右クリックで<strong>ファイルの場所を開く</strong>を開いて探して見てください。通常はそのファイルがさらにショートカットになっていることが多いので、それをまた右クリックして<strong>ファイルの場所を開く</strong>を開くと大元の位置が分かることが多いです。</p>

<h2 id="mac--karabiner-elements">Mac + Karabiner-Elements</h2>

<p>macOSでは
<a href="https://karabiner-elements.pqrs.org/">Karabiner-Elements</a>
を使います。</p>

<p>以下で使う<code>frontmost_application_history_index</code>がv15.3.6から導入されたもので、
これは現状ベータ版のみになっているので使う場合はベータ版にアップグレードする必要があります。
(現行のstableバージョンは15.3.0。)</p>

<ul>
  <li><a href="https://karabiner-elements.pqrs.org/docs/json/complex-modifications-manipulator-definition/to/software_function/open_application/">open_application Karabiner-Elements</a></li>
  <li><a href="https://github.com/pqrs-org/Karabiner-Elements/issues/4011">Add prev_application companion to the new open_application · Issue #4011 · pqrs-org/Karabiner-Elements</a></li>
</ul>

<p>ChromeをToggleするHotkey設定としてはこんな感じ。</p>

<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
<span class="line-number">53</span>
<span class="line-number">54</span>
<span class="line-number">55</span>
<span class="line-number">56</span>
<span class="line-number">57</span>
<span class="line-number">58</span>
<span class="line-number">59</span>
<span class="line-number">60</span>
<span class="line-number">61</span>
<span class="line-number">62</span>
<span class="line-number">63</span>
<span class="line-number">64</span>
<span class="line-number">65</span>
<span class="line-number">66</span>
</pre></td><td class="code"><pre><code class="json"><span class="line"><span></span><span class="w">    </span><span class="p">{</span>
</span><span class="line"><span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Toggle Chrome&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">      </span><span class="nt">&quot;extra_descriptions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">        </span><span class="s2">&quot;Cmd-Ctrl-c to toggle Chrome.&quot;</span>
</span><span class="line"><span class="w">      </span><span class="p">],</span>
</span><span class="line"><span class="w">      </span><span class="nt">&quot;manipulators&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">        </span><span class="p">{</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;basic&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;from&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">            </span><span class="nt">&quot;key_code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;c&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">            </span><span class="nt">&quot;modifiers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">              </span><span class="nt">&quot;mandatory&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">                </span><span class="s2">&quot;control&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">                </span><span class="s2">&quot;command&quot;</span>
</span><span class="line"><span class="w">              </span><span class="p">]</span>
</span><span class="line"><span class="w">            </span><span class="p">}</span>
</span><span class="line"><span class="w">          </span><span class="p">},</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;to&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">            </span><span class="p">{</span>
</span><span class="line"><span class="w">              </span><span class="nt">&quot;software_function&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">                </span><span class="nt">&quot;open_application&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">                  </span><span class="nt">&quot;bundle_identifier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;com.google.Chrome&quot;</span>
</span><span class="line"><span class="w">                </span><span class="p">}</span>
</span><span class="line"><span class="w">              </span><span class="p">}</span>
</span><span class="line"><span class="w">            </span><span class="p">}</span>
</span><span class="line"><span class="w">          </span><span class="p">],</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;conditions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">            </span><span class="p">{</span>
</span><span class="line"><span class="w">              </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;frontmost_application_unless&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">              </span><span class="nt">&quot;bundle_identifiers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">                </span><span class="s2">&quot;^com\\.google\\.Chrome$&quot;</span>
</span><span class="line"><span class="w">              </span><span class="p">]</span>
</span><span class="line"><span class="w">            </span><span class="p">}</span>
</span><span class="line"><span class="w">          </span><span class="p">]</span>
</span><span class="line"><span class="w">        </span><span class="p">},</span>
</span><span class="line"><span class="w">        </span><span class="p">{</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;basic&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;from&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">            </span><span class="nt">&quot;key_code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;c&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">            </span><span class="nt">&quot;modifiers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">              </span><span class="nt">&quot;mandatory&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">                </span><span class="s2">&quot;control&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">                </span><span class="s2">&quot;command&quot;</span>
</span><span class="line"><span class="w">              </span><span class="p">]</span>
</span><span class="line"><span class="w">            </span><span class="p">}</span>
</span><span class="line"><span class="w">          </span><span class="p">},</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;to&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">            </span><span class="p">{</span>
</span><span class="line"><span class="w">              </span><span class="nt">&quot;software_function&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">                </span><span class="nt">&quot;open_application&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">                  </span><span class="nt">&quot;frontmost_application_history_index&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
</span><span class="line"><span class="w">                </span><span class="p">}</span>
</span><span class="line"><span class="w">              </span><span class="p">}</span>
</span><span class="line"><span class="w">            </span><span class="p">}</span>
</span><span class="line"><span class="w">          </span><span class="p">],</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;conditions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">            </span><span class="p">{</span>
</span><span class="line"><span class="w">              </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;frontmost_application_if&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">              </span><span class="nt">&quot;bundle_identifiers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">                </span><span class="s2">&quot;^com\\.google\\.Chrome$&quot;</span>
</span><span class="line"><span class="w">              </span><span class="p">]</span>
</span><span class="line"><span class="w">            </span><span class="p">}</span>
</span><span class="line"><span class="w">          </span><span class="p">]</span>
</span><span class="line"><span class="w">        </span><span class="p">}</span>
</span><span class="line"><span class="w">      </span><span class="p">]</span>
</span><span class="line"><span class="w">    </span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

<p>Windows同様に
<i class="key">Ctrl</i>-<i class="key">Alt</i>-<i class="key">C</i>でChromeをトグル表示するHotkeyを書いています。</p>

<p>アプリに対応する<code>bundle_identifier</code>は
<a href="https://karabiner-elements.pqrs.org/docs/json/complex-modifications-manipulator-definition/to/software_function/open_application/">open_application</a>
のヘルプの
<strong>Investigate the bundle identifier and file path</strong>を参考にKarabiner-EventViewerを使って調べられます。</p>

<p><code>conditions</code>の方で使う<code>bundle_identifiers</code>には正規表現で指定する必要があるので
<sup id="fninref:1"><a href="#fnin:1" rel="footnote">1</a></sup>
<code>^com\\.google\\.Chrome$</code>のように正規表現で指定します。</p>

<p><code>software_function.open_application</code>を使ってアプリを開くことができます。
すでにアプリが開いていればそれを前面に出すだけになるのでアプリが開いているかどうかを確認せずに
最前面がそのアプリでなければ<code>open_application</code>でアプリを開くようにしています<sup id="fninref:2"><a href="#fnin:2" rel="footnote">2</a></sup>。</p>

<p>アプリが前面にある際には”<code>fromtmost_application_history_index": 1</code>で1つ前に最前面にあったアプリを前面に出すようにしています。</p>

<p>Windows版と違って直接直前のアプリを持ってこれるのでかなりスムーズな感じでToggle表示ができます。</p>

<p>同様に別のアプリも作っていくことが出来ます。</p>

<p>自分の設定は
<a href="https://github.com/pqrs-org/KE-complex_modifications">pqrs-org/KE-complex_modifications</a>
をforkした
<a href="https://github.com/rcmdnk/KE-complex_modifications/">rcmdnk/KE-complex_modifications</a>
で作っていますが、
<a href="https://github.com/rcmdnk/KE-complex_modifications/blob/master/scripts/erb2json.rb">scripts/erb2json.rb</a>
の中に
<a href="https://github.com/rcmdnk/KE-complex_modifications/blob/646978c691919945ce368b10df4648bc8d32f23a/scripts/erb2json.rb#L408">toggle_app</a>
という関数を作って、
<a href="https://github.com/rcmdnk/KE-complex_modifications/blob/646978c691919945ce368b10df4648bc8d32f23a/src/json/personal_rcmdnk.json.erb#L285">src/json/personal_rcmdnk.json.erb</a>
の中に</p>

<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
</pre></td><td class="code"><pre><code class="erb"><span class="line"><span></span><span class="x">    {</span>
</span><span class="line"><span class="x">      &quot;description&quot;: &quot;Toggle Chrome&quot;,</span>
</span><span class="line"><span class="x">      &quot;extra_descriptions&quot;: [</span>
</span><span class="line"><span class="x">        &quot;Cmd-Ctrl-c to toggle Chrome.&quot;</span>
</span><span class="line"><span class="x">      ],</span>
</span><span class="line"><span class="x">      &quot;manipulators&quot;: </span><span class="cp">&lt;%=</span><span class="w"> </span><span class="n">toggle_app</span><span class="p">(</span><span class="s2">&quot;com.google.Chrome&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;c&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;control&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;command&quot;</span><span class="o">]</span><span class="p">)</span><span class="w"> </span><span class="cp">%&gt;</span>
</span><span class="line"><span class="x">    },</span>
</span><span class="line"><span class="x">    {</span>
</span><span class="line"><span class="x">      &quot;description&quot;: &quot;Toggle Slack&quot;,</span>
</span><span class="line"><span class="x">      &quot;extra_descriptions&quot;: [</span>
</span><span class="line"><span class="x">        &quot;Cmd-Ctrl-s to toggle Slack.&quot;</span>
</span><span class="line"><span class="x">      ],</span>
</span><span class="line"><span class="x">      &quot;manipulators&quot;: </span><span class="cp">&lt;%=</span><span class="w"> </span><span class="n">toggle_app</span><span class="p">(</span><span class="s2">&quot;com.tinyspeck.slackmacgap&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;s&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;control&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;command&quot;</span><span class="o">]</span><span class="p">)</span><span class="w"> </span><span class="cp">%&gt;</span>
</span><span class="line"><span class="x">    },</span>
</span><span class="line"><span class="x">    {</span>
</span><span class="line"><span class="x">      &quot;description&quot;: &quot;Toggle iTerm2&quot;,</span>
</span><span class="line"><span class="x">      &quot;extra_descriptions&quot;: [</span>
</span><span class="line"><span class="x">        &quot;Cmd-Ctrl-t to toggle iTerm2.&quot;</span>
</span><span class="line"><span class="x">      ],</span>
</span><span class="line"><span class="x">      &quot;manipulators&quot;: </span><span class="cp">&lt;%=</span><span class="w"> </span><span class="n">toggle_app</span><span class="p">(</span><span class="s2">&quot;com.googlecode.iterm2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;t&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;control&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;command&quot;</span><span class="o">]</span><span class="p">)</span><span class="w"> </span><span class="cp">%&gt;</span>
</span><span class="line"><span class="x">    },</span>
</span><span class="line"><span class="x">    {</span>
</span><span class="line"><span class="x">      &quot;description&quot;: &quot;Toggle Obsidian&quot;,</span>
</span><span class="line"><span class="x">      &quot;extra_descriptions&quot;: [</span>
</span><span class="line"><span class="x">        &quot;Cmd-Ctrl-q to toggle Obsidian.&quot;</span>
</span><span class="line"><span class="x">      ],</span>
</span><span class="line"><span class="x">      &quot;manipulators&quot;: </span><span class="cp">&lt;%=</span><span class="w"> </span><span class="n">toggle_app</span><span class="p">(</span><span class="s2">&quot;md.obsidian&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;q&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;control&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;command&quot;</span><span class="o">]</span><span class="p">)</span><span class="w"> </span><span class="cp">%&gt;</span>
</span><span class="line"><span class="x">    },</span>
</span></code></pre></td></tr></table></div></figure>

<p>こんな感じで書いてあります。</p>

<p>かなり前にForkしたままあとは自分で変更しただけで本家を追ってないので
現状の本家とはスクリプト等も結構違うかもしれませんが参考までに。</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[macOSでトラックポイントでスクロールする]]></title>
    <link href="https://rcmdnk.com/blog/2023/10/26/computer-mac-karabiner/"/>
    <updated>2023-10-26T00:00:00+00:00</updated>
    <id>https://rcmdnk.com/blog/2023/10/26/computer-mac-karabiner</id>
    <content type="html"><![CDATA[<div class="amazon-img">
  <a href="//www.amazon.co.jp/gp/product/B0002DOSQW?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=B0002DOSQW&amp;linkCode=shr&amp;tag=rcmdnk0c-22" rel="nofollow" target="_blank"><img src="https://images-na.ssl-images-amazon.com/images/I/31S9A64DZQL._SS200_.jpg" alt="Lenovo ThinkPlus USBトラベルキーボード ウルトラナビ付 [31P9514]" /></a>
</div>

<p>巷ではHHKB Studioの発表で賑わってますが、まだ手に入れてないので
久々にThinkpadキーボードを使ってみました。</p>

<p>実はmacOSで使ったことがなかったのですが、mac用のドライバは恐らくない？ようで
ミドルクリックしながらのスクロールがそのままだとできなかったのでKarabiner-Elementを使って設定して使ってみました。</p>

<!-- more -->

<ul id="markdown-toc">
  <li><a href="#トラックポイント付き外付けキーボード" id="markdown-toc-トラックポイント付き外付けキーボード">トラックポイント付き外付けキーボード</a></li>
  <li><a href="#macosでミドルクリックしながらマウスムーブでスクロールする" id="markdown-toc-macosでミドルクリックしながらマウスムーブでスクロールする">macOSでミドルクリックしながらマウスムーブでスクロールする</a></li>
  <li><a href="#hhkb-studio" id="markdown-toc-hhkb-studio">HHKB Studio</a></li>
  <li><a href="#他にほしいキーボード" id="markdown-toc-他にほしいキーボード">他にほしいキーボード</a></li>
</ul>
<div class="group"></div>

<div class="center_wrapper">
  <div>
  <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3802317723662375" data-ad-slot="5762198341"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
  </div>
</div>

<h2 id="トラックポイント付き外付けキーボード">トラックポイント付き外付けキーボード</h2>

<p>ThinkpadのノートPCといえばトラックポイント付きのキーボードですが、
外付けキーボードとしても売っています。</p>

<p>随分昔にThinkpadを使っていたことがあってトラックポイントがあまりに便利だったので外付けキーボードも買って使ってました。</p>

<p>持ってるのはウルトラナビ付、というトラックパッドも付いているやつの英語版。</p>

<div class="amazon-box">
  <div class="amazon-img">
  <a href="//www.amazon.co.jp/gp/product/B0002DOSQW?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=B0002DOSQW&amp;linkCode=shr&amp;tag=rcmdnk0c-22" rel="nofollow" target="_blank"><img src="https://images-na.ssl-images-amazon.com/images/I/31S9A64DZQL._SS200_.jpg" alt="Lenovo ThinkPlus USBトラベルキーボード ウルトラナビ付 [31P9514]" /></a>
</div>

  <div class="amazon-title">
    <a href="//www.amazon.co.jp/gp/product/B0002DOSQW?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=B0002DOSQW&amp;linkCode=shr&amp;tag=rcmdnk0c-22" rel="nofollow" target="_blank">Lenovo ThinkPlus USBトラベルキーボード ウルトラナビ付 [31P9514]</a>
  </div>
  <div class="amazon-txt">
    <span class="amazon-link"><a href="//www.amazon.co.jp/gp/product/B0002DOSQW?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=B0002DOSQW&amp;linkCode=shr&amp;tag=rcmdnk0c-22" rel="nofollow" target="_blank">Amazonで見る</a></span>
    <span class="rakuten-link"><a href="//hb.afl.rakuten.co.jp/hgc/111f634c.5fb25e94.111f634d.1a56ae16/?pc=http%3A%2F%2Fsearch.rakuten.co.jp%2Fsearch%2Fmall%2FLenovo+ThinkPlus+USB%E3%83%88%E3%83%A9%E3%83%99%E3%83%AB%E3%82%AD%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89+%E3%82%A6%E3%83%AB%E3%83%88%E3%83%A9%E3%83%8A%E3%83%93%E4%BB%98+%5B31P9514%5D%2F&amp;m=http%3A%2F%2Fsearch.rakuten.co.jp%2Fsearch%2Fmall%2FLenovo+ThinkPlus+USB%E3%83%88%E3%83%A9%E3%83%99%E3%83%AB%E3%82%AD%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89+%E3%82%A6%E3%83%AB%E3%83%88%E3%83%A9%E3%83%8A%E3%83%93%E4%BB%98+%5B31P9514%5D%2F&amp;scid=af_url_txt&amp;link_type=text&amp;ut=eyJwYWdlIjoidXJsIiwidHlwZSI6InRlc3QiLCJjb2wiOjB9" rel="nofollow" target="_blank">楽天市場で見る</a></span>
  </div>
</div>

<p>今売っているものだとトラックパッド部分が省略されてコンパクトになったトラックポイントキーボードIIがあります。</p>

<div class="amazon-box">
  <div class="amazon-img">
  <a href="//www.amazon.co.jp/gp/product/B08BWQXZYL?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=B08BWQXZYL&amp;linkCode=shr&amp;tag=rcmdnk0c-22" rel="nofollow" target="_blank"><img src="https://images-na.ssl-images-amazon.com/images/I/51H1lnr5zqL._SS200_.jpg" alt="4Y40X49493 ［ThinkPad トラックポイント キーボード II - 英語］" /></a>
</div>

  <div class="amazon-title">
    <a href="//www.amazon.co.jp/gp/product/B08BWQXZYL?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=B08BWQXZYL&amp;linkCode=shr&amp;tag=rcmdnk0c-22" rel="nofollow" target="_blank">4Y40X49493 ［ThinkPad トラックポイント キーボード II - 英語］</a>
  </div>
  <div class="amazon-txt">
    <span class="amazon-link"><a href="//www.amazon.co.jp/gp/product/B08BWQXZYL?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=B08BWQXZYL&amp;linkCode=shr&amp;tag=rcmdnk0c-22" rel="nofollow" target="_blank">Amazonで見る</a></span>
    <span class="rakuten-link"><a href="//hb.afl.rakuten.co.jp/hgc/111f634c.5fb25e94.111f634d.1a56ae16/?pc=http%3A%2F%2Fsearch.rakuten.co.jp%2Fsearch%2Fmall%2FThinkPad+%E3%83%88%E3%83%A9%E3%83%83%E3%82%AF%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88+%E3%82%AD%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89+II%2F&amp;m=http%3A%2F%2Fsearch.rakuten.co.jp%2Fsearch%2Fmall%2FThinkPad+%E3%83%88%E3%83%A9%E3%83%83%E3%82%AF%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88+%E3%82%AD%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89+II%2F&amp;scid=af_url_txt&amp;link_type=text&amp;ut=eyJwYWdlIjoidXJsIiwidHlwZSI6InRlc3QiLCJjb2wiOjB9" rel="nofollow" target="_blank">楽天市場で見る</a></span>
  </div>
</div>

<p>これも10年くらい前に発売されたものですが結構使っている人もいるかと思います。</p>

<h2 id="macosでミドルクリックしながらマウスムーブでスクロールする">macOSでミドルクリックしながらマウスムーブでスクロールする</h2>

<p>Windowsで使う際、ドライバをちゃんと入れるとミドルクリックを押しながらトラックポイントを動かすと
マウスカーソルが動くかわりにウィンドウのスクロールを行います。</p>

<p>これが慣れると結構快適。(逆にこれを快適だと思えないと使いづらいとなってしまうかも。)</p>

<p>macOSにつないで動かしてみたところ、マウス操作やクリックなどは期待通り動き、
ミドルクリックもリンクを開くなどの動作になっていましたが、
押しながらトラックポイントを動かしてもマウスカーソルが動くだけ。</p>

<p>ちょっとドライバを探してみましたがLenovoの公式ではWindows用しか見つかりませんでした。</p>

<p>探せば海賊ドライバとかも見つかりそうですが、この部分だけが気になるところなので、
<a href="https://karabiner-elements.pqrs.org/">Karabiner-Elements</a>で設定して使えるようにしてみました。</p>

<p>Karabiner-Elementsには<a href="https://karabiner-elements.pqrs.org/docs/json/complex-modifications-manipulator-definition/other-types/mouse-motion-to-scroll/">mouse_motion_to_scroll</a>
という機能があり、特定の状況下でマウスを動かす動作をスクロール動作に変更することができます。</p>

<p>自分で設定を書いても良いですが、公式設定例集に作者が作ったruleがあるのでそれを使うと簡単です。</p>

<blockquote>
  <p><a href="https://ke-complex-modifications.pqrs.org/#mouse_motion_to_scroll">Karabiner-Elements complex_modifications rules</a></p>
</blockquote>

<p>これをインポートして</p>

<ul>
  <li><strong>Change button3 + mouse motion to scroll wheel (rev 1)</strong></li>
</ul>

<p>を有効にします。</p>

<p>これで動くだろう、と思って試したところ普通にマウスカーソルが動くだけでうまくいかず、
ミドルクリックがbutton3として認識されてないのか？と思いきやEventViewerで見る限りはちゃんと認識されているようでなんでだとしばらく困ってました。</p>

<p>問題はKarabiner-Elementでは新規に認識したキーボードはデフォルトでキー変更を有効にするものの、
マウスやトラックパッドに関しては無効になっている点でした。</p>

<blockquote>
  <p><a href="https://karabiner-elements.pqrs.org/docs/manual/configuration/configure-devices/">Choose devices  Karabiner-Elements</a></p>
</blockquote>

<p>確かにDevicesのところを見てみると</p>

<ul>
  <li><strong>IBM USB Travel Keyboard with UltraNav (Lite-On Tech)</strong></li>
</ul>

<p>というキーボードとは別に、</p>

<ul>
  <li><strong>Composite TouchPad/TrackPoint (Synaptics. inc.)</strong></li>
</ul>

<p>というマウスが認識されていて、キーボードは<code>Modify events</code>がOnでマウスの方はOffでした。</p>

<p>これをOnにするとちゃんとミドルクリックスクロールが動きました。
割りと完璧な動作。</p>

<p>もし多機能マウスとかを使っていて4番目や5番目のボタンが有る場合はそれを押してる間スクロールにしたい、
ということも<strong>Change button 4…</strong>とかを有効にすれば簡単に出来ます。</p>

<p><i class="key">Ctrl</i>や<i class="key">fn</i>を押しながら、という設定もあります。</p>

<p>設定のコードはこれ: <a href="https://github.com/pqrs-org/KE-complex_modifications/blob/76aa3f5088c9fa6990febbd0a10194be320d993b/public/json/mouse_motion_to_scroll.json#L4">mouse_motion_to_scroll.json</a>。</p>

<p><code>from</code>に<code>"pointing_button": "button3"</code>(ミドルクリック相当)などを指定して、
<code>to</code>では<code>set_variable</code>で
<code>enable_mouse_motion_to_scroll</code>という値を1にしています。</p>

<p>これを<code>to_after_key_up</code>でボタンを離した際にはまた0に戻します。</p>

<p>この<code>enable_mouse_motion_to_scroll</code>という名前自体はなんでも良いわけですが、この変数を1にして、
1になってる間<code>mouse_motion_to_scroll</code>が有効になるようにしています。</p>

<p>この例では入れてませんが、慣性モーメントを有効にしたりスクロールスピードを変更することも可能です。</p>

<h2 id="hhkb-studio">HHKB Studio</h2>

<p>久しぶりにトラックポイントを試してみましたが、やはり便利だなと。
ただやはりキーボード感が微妙すぎて常用する気にはなれない感じも。</p>

<p>あと、持っているのが古いウルトラナビ付きのもので無駄に下がでかいのも邪魔なところ。</p>

<p>コンパクトなIIであれば形的にはそれなりに良いのですがキーは同じようなものなので。</p>

<p>ということでもっと良いキーでトラックポイント的なものが付いた物がほしいな、とはずっと思ってました。</p>

<p>実際にそういった物はいくつか出てますが買うには至らず。</p>

<div class="amazon-box">
  <div class="amazon-img">
  <a href="//www.amazon.co.jp/gp/product/B08D5XGCX2?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=B08D5XGCX2&amp;linkCode=shr&amp;tag=rcmdnk0c-22" rel="nofollow" target="_blank"><img src="https://images-na.ssl-images-amazon.com/images/I/71DvhDJzOHL._SS200_.jpg" alt="ARCHISS Quattro TKL" /></a>
</div>

  <div class="amazon-title">
    <a href="//www.amazon.co.jp/gp/product/B08D5XGCX2?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=B08D5XGCX2&amp;linkCode=shr&amp;tag=rcmdnk0c-22" rel="nofollow" target="_blank">ARCHISS Quattro TKL</a>
  </div>
  <div class="amazon-txt">
    <span class="amazon-link"><a href="//www.amazon.co.jp/gp/product/B08D5XGCX2?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=B08D5XGCX2&amp;linkCode=shr&amp;tag=rcmdnk0c-22" rel="nofollow" target="_blank">Amazonで見る</a></span>
    <span class="rakuten-link"><a href="//hb.afl.rakuten.co.jp/hgc/111f634c.5fb25e94.111f634d.1a56ae16/?pc=http%3A%2F%2Fsearch.rakuten.co.jp%2Fsearch%2Fmall%2FARCHISS+Quattro+TKL%2F&amp;m=http%3A%2F%2Fsearch.rakuten.co.jp%2Fsearch%2Fmall%2FARCHISS+Quattro+TKL%2F&amp;scid=af_url_txt&amp;link_type=text&amp;ut=eyJwYWdlIjoidXJsIiwidHlwZSI6InRlc3QiLCJjb2wiOjB9" rel="nofollow" target="_blank">楽天市場で見る</a></span>
  </div>
</div>

<p>この辺とかもかなりいい感じだなとは思ってました。</p>

<ul>
  <li><a href="https://tex.com.tw/products/yoda-ii">Yoda II  TEX Electronics</a></li>
</ul>

<p>そんな中でHHKB Studioが出てきました。</p>

<div class="amazon-box">
  <div class="amazon-img">
  <a href="//www.amazon.co.jp/gp/product/B0CL79KXBG?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=B0CL79KXBG&amp;linkCode=shr&amp;tag=rcmdnk0c-22" rel="nofollow" target="_blank"><img src="https://images-na.ssl-images-amazon.com/images/I/61vJvilj-fL._SS200_.jpg" alt="PFU キーボード HHKB Studio 英語配列 (ポインティングスティック メカニカルキーボード)" /></a>
</div>

  <div class="amazon-title">
    <a href="//www.amazon.co.jp/gp/product/B0CL79KXBG?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=B0CL79KXBG&amp;linkCode=shr&amp;tag=rcmdnk0c-22" rel="nofollow" target="_blank">PFU キーボード HHKB Studio 英語配列 (ポインティングスティック メカニカルキーボード)</a>
  </div>
  <div class="amazon-txt">
    <span class="amazon-link"><a href="//www.amazon.co.jp/gp/product/B0CL79KXBG?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=B0CL79KXBG&amp;linkCode=shr&amp;tag=rcmdnk0c-22" rel="nofollow" target="_blank">Amazonで見る</a></span>
    <span class="rakuten-link"><a href="//hb.afl.rakuten.co.jp/hgc/111f634c.5fb25e94.111f634d.1a56ae16/?pc=http%3A%2F%2Fsearch.rakuten.co.jp%2Fsearch%2Fmall%2FPFU+%E3%82%AD%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89+HHKB+Studio+%E8%8B%B1%E8%AA%9E%E9%85%8D%E5%88%97+%28%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%86%E3%82%A3%E3%83%B3%E3%82%B0%E3%82%B9%E3%83%86%E3%82%A3%E3%83%83%E3%82%AF+%E3%83%A1%E3%82%AB%E3%83%8B%E3%82%AB%E3%83%AB%E3%82%AD%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89%29%2F&amp;m=http%3A%2F%2Fsearch.rakuten.co.jp%2Fsearch%2Fmall%2FPFU+%E3%82%AD%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89+HHKB+Studio+%E8%8B%B1%E8%AA%9E%E9%85%8D%E5%88%97+%28%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%86%E3%82%A3%E3%83%B3%E3%82%B0%E3%82%B9%E3%83%86%E3%82%A3%E3%83%83%E3%82%AF+%E3%83%A1%E3%82%AB%E3%83%8B%E3%82%AB%E3%83%AB%E3%82%AD%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89%29%2F&amp;scid=af_url_txt&amp;link_type=text&amp;ut=eyJwYWdlIjoidXJsIiwidHlwZSI6InRlc3QiLCJjb2wiOjB9" rel="nofollow" target="_blank">楽天市場で見る</a></span>
  </div>
</div>

<p>トラックポイントという名前自体はレノボの商標らしいですが、
特許切れもあったりして今回のHHKBでのポインティングスティックの採用になったとか。</p>

<p>ミドルクリックスクロール問題に関しては、macOS用のドライバもちゃんと出ていて
初期設定で真ん中のボタンを押しながらポインティングスティックを動かすことでスクロールできるようです。</p>

<blockquote>
  <p><a href="https://happyhackingkb.com/manual/studio/ug-us/jp/ug/topic/index.html">Happy Hacking Keyboard Studio（英語配列） ユーザーズガイド</a></p>
</blockquote>

<p>真ん中のボタンは単発で押すとミドルクリックとしての動作をするような初期設定らしいですが、
押し続けた場合にはModifierとしてFn2として動作し、その状態での操作の1つがマウスでのスクロールということらしいです。</p>

<p>また、キーはProfessionalの静電容量無接点方式ではなくメカニカルスイッチ。
Professionalとの区分けという意味合いと、Studioの方はもっと自由にカスタムできるように、ということもあるようです。</p>

<blockquote>
  <p><a href="https://www.itmedia.co.jp/news/articles/2310/25/news167.html">「HHKB Studio」が、静電容量無接点スイッチを採用しなかったワケ　担当者に聞いた（1/3 ページ） - ITmedia NEWS</a></p>
</blockquote>

<p>最初に載っているキーはリニアタイプで、音とかはtype-Sと比べても同じくらいとかいう噂。</p>

<p>これだけだと4万円が妥当かどうか微妙なところですが、他のキーボードにはない大きな違いはジェスチャーパッドという
キーボードの周囲をスクロールしたりすることができるエリアがあるところ。</p>

<p>これに関してはこれまでにないものなので使い勝手とかも含めて未知数ですが、
慣れれば便利なこともありそうだし何にしろ使ってみたい。</p>

<p>手元のHHKBが有線版しかないので、Bluetooth版に買い替える、という言い訳で買うのもありなんじゃないかと思ったり思わなかったり。</p>

<p>いずれにしろ、一旦公式ストアもAmazonとかも全部売り切れになってしまっているのですぐには変えない状態ですが。
(Amazonのページとかはページ自体は存在しますが検索しても出てこないしHHKBストアにも現在はない状態です。)</p>

<h2 id="他にほしいキーボード">他にほしいキーボード</h2>

<p>HHKB以外で、ここしばらく欲しいな、と思っているのがこれ。</p>

<ul>
  <li><a href="https://ultimatehackingkeyboard.com/">Ultimate Hacking Keyboard - The keyboard. For professionals.</a></li>
</ul>

<p>分割キーボードで、かつトラックポイント的なモジュールが追加できるもの。</p>

<p>分割キーボードを使ったことが無いので何かほしいと思ってるのと、
トラックポイントモジュール的なものが他にはあまり似たような物がないので
それだけでもほしいと思ってしまうもの。</p>

<p>これ最初に見つけたときは1つ古いバージョンでまだ注文してからいつ届くかわからない、といった感じのものでしたが、
現行バージョンが出て、最近は<code>New oerders ship in a week</code>らしいので頼めば手に入る。</p>

<p>ですが最初に見てた頃から元の値段は変わってはいないものの円安で日本円にするとモジュール色々買うとすごい値段になるな、
と思って手が出しづらくなってます。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Vim emulation using Karabiner-Elements (on macOS)でメニューバーに状態表示させたり通知でお知らせしたり]]></title>
    <link href="https://rcmdnk.com/blog/2020/07/29/computer-mac-karabiner-vim/"/>
    <updated>2020-07-29T00:00:00+00:00</updated>
    <id>https://rcmdnk.com/blog/2020/07/29/computer-mac-karabiner-vim</id>
    <content type="html"><![CDATA[<p>macOS上のVim以外の部分でVimな動作をKarabiner-Elementsを使って
再現しようとして作ったVim emulationに関して、
これまで今どういう状態にあるか、はパット見わからない状態でした。</p>

<p>そこで、メニューバーに状態を表示したり変更時に通知を出したりできるようにしてみました。</p>

<!-- more -->

<ul id="markdown-toc">
  <li><a href="#vim-emulation-using-karabiner-elements" id="markdown-toc-vim-emulation-using-karabiner-elements">Vim emulation using Karabiner-Elements</a></li>
  <li><a href="#モードインジケーターの実装" id="markdown-toc-モードインジケーターの実装">モードインジケーターの実装</a></li>
  <li><a href="#通知" id="markdown-toc-通知">通知</a></li>
  <li><a href="#メニューバー" id="markdown-toc-メニューバー">メニューバー</a></li>
  <li><a href="#windowsでは" id="markdown-toc-windowsでは">Windowsでは</a></li>
</ul>
<div class="group"></div>

<div class="center_wrapper">
  <div>
  <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3802317723662375" data-ad-slot="5762198341"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
  </div>
</div>

<h2 id="vim-emulation-using-karabiner-elements">Vim emulation using Karabiner-Elements</h2>

<p><a href="https://karabiner-elements.pqrs.org/">Karabiner-Elements</a>
は言わずとしれたmacOS上でキーマップを自在に出来るツールです。</p>

<p>色々な設定も公開されています。</p>

<blockquote>
  <p><a href="https://ke-complex-modifications.pqrs.org/">karabiner-elements-complex_modifications</a></p>
</blockquote>

<p>これとは別に個人的に公開してるのが以下のもの。</p>

<blockquote>
  <p><a href="https://ke-complex-modifications.pqrs.org/">Karabiner-Elements complex_modifications rules by rcmdnk</a></p>
</blockquote>

<div class="github-widget" data-repo="rcmdnk/KE-complex_modifications"></div>

<p>この中にVim emulationがあります。</p>

<p>本家の方にもViモードとかありますが、より色々なことができるようになっています。
(上の方のに入れようかと思ってたんですが、スクリプトをあまりに変更しすぎて統一するのが大変そうだったのでできてない。。。)</p>

<p>Vim emulationを有効にするとではメモ帳などの上で<i class="key">ESC</i>を押すと
<strong>ノーマルモード</strong>に入って
<i class="key">H</i>、<i class="key">J</i>、<i class="key">K</i>、<i class="key">L</i>で左下上右に動ける様になったり
コピーしたり貼り付けたり、ビジュアルモードが使えたりするようになります。</p>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail">
  <a href="https://rcmdnk.com/blog/2017/09/05/computer-mac-karabiner-vim/"><img class="small-thumbnail-img" src="https://rcmdnk.com/images/post/thumbnail/20170905_vimemu_120_90.jpg" width="120" height="90" alt="20170905_vimemu_120_90" /></a>
</div><a class="click_box_link" href="https://rcmdnk.com/blog/2017/09/05/computer-mac-karabiner-vim/">Vim以外でVimする: Mac+Karabiner-Elements編</a></div></li></ul>

<h2 id="モードインジケーターの実装">モードインジケーターの実装</h2>

<blockquote>
  <p><a href="https://github.com/rcmdnk/KE-complex_modifications/issues/6">Visual Indicator of Mode · Issue #6 · rcmdnk/KE-complex_modifications</a></p>
</blockquote>

<p>前から自分でもやりたいな、とは思ってたんですが、
Issueでもらったのでやってみました。</p>

<p>実装したのは</p>

<ul>
  <li><i class="key">⌃</i>-<i class="key">⌘</i>-<i class="key">⇧</i>-<i class="key">V</i>でモード変更時に通知センターを使って通知を出すようにする(もう一回押すと停止する)</li>
  <li><a href="https://github.com/rcmdnk/VEM">rcmdnk/VEM</a>を使ってメニューバーに状態を表示する</li>
</ul>

<p>の二種類です。</p>

<h2 id="通知">通知</h2>

<p>Vim emulationに</p>

<pre><code>Vim emulation: Enable the display notification when the mode is changed: toggle by Ctrl-Cmd-Shift-v
</code></pre>

<p>という項目を加わえたので、これをEnableすると使えるようになります。</p>

<p>ただ、他の項目も中で変更があるので、すでにVim emulationを使ってた人は、一旦設定を外し、一覧表の方からも削除して新しいものを入れ直す必要があります。</p>

<p>有効にして、<i class="key">⌃</i>-<i class="key">⌘</i>-<i class="key">⇧</i>-<i class="key">V</i>
を押すと、</p>

<p><img src="https://rcmdnk.com/images/post/20200730_notification.jpg" alt="20200730_notification.jpg" class="pic" /></p>

<p>こんな感じでモードが変更されるたびに通知が出ます。</p>

<p>実装としては、変更するキーを押した際に</p>

<pre><code>{
  shell_command: "osascript -e 'display notification \"Normal Mode\" with title \"vim_emu\"'"}]
}
</code></pre>

<p>といった感じのシェルコマンドも送るようにして、これによって通知を出しています。</p>

<p>ただ、通知の表示時間はmacOS自体の設定で決まっいて、</p>

<pre><code>$ defaults write com.apple.notificationcenterui bannerTime -int 1 &amp;&amp; killall NotificationCenter
</code></pre>

<p>とかすると1秒にしたり出来ますが、他の通知も同様になってしまいます。</p>

<p>まあ面倒なことをしようとすれば、毎回現在の設定を取ってきて、一時的に変更して、通知出した後に戻す、とか出来なくも無いわけですが。</p>

<p>もう一つ問題があって、これを有効、無効化出来るようにしてるわけですが、
これ実はある値が1の時はこれ、0の時はこれ、という2つの別の設定を入れていて、
設定ファイルが膨大になってしまっています。</p>

<p>なので入れてみたものの、もしかしたらそのうち外すかも。。。</p>

<h2 id="メニューバー">メニューバー</h2>

<p>メニューバーにどうやって表示しようか、と思ったんですが、
やったことは別のアプリを作って、Karabiner-Elementsの状態を監視して表示する、というもの。</p>

<p><img src="https://rcmdnk.com/images/post/20200730_vem.png" alt="20200730_vem.png" class="pic" /></p>

<p><a href="https://github.com/rcmdnk/VEM">rcmdnk/VEM</a>というアプリをrumpsを使って作りました。</p>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail">
  <a href="https://rcmdnk.com/blog/2015/11/16/computer-mac-python/"><img class="small-thumbnail-img" src="https://rcmdnk.com/images/post/thumbnail/20151116_rumps_test_120_90.jpg" width="120" height="90" alt="20151116_rumps_test_120_90" /></a>
</div><a class="click_box_link" href="https://rcmdnk.com/blog/2015/11/16/computer-mac-python/">rumpsを使ってPythonで簡単にMacのメニューバーアプリを作る</a></div></li></ul>

<p>Vim emulationではKarabiner-Elementsの中で変数を覚えておける機能を使ってモードの変更を行っていますが、
それらの値は以下のファイルに記録されています。</p>

<pre><code>/Library/Application Support/org.pqrs/tmp/karabiner_grabber_manipulator_environment.json
</code></pre>

<blockquote>
  <p><a href="https://github.com/pqrs-org/Karabiner-Elements/issues/2278">Request for a –get-variables option for cli · Issue #2278 · pqrs-org/Karabiner-Elements</a></p>
</blockquote>

<p>なので、後はアプリ側でこれを定期的に見に行くようにすれば良いだけ。</p>

<p>rumpsを使えばそういったメニューバーアプリは簡単に作れます。</p>

<p>なのでこれに関してはVim emulationの方は何も変更せず、アプリを入れるだけで使えるようになります。</p>

<p>起動すると、Vim emulationが有効になっていてモードを変えたりしていれば、</p>

<p><img src="https://rcmdnk.com/images/post/20200730_menubarinsert.jpg" alt="20200730_menubarinsert.jpg" class="pic" /></p>

<p>こんな感じで現在のモードがメニューバーに表示されます。</p>

<p>ノーマルモードになれば、</p>

<p><img src="https://rcmdnk.com/images/post/20200730_menubarnormal.jpg" alt="20200730_menubarnormal.jpg" class="pic" /></p>

<p>こんな感じ。</p>

<p>デフォルトは色付きアイコンですが、グレースケールな方が良ければ、
オプションで設定できて、</p>

<p><img src="https://rcmdnk.com/images/post/20200730_menubarinsertgray.jpg" alt="20200730_menubarinsertgray.jpg" class="pic" /></p>

<p>こんな感じで全部がグレースケールなアイコンになります。</p>

<p>rumpsで定期的に実行できる最小単位が1秒なので、変更した後、メニューバーの表示が変わるまでちょっとタイムラグがあります。</p>

<p>ちょっと使ってみた感じでは1秒ごとにチェックしてもシステムに負荷をかけることはないです。</p>

<p>最初はVim emulation側でモード変更時に信号を送って積極的に変更するようなものを考えていたんですが、
rumpsで簡単に作れてしまったのと、Vim emulation側に手を加えなくてもよいということで
まずはこれで。</p>

<p>実際作ってみた感じ、このVEMは思った以上にいい感じに出来たと思ってます。</p>

<p>もう1つ欲しい機能としてはVim emulationが有効でないアプリの上に来たときに
Disabled表示にしたい、というものがあるのですが、</p>

<h2 id="windowsでは">Windowsでは</h2>

<p>Windowsでは
<a href="https://www.autohotkey.com/">AutoHotkey</a>を使って同じようなものを作っています。</p>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail">
  <a href="https://rcmdnk.com/blog/2013/08/03/computer-windows-autohotkey/"><img class="small-thumbnail-img" src="https://rcmdnk.com/images/post/thumbnail/20130723_AutoHotKey_120_90.jpg" width="120" height="90" alt="20130723_AutoHotKey_120_90" /></a>
</div><a class="click_box_link" href="https://rcmdnk.com/blog/2013/08/03/computer-windows-autohotkey/">Vim以外でVimする: Windows+AutoHotkey編</a></div></li></ul>

<div class="github-widget" data-repo="rcmdnk/vim_ahk"></div>

<p>最近一番スターがあるレポジトリになってきました。</p>

<p>こちらでは結構前にタスクトレイアイコンとして状態を表示できるようにしていました。</p>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail">
  <a href="https://rcmdnk.com/blog/2017/11/06/computer-windows-autohotkey/"><img class="small-thumbnail-img" src="https://rcmdnk.com/images/post/thumbnail/20130723_AutoHotKey_120_90.jpg" width="120" height="90" alt="20130723_AutoHotKey_120_90" /></a>
</div><a class="click_box_link" href="https://rcmdnk.com/blog/2017/11/06/computer-windows-autohotkey/">AutoHotkeyでのメニューの追加</a></div></li></ul>

<p>AutoHotkey自体がポップアップメッセージを出したりも出来るので、インジケーター的なものもあります。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[macOS 10.14.6の追加アップデートを適用したところKarabiner-Elementが動かなくなった]]></title>
    <link href="https://rcmdnk.com/blog/2019/09/05/computer-mac-karabiner/"/>
    <updated>2019-09-05T12:00:00+00:00</updated>
    <id>https://rcmdnk.com/blog/2019/09/05/computer-mac-karabiner</id>
    <content type="html"><![CDATA[<p>macOS 10.14.6の追加アップデートが来ていたので入れたところ
Karabinera-Elementが動かなくなってしまいました。</p>

<p>この減少は結構起こってるみたいですが
その対策について。</p>

<!-- more -->

<ul id="markdown-toc">
  <li><a href="#macos-mojave-10146の追加アップデート" id="markdown-toc-macos-mojave-10146の追加アップデート">macOS Mojave 10.14.6の追加アップデート</a></li>
  <li><a href="#アップデート後karabiner-elementが動かなくなった" id="markdown-toc-アップデート後karabiner-elementが動かなくなった">アップデート後Karabiner-Elementが動かなくなった</a></li>
  <li><a href="#修正方法" id="markdown-toc-修正方法">修正方法</a></li>
</ul>
<div class="group"></div>

<div class="center_wrapper">
  <div>
  <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3802317723662375" data-ad-slot="5762198341"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
  </div>
</div>

<h2 id="macos-mojave-10146の追加アップデート">macOS Mojave 10.14.6の追加アップデート</h2>

<p>8/26日に出ていたセキュリティに関する追加アップデートの
通知が出ていたので適用しました。</p>

<blockquote>
  <p><a href="https://support.apple.com/ja-jp/HT201222">Apple セキュリティアップデート - Apple サポート</a></p>
</blockquote>

<h2 id="アップデート後karabiner-elementが動かなくなった">アップデート後Karabiner-Elementが動かなくなった</h2>

<p>Karabiner-Elementのバージョンは12.6.0。</p>

<p>同じような事が起こってる人が結構いるみたいでした。</p>

<blockquote>
  <p><a href="https://blog.kyanny.me/entry/2019/08/07/155340">macOS Mojave 10.14.6 (18G87) にアップデートしたら Karabiner-Elements が効かなくなった - @kyanny’s blog</a></p>
</blockquote>

<p>この人の場合はベータ版にしたら直った、ということなので同様に環境設定の<strong>Misc</strong>から<strong>Check for beta updates</strong>
でベータ版を入れたら確かに治りました。</p>

<p>ただ、10.14.6自体はすでにインストール済で追加のアップデートをしただけです。
また、10.14.6が出た当初はKarabinerは12.5.Xとかだったのそれに対して問題があった、という感じで
12.6系では直ってそうな感じ。</p>

<p>ということでもうちょっと調べてみましたが、どうやら単にKarabinerを再起動するだけでも直ったかも、ということでそれも載せておきます。</p>

<h2 id="修正方法">修正方法</h2>

<p>Karabiner-Elementsを終了させて再び立ち上げるだけです。</p>

<p>ただ、単に終了させるだけだとプロセスが残っていることがあるので
以下のような手順で<code>kill</code>コマンドでプロセスを終了させる必要があります。</p>

<ul>
  <li>環境設定の<strong>Misc</strong>から<strong>Quit Karabiner-Elements</strong>でKarabinerを終了させる</li>
  <li><code>pgrep karabiner | xargs sudo kill -9</code>を実行し完全にプロセスを止める</li>
  <li>Start Karabiner</li>
</ul>

<blockquote>
  <p><a href="https://github.com/tekezo/Karabiner-Elements/issues/1930#issuecomment-517684365">Manual re-install required after OS update · Issue #1930 · tekezo/Karabiner-Elements</a></p>
</blockquote>

<p>おそらくベータ版にしたら直った、というのは単にアップデートのスクリプトの中で
強制的に全てのKarabinerのプロセスを一旦終了させるようになっていたので
擬似的に上記の事柄をやっていたため、という感じです。</p>

<p>同様にMac自体の再起動でもKarabinerの完全な再起動になるので直る可能性が高いです。</p>

<p>今回ベータ版にアップデートする前はとりあえず一回<strong>終了</strong>させて再度立ち上げる、ということまではやりましたが
上手く行きませんでした。
単にMacを再起動させれば動いたかもしれません。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Karabiner-Elementsに長押し操作やマウスキー機能が追加されていた]]></title>
    <link href="https://rcmdnk.com/blog/2018/02/17/computer-karabiner/"/>
    <updated>2018-02-17T00:00:00+00:00</updated>
    <id>https://rcmdnk.com/blog/2018/02/17/computer-karabiner</id>
    <content type="html"><![CDATA[<p>macOS SierraになってからKarabinerに取って代わったKarabiner-Elementsですが
色々と進化していてKarabinerで出来ていた様な事は大体出来るようになっているみたいです。</p>

<p>むしろ色々と出来ることが多くなってる様子。</p>

<!-- more -->

<ul id="markdown-toc">
  <li><a href="#マニュアル" id="markdown-toc-マニュアル">マニュアル</a></li>
  <li><a href="#to_if_held_down" id="markdown-toc-to_if_held_down">to_if_held_down</a></li>
  <li><a href="#mouse_key" id="markdown-toc-mouse_key">mouse_key</a></li>
  <li><a href="#まとめ" id="markdown-toc-まとめ">まとめ</a></li>
</ul>
<div class="group"></div>

<div class="center_wrapper">
  <div>
  <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3802317723662375" data-ad-slot="5762198341"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
  </div>
</div>

<h2 id="マニュアル">マニュアル</h2>

<p>最初使い始めた頃はマニュアル的なものも無かったので
Exampleを見たりソースコードを直接見たりして調べてましたが
現在は結構充実したマニュアルが存在します。</p>

<blockquote>
  <p><a href="https://karabiner-elements.pqrs.org/docs/">Documentation  Karabiner-Elements</a></p>
</blockquote>

<p>どの様なキーが使えるか一通り載っています。</p>

<p>また、いくつか例も載っているので大体のことは
ここを見れば出来る様になると思います。</p>

<h2 id="to_if_held_down">to_if_held_down</h2>

<p>12月30日リリースの11.5.0で入った様ですが、
通常の<code>to</code>の代わりに
<code>to_if_held_down</code>という
キーを使うとキーを一定時間押していた場合に
別のキーを送れる様になります。
<code>to_if_alone</code>の値を指定するとすぐに離した場合はこちらが送られます。</p>

<p>これを使って以下の様な設定をしています。</p>

<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
</pre></td><td class="code"><pre><code class="json"><span class="line"><span></span><span class="w">    </span><span class="p">{</span>
</span><span class="line"><span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;For HHKB ((Shift-)Esc to grave accent (tilde))&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">      </span><span class="nt">&quot;manipulators&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">        </span><span class="p">{</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;basic&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;from&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">            </span><span class="nt">&quot;key_code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;escape&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">            </span><span class="nt">&quot;modifiers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">              </span><span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">                </span><span class="s2">&quot;any&quot;</span>
</span><span class="line"><span class="w">              </span><span class="p">]</span>
</span><span class="line"><span class="w">            </span><span class="p">}</span>
</span><span class="line"><span class="w">          </span><span class="p">},</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">            </span><span class="nt">&quot;basic.to_if_alone_timeout_milliseconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">250</span><span class="p">,</span>
</span><span class="line"><span class="w">            </span><span class="nt">&quot;basic.to_if_held_down_threshold_milliseconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">250</span>
</span><span class="line"><span class="w">          </span><span class="p">},</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;to_if_alone&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">            </span><span class="p">{</span>
</span><span class="line"><span class="w">              </span><span class="nt">&quot;key_code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;grave_accent_and_tilde&quot;</span>
</span><span class="line"><span class="w">            </span><span class="p">}</span>
</span><span class="line"><span class="w">          </span><span class="p">],</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;to_if_held_down&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">            </span><span class="p">{</span>
</span><span class="line"><span class="w">              </span><span class="nt">&quot;key_code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;escape&quot;</span>
</span><span class="line"><span class="w">            </span><span class="p">}</span>
</span><span class="line"><span class="w">          </span><span class="p">],</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;conditions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">            </span><span class="p">{</span>
</span><span class="line"><span class="w">              </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;device_if&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">              </span><span class="nt">&quot;identifiers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">                </span><span class="p">{</span>
</span><span class="line"><span class="w">                  </span><span class="nt">&quot;vendor_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2131</span>
</span><span class="line"><span class="w">                </span><span class="p">}</span>
</span><span class="line"><span class="w">              </span><span class="p">]</span>
</span><span class="line"><span class="w">            </span><span class="p">}</span>
</span><span class="line"><span class="w">          </span><span class="p">]</span>
</span><span class="line"><span class="w">        </span><span class="p">}</span>
</span><span class="line"><span class="w">      </span><span class="p">]</span>
</span><span class="line"><span class="w">    </span><span class="p">},</span>
</span></code></pre></td></tr></table></div></figure>

<p>HHKBでは<i class="key">TAB</i>の上に<i class="key">ESC</i>があります。
通常のキーボードではここに<i class="key">`</i>があるので
ちょっと癖が強いです。</p>

<p>そこで、この設定によりHHKBの場合は<i class="key">ESC</i>を押してすぐ話す場合には
<code>`</code>、長押しした場合には<code>ESC</code>が送られる様にしてあります。</p>

<p>途中にある<code>parameters</code>によって250ms以上押せば<code>ESC</code>が送られる設定になっています。</p>

<p>この設定をしていますが、<code>ESC</code>は<i class="key">⌃</i>-<i class="key">[</i>でも送れる様に
設定してあって通常はこっちを使います(Vim like)。</p>

<h2 id="mouse_key">mouse_key</h2>

<p>mouse_keyというものがもうちょっと前に実装されていて、
これによってマウスカーソルを動かしたり
スクロールをキーに割り当てたりすることが可能になります。</p>

<p>これまで、同じことをAppleScriptを使って動作させ、
これを<code>shell_command</code>で呼ぶようにしていましたが、
これだとキーを押し続けた時にリピートして動いてくれませんでした。</p>

<p>今回、<code>mouse_key</code>を試してみた所押しっぱなしにすると
カーソルが動き続ける様になったので嬉しいところ。</p>

<p>以下の様な感じで<i class="key">⌃</i>-<i class="key">⇧</i>-<i class="key">H</i>/<i class="key">J</i>/<i class="key">K</i>/<i class="key">L</i>
で左下上右にカーソルを動かせる様にしています。</p>

<p>ついでに<i class="key">⌃</i>-<i class="key">⇧</i>-<i class="key">N</i>/<i class="key">M</i>/<i class="key">P</i>で
左クリック/中クリック/右クリックが出来る様になっています。</p>

<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
<span class="line-number">53</span>
<span class="line-number">54</span>
<span class="line-number">55</span>
<span class="line-number">56</span>
<span class="line-number">57</span>
<span class="line-number">58</span>
<span class="line-number">59</span>
<span class="line-number">60</span>
<span class="line-number">61</span>
<span class="line-number">62</span>
<span class="line-number">63</span>
<span class="line-number">64</span>
<span class="line-number">65</span>
<span class="line-number">66</span>
<span class="line-number">67</span>
<span class="line-number">68</span>
<span class="line-number">69</span>
<span class="line-number">70</span>
<span class="line-number">71</span>
<span class="line-number">72</span>
<span class="line-number">73</span>
<span class="line-number">74</span>
<span class="line-number">75</span>
<span class="line-number">76</span>
<span class="line-number">77</span>
<span class="line-number">78</span>
<span class="line-number">79</span>
<span class="line-number">80</span>
<span class="line-number">81</span>
<span class="line-number">82</span>
<span class="line-number">83</span>
<span class="line-number">84</span>
<span class="line-number">85</span>
<span class="line-number">86</span>
<span class="line-number">87</span>
<span class="line-number">88</span>
<span class="line-number">89</span>
<span class="line-number">90</span>
<span class="line-number">91</span>
<span class="line-number">92</span>
<span class="line-number">93</span>
<span class="line-number">94</span>
<span class="line-number">95</span>
<span class="line-number">96</span>
<span class="line-number">97</span>
<span class="line-number">98</span>
<span class="line-number">99</span>
<span class="line-number">100</span>
<span class="line-number">101</span>
<span class="line-number">102</span>
<span class="line-number">103</span>
<span class="line-number">104</span>
<span class="line-number">105</span>
<span class="line-number">106</span>
<span class="line-number">107</span>
<span class="line-number">108</span>
<span class="line-number">109</span>
<span class="line-number">110</span>
<span class="line-number">111</span>
<span class="line-number">112</span>
<span class="line-number">113</span>
<span class="line-number">114</span>
<span class="line-number">115</span>
<span class="line-number">116</span>
<span class="line-number">117</span>
<span class="line-number">118</span>
<span class="line-number">119</span>
<span class="line-number">120</span>
<span class="line-number">121</span>
<span class="line-number">122</span>
<span class="line-number">123</span>
<span class="line-number">124</span>
<span class="line-number">125</span>
<span class="line-number">126</span>
<span class="line-number">127</span>
<span class="line-number">128</span>
<span class="line-number">129</span>
<span class="line-number">130</span>
<span class="line-number">131</span>
<span class="line-number">132</span>
<span class="line-number">133</span>
<span class="line-number">134</span>
<span class="line-number">135</span>
</pre></td><td class="code"><pre><code class="json"><span class="line"><span></span><span class="w">    </span><span class="p">{</span>
</span><span class="line"><span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Mouse cursor move using Karabiner&#39;s functions&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">      </span><span class="nt">&quot;extra_descriptions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">        </span><span class="s2">&quot;Mouse move using Karabiner&#39;s functions&quot;</span>
</span><span class="line"><span class="w">      </span><span class="p">],</span>
</span><span class="line"><span class="w">      </span><span class="nt">&quot;manipulators&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">        </span><span class="p">{</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;basic&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;from&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">            </span><span class="nt">&quot;key_code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;h&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">            </span><span class="nt">&quot;modifiers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">              </span><span class="nt">&quot;mandatory&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">                </span><span class="s2">&quot;control&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">                </span><span class="s2">&quot;shift&quot;</span>
</span><span class="line"><span class="w">              </span><span class="p">]</span>
</span><span class="line"><span class="w">            </span><span class="p">}</span>
</span><span class="line"><span class="w">          </span><span class="p">},</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;to&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">            </span><span class="p">{</span>
</span><span class="line"><span class="w">              </span><span class="nt">&quot;mouse_key&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">                </span><span class="nt">&quot;x&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-1536</span>
</span><span class="line"><span class="w">              </span><span class="p">}</span>
</span><span class="line"><span class="w">            </span><span class="p">}</span>
</span><span class="line"><span class="w">          </span><span class="p">]</span>
</span><span class="line"><span class="w">        </span><span class="p">},</span>
</span><span class="line"><span class="w">        </span><span class="p">{</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;basic&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;from&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">            </span><span class="nt">&quot;key_code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;j&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">            </span><span class="nt">&quot;modifiers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">              </span><span class="nt">&quot;mandatory&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">                </span><span class="s2">&quot;control&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">                </span><span class="s2">&quot;shift&quot;</span>
</span><span class="line"><span class="w">              </span><span class="p">]</span>
</span><span class="line"><span class="w">            </span><span class="p">}</span>
</span><span class="line"><span class="w">          </span><span class="p">},</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;to&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">            </span><span class="p">{</span>
</span><span class="line"><span class="w">              </span><span class="nt">&quot;mouse_key&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">                </span><span class="nt">&quot;y&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1536</span>
</span><span class="line"><span class="w">              </span><span class="p">}</span>
</span><span class="line"><span class="w">            </span><span class="p">}</span>
</span><span class="line"><span class="w">          </span><span class="p">]</span>
</span><span class="line"><span class="w">        </span><span class="p">},</span>
</span><span class="line"><span class="w">        </span><span class="p">{</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;basic&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;from&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">            </span><span class="nt">&quot;key_code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;k&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">            </span><span class="nt">&quot;modifiers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">              </span><span class="nt">&quot;mandatory&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">                </span><span class="s2">&quot;control&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">                </span><span class="s2">&quot;shift&quot;</span>
</span><span class="line"><span class="w">              </span><span class="p">]</span>
</span><span class="line"><span class="w">            </span><span class="p">}</span>
</span><span class="line"><span class="w">          </span><span class="p">},</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;to&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">            </span><span class="p">{</span>
</span><span class="line"><span class="w">              </span><span class="nt">&quot;mouse_key&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">                </span><span class="nt">&quot;y&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-1536</span>
</span><span class="line"><span class="w">              </span><span class="p">}</span>
</span><span class="line"><span class="w">            </span><span class="p">}</span>
</span><span class="line"><span class="w">          </span><span class="p">]</span>
</span><span class="line"><span class="w">        </span><span class="p">},</span>
</span><span class="line"><span class="w">        </span><span class="p">{</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;basic&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;from&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">            </span><span class="nt">&quot;key_code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;l&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">            </span><span class="nt">&quot;modifiers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">              </span><span class="nt">&quot;mandatory&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">                </span><span class="s2">&quot;control&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">                </span><span class="s2">&quot;shift&quot;</span>
</span><span class="line"><span class="w">              </span><span class="p">]</span>
</span><span class="line"><span class="w">            </span><span class="p">}</span>
</span><span class="line"><span class="w">          </span><span class="p">},</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;to&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">            </span><span class="p">{</span>
</span><span class="line"><span class="w">              </span><span class="nt">&quot;mouse_key&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">                </span><span class="nt">&quot;x&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1536</span>
</span><span class="line"><span class="w">              </span><span class="p">}</span>
</span><span class="line"><span class="w">            </span><span class="p">}</span>
</span><span class="line"><span class="w">          </span><span class="p">]</span>
</span><span class="line"><span class="w">        </span><span class="p">},</span>
</span><span class="line"><span class="w">        </span><span class="p">{</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;basic&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;from&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">            </span><span class="nt">&quot;key_code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;n&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">            </span><span class="nt">&quot;modifiers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">              </span><span class="nt">&quot;mandatory&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">                </span><span class="s2">&quot;control&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">                </span><span class="s2">&quot;shift&quot;</span>
</span><span class="line"><span class="w">              </span><span class="p">]</span>
</span><span class="line"><span class="w">            </span><span class="p">}</span>
</span><span class="line"><span class="w">          </span><span class="p">},</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;to&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">            </span><span class="p">{</span>
</span><span class="line"><span class="w">              </span><span class="nt">&quot;pointing_button&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;button1&quot;</span>
</span><span class="line"><span class="w">            </span><span class="p">}</span>
</span><span class="line"><span class="w">          </span><span class="p">]</span>
</span><span class="line"><span class="w">        </span><span class="p">},</span>
</span><span class="line"><span class="w">        </span><span class="p">{</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;basic&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;from&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">            </span><span class="nt">&quot;key_code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;m&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">            </span><span class="nt">&quot;modifiers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">              </span><span class="nt">&quot;mandatory&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">                </span><span class="s2">&quot;control&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">                </span><span class="s2">&quot;shift&quot;</span>
</span><span class="line"><span class="w">              </span><span class="p">]</span>
</span><span class="line"><span class="w">            </span><span class="p">}</span>
</span><span class="line"><span class="w">          </span><span class="p">},</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;to&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">            </span><span class="p">{</span>
</span><span class="line"><span class="w">              </span><span class="nt">&quot;pointing_button&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;button3&quot;</span>
</span><span class="line"><span class="w">            </span><span class="p">}</span>
</span><span class="line"><span class="w">          </span><span class="p">]</span>
</span><span class="line"><span class="w">        </span><span class="p">},</span>
</span><span class="line"><span class="w">        </span><span class="p">{</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;basic&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;from&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">            </span><span class="nt">&quot;key_code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;p&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">            </span><span class="nt">&quot;modifiers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="line"><span class="w">              </span><span class="nt">&quot;mandatory&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">                </span><span class="s2">&quot;control&quot;</span><span class="p">,</span>
</span><span class="line"><span class="w">                </span><span class="s2">&quot;shift&quot;</span>
</span><span class="line"><span class="w">              </span><span class="p">]</span>
</span><span class="line"><span class="w">            </span><span class="p">}</span>
</span><span class="line"><span class="w">          </span><span class="p">},</span>
</span><span class="line"><span class="w">          </span><span class="nt">&quot;to&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="line"><span class="w">            </span><span class="p">{</span>
</span><span class="line"><span class="w">              </span><span class="nt">&quot;pointing_button&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;button2&quot;</span>
</span><span class="line"><span class="w">            </span><span class="p">}</span>
</span><span class="line"><span class="w">          </span><span class="p">]</span>
</span><span class="line"><span class="w">        </span><span class="p">}</span>
</span><span class="line"><span class="w">      </span><span class="p">]</span>
</span><span class="line"><span class="w">    </span><span class="p">},</span>
</span></code></pre></td></tr></table></div></figure>

<h2 id="まとめ">まとめ</h2>

<p>上の設定とかは下のページの<code>Personal Settings</code>から取ってこれます。</p>

<blockquote>
  <p><a href="https://rcmdnk.com/KE-complex_modifications/">Karabiner-Elements complex_modifications rules by rcmdnk</a></p>
</blockquote>

<p>実際には
<a href="https://github.com/pqrs-org/KE-complex_modifications">KE-complex_modifications</a>
をForkしてerb形式で書いて作っています。</p>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail">
  <a href="https://rcmdnk.com/blog/2017/08/30/computer-mac-karabiner/"><img class="small-thumbnail-img" src="https://rcmdnk.com/images/post/thumbnail/20170830_vimode_120_90.jpg" width="120" height="90" alt="20170830_vimode_120_90" /></a>
</div><a class="click_box_link" href="https://rcmdnk.com/blog/2017/08/30/computer-mac-karabiner/">KE-complex_modificationsを使ってKarabiner-Elementsの定義を色々作って公開する</a></div></li></ul>

<p>Karabinerでも作ってたVim emulationも同じページにあります。</p>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail">
  <a href="https://rcmdnk.com/blog/2017/09/05/computer-mac-karabiner-vim/"><img class="small-thumbnail-img" src="https://rcmdnk.com/images/post/thumbnail/20170905_vimemu_120_90.jpg" width="120" height="90" alt="20170905_vimemu_120_90" /></a>
</div><a class="click_box_link" href="https://rcmdnk.com/blog/2017/09/05/computer-mac-karabiner-vim/">Vim以外でVimする: Mac+Karabiner-Elements編</a></div></li></ul>
]]></content>
  </entry>
  
</feed>
