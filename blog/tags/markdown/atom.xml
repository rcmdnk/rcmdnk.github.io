<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: Markdown | rcmdnk's blog]]></title>
  <link href="https://rcmdnk.com/blog/tags/markdown/atom.xml" rel="self"/>
  <link href="https://rcmdnk.com/"/>
  <updated>2020-08-11T00:23:45+00:00</updated>
  <id>https://rcmdnk.com/</id>
  <author>
    <name><![CDATA[rcmdnk]]></name>
    <email><![CDATA[rcmdnk@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[HTML5タグのdetails/summaryを使ってGitHubのREADME/コメントを整理]]></title>
    <link href="https://rcmdnk.com/blog/2017/08/09/computer-github/"/>
    <updated>2017-08-09T00:00:00+00:00</updated>
    <id>https://rcmdnk.com/blog/2017/08/09/computer-github</id>
    <content type="html"><![CDATA[<p>とあるGitHubのレポジトリのREADMEを見ていたら
一部を折りたたんで表示するアコーディオン表示になっていたので
GitHubの仕様かと思ってたんですが、
HTML 5.1で導入された<code>details</code>/<code>summary</code>要素によるものでした。</p>

<p>これを使ってGitHubのREADMEなんかで長くなってしまって重要でない部分を一部折りたたんだり、
Issuesとかでも上手く使うことで見やすくすることが出来ます。</p>

<!-- more -->

<ul id="markdown-toc">
  <li><a href="#detailssummary" id="markdown-toc-detailssummary"><code>details</code>/<code>summary</code></a></li>
  <li><a href="#隠し部分ではmarkdownも使える" id="markdown-toc-隠し部分ではmarkdownも使える">隠し部分ではMarkdownも使える</a></li>
  <li><a href="#まとめ" id="markdown-toc-まとめ">まとめ</a></li>
</ul>
<div class="group"></div>

<div class="center_wrapper">
  <div>
  <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3802317723662375" data-ad-slot="5762198341"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
  </div>
</div>

<h2 id="detailssummary"><code>details</code>/<code>summary</code></h2>

<p>使い方は</p>

<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span></span><span class="p">&lt;</span><span class="nt">details</span><span class="p">&gt;</span>
</span><span class="line">  <span class="p">&lt;</span><span class="nt">summary</span><span class="p">&gt;</span>
</span><span class="line">    見出し部分。ここをクリック。
</span><span class="line">  <span class="p">&lt;/</span><span class="nt">summary</span><span class="p">&gt;</span>
</span><span class="line">  <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span class="line">
</span><span class="line">ここが隠れてる部分。
</span><span class="line">
</span><span class="line">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span class="line"><span class="p">&lt;/</span><span class="nt">details</span><span class="p">&gt;</span>
</span></code></pre></td></tr></table></div></figure>

<p>みたいに書くと</p>

<details>
  <summary>
    見出し部分。ここをクリック。
  </summary>
  <div>

ここが隠れてる部分。

  </div>
</details>

<p><br /><br /></p>

<p>こんな感じになります。
きちんと動作してれば下のGif画像の様にクリックで開いたり閉じたりするはずです。</p>

<p><img src="https://rcmdnk.com/images/post/20170808_detailssummary.gif" alt="detailssummary" class="pic" /></p>

<p>このページでは<code>details</code>や<code>summary</code>に関してJavaScriptは当ててないので
ブラウザが自動的に設定している動作になります。</p>

<p>なのでブラウザ依存するところがあって、
上のGifはMacのGoogle Chromeのものですが、
この仕様はEdge及びIEではまだ実装されていません。</p>

<blockquote>
  <p><a href="http://caniuse.com/#search=details">Can I use… Support tables for HTML5, CSS3, etc</a></p>
</blockquote>

<p>Firefoxも49 (2016年9月20日)からなので
使える様になってのは比較的最近です。</p>

<p>Edgeでまだ使えないため当たり前の様に使えるものではないですが、
GitHubのコメントの様な場所で簡単なタグだけで折りたたみが実装できてしまうのは非常に
便利なので使えるところでは使いたいところです。</p>

<p>また、上の見出し部分ですが、ChromeやFirefoxだと
折りたたまれた上で先頭に三角印が現れていると思います。</p>

<p>これ、最初このブログで使ってみた所なぜかFirefoxだと現れず
Chromeだと現れる状態でした。</p>

<p>これはCSSを全く当ててなければブラウザの機能としてFirefoxでもこの三角印が付くようになっています。</p>

<p>ここで印が消えてるのはCSSファイルが</p>

<pre><code>article, aside, details, figcaption, figure, footer, header, hgroup, main, menu, nav, section, summary {
  display: block; }
</code></pre>

<p>と言う行を含んで居るせいでした。
ここでの<code>summary</code>に関する<code>display: block</code>があるとFirefoxでは三角印が消えてしまうようです。</p>

<p>この行ですが、自分で追加したものではなく、
SASSを<code>compass</code>でコンパイルしてCSSファイルを作っていて、その最初の所で、</p>

<pre><code>@include global-reset;
</code></pre>

<p>としてブラウザのデフォルトスタイルを調整するためのMixinを呼んだ事で最初に追加される項目です。</p>

<p>このファイルは定石的に呼ぶ(と思う)ので
SASSを使えば入っている様なものだと思います。</p>

<p><code>summary</code>要素のデフォルトは<code>display: list-item;</code>で
これにしておけばFirefoxも三角印が出るので、
出したい場合はSASSに</p>

<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="css"><span class="line"><span></span><span class="nt">summary</span> <span class="p">{</span>
</span><span class="line">  <span class="k">display</span><span class="p">:</span> <span class="kc">list-item</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

<p>を<code>global-reset</code>を呼んだ後に追加して上書きしてあげれば三角印を出せます。</p>

<p>これは最初Firefox側のバグかな、と思ったのですが、
どうやら<code>summary</code>要素の本来の動作としては<code>block</code>な時は三角が出ない方が正しいようで、
むしろChrome側のバグ、とのこと。</p>

<blockquote>
  <p><a href="https://developer.mozilla.org/ja/docs/Web/HTML/Element/summary">summary 要素 - HTML  MDN</a></p>
</blockquote>

<blockquote>
  <p><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1283989">1283989 - display:block on &lt;summary&gt; removes the triangle</a></p>
</blockquote>

<blockquote>
  <p><a href="https://html.spec.whatwg.org/multipage/rendering.html#the-details-and-summary-elements">HTML Standard</a></p>
</blockquote>

<p>ちなみにSafariとかでも<code>display</code>な状態で三角印が出るので、
Firefoxだけ(?)が最先端に正しく仕様を追っている状態みたいです。</p>

<p>そもそもなぜ<code>global-reset</code>が<code>summary</code>の<code>display</code>を変更しているか分かりませんが(何らかのブラウザが違う動作する？)
影響するものとしても<code>summary</code>に関することだけなので
このブログでは戻すようなCSSを追加してあります。
加えて、デフォルトのままだと見出し部分にカーソルを持っていっても通常の文章と見分けがつかないので</p>

<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="css"><span class="line"><span></span><span class="nt">summary</span> <span class="p">{</span>
</span><span class="line">  <span class="k">display</span><span class="p">:</span> <span class="kc">list-item</span><span class="p">;</span>
</span><span class="line">  <span class="err">&amp;:hover</span> <span class="err">{</span>
</span><span class="line">    <span class="k">cursor</span><span class="p">:</span> <span class="kc">pointer</span><span class="p">;</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="err">}</span>
</span></code></pre></td></tr></table></div></figure>

<p>な感じのSCSSを追加して見出し上にカーソルを持っていった場合にリンクと同じ様なポインタになる様にしてあります。
CSSで追加するなら</p>

<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="css"><span class="line"><span></span><span class="nt">summary</span> <span class="p">{</span>
</span><span class="line">  <span class="k">display</span><span class="p">:</span> <span class="kc">list-item</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line"><span class="nt">summary</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
</span><span class="line">  <span class="k">cursor</span><span class="p">:</span> <span class="kc">pointer</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

<p>な感じで。</p>

<p>もしちゃんと使うなら、用途にもよりますが開いた時の部分にインデントがある方が
開かれた部分として分かりやすいので、
<code>summary</code>の下に上の例の様に<code>div</code>要素とか置いて、その<code>div</code>にクラスを与えて
そのクラスを<code>margin-left: 10px</code>とか適当に左空け状態にしてあげると見やすいかと。</p>

<p>あと、上にあるGifはChromeのもので、これだと見出し部分をクリックした時に
要素の周りに先が現れます。
Safariでも同様に現れました。
一方Firefoxだと出ません。
これは<code>display</code>要素が<code>block</code>でも<code>list-item</code>でも同様でした。
微妙な謎仕様。</p>

<h2 id="隠し部分ではmarkdownも使える">隠し部分ではMarkdownも使える</h2>

<p>下のGistでは畳込んだ中でも色々とMarkdownのマークアップが使える様子を試しています。</p>

<blockquote>
  <p><a href="https://gist.github.com/rcmdnk/68127ef00e0bde652ad4e714ac327923">details_summary_test.md</a></p>
</blockquote>

<p>ただし、<code>&lt;div&gt;</code>の直下に行を空けずに書くとその行のMarkdownは無視されるので注意です。
1行空いた後からMarkdownが反映される様になります。</p>

<p>また、一番下の所で分かるように、
<code>details</code>は入れ子が可能で多段アコーディオン表示も
これを使うと非常に簡単に作る事が出来ます。</p>

<p><code>details</code>内のマークアップに関してはパーサーに依存するところが結構あって、
GitHubだと上のGistでやってることは見出し部分の太文字化以外全て上手くいってますが、
このブログで使ってるKramdownで今の設定だと
コード部分以外は変換されずにそのまま出力される様な形になっていました。</p>

<h2 id="まとめ">まとめ</h2>

<p><code>details</code>/<code>summary</code>要素に関してはMarkdownもGitHubも直接関係ないことですが、
差し当たりすぐに使えそうなところというとGitHubでのREADMEや
コメントでの使用だと思います。</p>

<p>通常のサイトやブログとかだとまだEdge/IEが対応してないので
それらで見る人が居ることを前提で常に開かれててもおかしくないようにしておく必要があります。</p>

<p>まあ、もちろんGitHubとかもEdgeとかで見る人も居るわけですが。</p>

<p>Edgeで使える様になればもっと一般的に使える様になると思うので早く対応して欲しい所です。</p>

<p>あと、やはりMarkdownで書いてる時にHTMLのタグを手で打ちたくは無いので、
GitHubの拡張とかでこの辺簡単に書ける様になると良いのですが、
その辺もEdgeとかが対応したら出来るかも。</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[vim-markdownのアップデート 2017/07]]></title>
    <link href="https://rcmdnk.com/blog/2017/07/01/computer-vim-markdown/"/>
    <updated>2017-07-01T00:00:00+00:00</updated>
    <id>https://rcmdnk.com/blog/2017/07/01/computer-vim-markdown</id>
    <content type="html"><![CDATA[<div class="amazon-img">
  <a href="//www.amazon.co.jp/gp/product/B01EGSCK5Y?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=B01EGSCK5Y&amp;linkCode=shr&amp;tag=rcmdnk0c-22" rel="nofollow" target="_blank"><img src="https://images-na.ssl-images-amazon.com/images/I/41KtKKjmmgL._SS200_.jpg" alt="Amazon | Markdown 101: A hands-on guide (English Edition) [Kindle edition] by Hans-Martin Ramsl | Languages &amp; Tools | Kindleストア" /></a>
</div>

<p>このブログはMarkdownで書いたものを変換して作っていますが、
Vimで書くのでVimでvim-markdownというプラグインを使って書いています。
VimのMarkdownドキュメントのシンタックスなどを決めるプラグインですが
本家の<a href="https://github.com/plasticboy/vim-markdown">plasticboy/vim-markdown</a>
だとやりにくいことがあるので
Forkしたもの:<a href="https://github.com/rcmdnk/vim-markdown">rcmdnk/vim-markdown</a>
を使っています。</p>

<p>いくつかアップデートや本家を追ったりしたものがあるので
覚書を兼ねて
その辺のまとめなど。</p>

<!-- more -->

<ul id="markdown-toc">
  <li><a href="#本家側のアップデート" id="markdown-toc-本家側のアップデート">本家側のアップデート</a></li>
  <li><a href="#本家との違い" id="markdown-toc-本家との違い">本家との違い</a>    <ul>
      <li><a href="#folding" id="markdown-toc-folding">Folding</a></li>
      <li><a href="#text-emphasis-on-multi-lines" id="markdown-toc-text-emphasis-on-multi-lines">Text emphasis on multi-lines</a></li>
      <li><a href="#コードのシンタックスハイライト" id="markdown-toc-コードのシンタックスハイライト">コードのシンタックスハイライト</a></li>
      <li><a href="#その他シンタックスハイライト" id="markdown-toc-その他シンタックスハイライト">その他シンタックスハイライト</a></li>
      <li><a href="#ftdetect" id="markdown-toc-ftdetect">ftdetect</a></li>
      <li><a href="#インデント" id="markdown-toc-インデント">インデント</a></li>
    </ul>
  </li>
  <li><a href="#vim-markdown-関連記事" id="markdown-toc-vim-markdown-関連記事">vim-markdown 関連記事</a></li>
</ul>
<div class="group"></div>

<div class="center_wrapper">
  <div>
  <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3802317723662375" data-ad-slot="5762198341"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
  </div>
</div>

<h2 id="本家側のアップデート">本家側のアップデート</h2>

<p>久しぶりに見るとかなりアップデートされていて、シンタックスハイライトは
以前自分用にFork版に入れていた事と同じ事が出来る様になっていることもいくつかありました。</p>

<p>それとは別に必要な設定も加えられてたりしました。</p>

<p>また、<code>gx</code>とURLの上で打つとそれをブラウザで開く、といった機能がVimにはありますが、
<code>[example](https://example.com)</code>みたいなMarkdownのリンクの書き方をすると
<code>[example]</code>の部分で<code>gx</code>を打っても<code>https://exmaple.com</code>を開いてくれる様になる
マッピングなどが加えられています。</p>

<p><strong>Commands</strong>もいくつか加えられていてセクションのレベルを上げたり下げたりしたり、
セクションからTable of Contentを作って別窓にナビゲーション窓を作ってくれる<code>Toc</code>というコマンドなどがあります。</p>

<p>この辺詳しくはREADMEやヘルプ参照。</p>

<p>シンタックスハイライトの部分で大分本家と同じ様な感じでOKになってきましたが、
まだ変えたい部分が結構残ってるので引き続きForkして使っていきたいと思います。
(好みによる所も多いのでPull Requestして直してもらう、というのはちょっと違うかなというのがあるので。)</p>

<h2 id="本家との違い">本家との違い</h2>

<p>本家:</p>
<div class="github-widget" data-repo="plasticboy/vim-markdown"></div>

<p>rcmdnk版:</p>
<div class="github-widget" data-repo="rcmdnk/vim-markdown"></div>

<h3 id="folding">Folding</h3>

<p>よりシンプルに高速に。</p>

<p>本家では<strong>python-mode</strong>という別の方法に出来たり
しますがrcmdnk版ではその様な設定もありません。</p>

<p>根本的にやり方が別物になっていますが、
出来ることは大体同じで、加えてLiquid(Jekyll)のタグなどにも対応しています。</p>

<p>本家の方では行の内容を見て解析していますが
こちらでは付けたシンタックスハイライトの内容を主に見ていて
その分シンプルなコードに出来、有効にしても大分高速になっています。</p>

<h3 id="text-emphasis-on-multi-lines">Text emphasis on multi-lines</h3>

<p><code>**太字**</code>みたいにして<strong>太字</strong>にしたりする場合、</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="vim"><span class="line"><span></span><span class="k">let</span> <span class="k">g</span>:vim_markdown_emphasis_multiline <span class="p">=</span> <span class="m">1</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>の値が1だと複数行でも続けて強調、0だと同じ行内に閉じる<code>**</code>がなければ
強調しない、という設定が出来ます。</p>

<p>本家では初期値が1なんですが、これだと文中に<code>_</code>とか<code>*</code>とかある場合に
次にそれが出てくるまで延々と強調を続けます。</p>

<p>これが結構面倒で複数行に渡って強調する必要があることはあまりないし、
したければ一行にまとめるか、
複数行ならその行毎に強調を当てれば出来るので初期値を0にしてあります。</p>

<p>まあ設定で出来ることなのでどちらでも良いのですが自分用に。</p>

<p>後一部Mathの設定で、この設定の有無にかかわらず<code>$</code>~<code>$</code>が複数行でもハイライトするようになってましたが、
これも上と同じ理由かつ結構頻繁に単独で出てくるのでmultiline設定の有無に関わらず<code>oneline</code>設定にしてあります。</p>

<h3 id="コードのシンタックスハイライト">コードのシンタックスハイライト</h3>

<p>Markdownでは</p>

<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="md"><span class="line"><span></span>&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
</span><span class="line">&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;vim&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;g&lt;/span&gt;:vim_markdown_emphasis_multiline &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
</span><span class="line">&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;&lt;/notextile&gt;&lt;/div&gt;
</span></code></pre></td></tr></table></div></figure>

<p>みたいに三点バックチックで囲ったりしてコードの表示を表します。</p>

<p>この際に拡張Markdownだと上の様に直後に言語名を書いたりして言語指定し、
その指定を見てエディタ上でシンタックスハイライトをつけたり出来る様にしています。</p>

<p>rcmdnk版ではこれを
<a href="https://github.com/joker1007/vim-markdown-quote-syntax">vim-markdown-quote-syntax</a>
というプラグインを使って行っています(別途インストールが必要)。</p>

<div class="postscript">
  <p><strong>追記: 2017/07/01 </strong></p>

  <p>言語設定の所でファイルの拡張子での指定などが上手く行かない部分があったので
Pull Requestを出してあります。</p>

  <p>とりあえずFixされるまではFork版を使えばきちんと
言語指定が出来ます。</p>

  <ul>
    <li><a href="https://github.com/rcmdnk/vim-markdown-quote-syntax">rcmdnk/vim-markdown-quote-syntax</a></li>
  </ul>

  <p>このバグは以前色々拡張するために出したPull Requestが入れた
バグなので申し訳ない。。。</p>

  <p><strong>追記ここまで</strong></p>
</div>

<p>vim-markdownの中で三点バックチック以外にも
<code>~</code>によるコードブロックやOctopressの<code>codeblock</code>にも対応しています。</p>

<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
</pre></td><td class="code"><pre><code class=""><span class="line">{% codeblock  lang:vim %}
</span><span class="line">let g:vim_markdown_emphasis_multiline = 1
</span><span class="line">{% endcodeblock %}
</span><span class="line">
</span><span class="line">{% codeblock a.vim %}
</span><span class="line">let g:vim_markdown_emphasis_multiline = 1
</span><span class="line">{% endcodeblock %}
</span><span class="line">
</span><span class="line">{% highlight vim %}
</span><span class="line">let g:vim_markdown_emphasis_multiline = 1
</span><span class="line">{% endhighlight %}
</span><span class="line">
</span><span class="line">&lt;div class='bogus-wrapper'&gt;&lt;notextile&gt;&lt;div class='bogus-wrapper'&gt;&lt;notextile&gt;&lt;figure class='code'&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class="highlight"&gt;&lt;table&gt;&lt;tr&gt;&lt;td class="gutter"&gt;&lt;pre class="line-numbers"&gt;&lt;span class='line-number'&gt;1&lt;/span&gt;
</span><span class="line">&lt;/pre&gt;&lt;/td&gt;&lt;td class='code'&gt;&lt;pre&gt;&lt;code class='vim'&gt;&lt;span class='line'&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;let&lt;/span&gt; &lt;span class="k"&gt;g&lt;/span&gt;:vim_markdown_emphasis_multiline &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;
</span><span class="line">&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;&lt;/notextile&gt;&lt;/div&gt;
</span><span class="line">
</span><span class="line">~~~ a.vim
</span><span class="line">let g:vim_markdown_emphasis_multiline = 1
</span><span class="line">~~~</span></code></pre></td></tr></table></div></figure>

<p>こんな感じでちょっとそれぞれ言語の指定が違いますが、</p>

<ul>
  <li>codeblock: <code>lang:&lt;言語&gt;</code>があればそれを使用。直接与えられる引数はファイル名になり、<code>lang:</code>がない場合ファイル名の指定があればその拡張子を使用。</li>
  <li>highlight: 渡せる引数は言語なのでそれを使用。</li>
  <li>三点バックチック: 直後に言語を渡す(スペースなし)仕様なのでそれを使用。</li>
  <li>三点~: 直後にファイル名を渡す(スペースあってもなくても良し)仕様なのでその拡張子を使用。</li>
</ul>

<p>これ以外にも<code>g:markdown_quote_syntax_codeblocks</code>を<strong>.vimrc</strong>で変更することで
他のコードブロックを追加することも出来ます。</p>

<p>最初から使える言語はこちらにある<code>g:markdown_quote_syntax_defaults</code>のもの:</p>

<blockquote>
  <p><a href="https://github.com/joker1007/vim-markdown-quote-syntax/blob/master/plugin/markdown_quote_syntax.vim">vim-markdown-quote-syntax/markdown_quote_syntax.vim at master · joker1007/vim-markdown-quote-syntax</a></p>
</blockquote>

<p>言語を追加する場合は</p>

<figure class="code"><figcaption><span>.vimrc </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class="vim"><span class="line"><span></span><span class="k">let</span> <span class="k">g</span>:markdown_quote_syntax_filetypes <span class="p">=</span> {
</span><span class="line">      \ <span class="s1">&#39;css&#39;</span> : {
</span><span class="line">      \   <span class="s1">&#39;start&#39;</span> : <span class="s1">&#39;css&#39;</span><span class="p">,</span>
</span><span class="line">      \}<span class="p">,</span>
</span><span class="line">      \ <span class="s1">&#39;scss&#39;</span> : {
</span><span class="line">      \   <span class="s1">&#39;start&#39;</span> : <span class="s1">&#39;scss&#39;</span><span class="p">,</span>
</span><span class="line">      \}<span class="p">,</span>
</span><span class="line">      \ <span class="s1">&#39;markdown&#39;</span> : {
</span><span class="line">      \   <span class="s1">&#39;start&#39;</span> : <span class="s1">&#39;\%(markdown\|md\)&#39;</span><span class="p">,</span>
</span><span class="line">      \}<span class="p">,</span>
</span><span class="line">\}
</span></code></pre></td></tr></table></div></figure>

<p>こんな感じで<code>markdown</code>等の各言語のシンタックスハイライトを使うための
拡張子の設定を<code>start</code>という値で設定します。</p>

<p>複数の拡張子を設定したい場合には上の<code>markdown</code>のケースの様な感じで。
(文字列を処理するため、シングルクォートで囲って書く場合は上の様に通常通りなバックスラッシュ1つで。
デフォルト設定の<a href="https://github.com/joker1007/vim-markdown-quote-syntax/blob/master/plugin/markdown_quote_syntax.vim">markdown_quote_syntax.vim</a>ではダブルクォートで囲ってバックスラッシュ2つ使う書き方になっています。)</p>

<h3 id="その他シンタックスハイライト">その他シンタックスハイライト</h3>

<p>その他にも特にシンタックスハイライトのところで変更しています。</p>

<p>1つはLiquidタグを入れている所。</p>

<p>他は細かいところですが括弧周辺のシンタックスや
<code>**太字**</code>みたいな時に<code>*</code>もハイライトするかどうか、
等好みの問題かもしれないところも含めて変更してあります。</p>

<p>違いは以下参照。</p>

<ul>
  <li><a href="https://rcmdnk.com/vim-markdown/syntax-test.html">本家</a></li>
  <li><a href="https://rcmdnk.com/vim-markdown/syntax-test.plasticboy.html">rcmdnk版</a></li>
</ul>

<h3 id="ftdetect">ftdetect</h3>

<p>md.tmp, md.oldも。</p>

<h3 id="インデント">インデント</h3>

<p>本家ではリスト表示の行を書いて次の行に行こうとすると1つインデントされた形で
リスト行が始まります。</p>

<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="md"><span class="line"><span></span><span class="k">*</span> aaa
</span><span class="line">    <span class="k">*</span> &lt;cursor&gt;
</span></code></pre></td></tr></table></div></figure>

<p>ですがリストを書いてる時、同じインデントレベルに移りたいことの方が圧倒的に
多いので同じインデントレベルで始まるように。</p>

<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="md"><span class="line"><span></span><span class="k">*</span> aaa
</span><span class="line"><span class="k">*</span> &lt;cursor&gt;
</span></code></pre></td></tr></table></div></figure>

<p>この部分も余計な処理が減るので少しは軽くなってます。</p>

<h2 id="vim-markdown-関連記事">vim-markdown 関連記事</h2>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail">
  <a href="https://rcmdnk.com/blog/2013/11/17/computer-vim/"><img class="small-thumbnail-img" src="https://rcmdnk.com/images/post/thumbnail/20131117_vim-markdown_120_90.jpg" width="120" height="90" alt="20131117_vim-markdown_120_90" /></a>
</div><a class="click_box_link" href="https://rcmdnk.com/blog/2013/11/17/computer-vim/">VimでのMarkdown環境を整える</a></div></li></ul>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail">
  <a href="https://rcmdnk.com/blog/2014/10/30/computer-vim-markdown/"><img class="small-thumbnail-img" src="https://rcmdnk.com/images/post/thumbnail/20141030_markdown_120_90.jpg" width="120" height="90" alt="20141030_markdown_120_90" /></a>
</div><a class="click_box_link" href="https://rcmdnk.com/blog/2014/10/30/computer-vim-markdown/">VimでMarkdownの環境を整える その2</a></div></li></ul>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail"><div class="amazon-img">
  <a href="//www.amazon.co.jp/gp/product/B00RJ6KC60?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=B00RJ6KC60&amp;linkCode=shr&amp;tag=rcmdnk0c-22" rel="nofollow" target="_blank"><img src="https://images-na.ssl-images-amazon.com/images/I/41a6FKEpGAL._SS90_CR0,0,120,90_.jpg" alt="Markdown Guide: Markdown for absolute beginners (English Edition)" /></a>
</div></div><a class="click_box_link" href="https://rcmdnk.com/blog/2015/11/26/computer-vim-markdown/">vim-markdownのアップデート</a></div></li></ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[vim-markdownのアップデート]]></title>
    <link href="https://rcmdnk.com/blog/2015/11/26/computer-vim-markdown/"/>
    <updated>2015-11-26T00:00:00+00:00</updated>
    <id>https://rcmdnk.com/blog/2015/11/26/computer-vim-markdown</id>
    <content type="html"><![CDATA[<div class="amazon-img">
  <a href="//www.amazon.co.jp/gp/product/B00RJ6KC60?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=B00RJ6KC60&amp;linkCode=shr&amp;tag=rcmdnk0c-22" rel="nofollow" target="_blank"><img src="https://images-na.ssl-images-amazon.com/images/I/41a6FKEpGAL._SS200_.jpg" alt="Markdown Guide: Markdown for absolute beginners (English Edition)" /></a>
</div>

<p>本家(<a href="https://github.com/plasticboy/vim-markdown">plasticboy/vim-markdown</a>)
の方で色々アップデートがあったのでその辺取り込んでおきました。</p>

<!-- more -->

<ul id="markdown-toc">
  <li><a href="#本家のアップデート" id="markdown-toc-本家のアップデート">本家のアップデート</a></li>
  <li><a href="#本家との差" id="markdown-toc-本家との差">本家との差</a></li>
  <li><a href="#まとめ" id="markdown-toc-まとめ">まとめ</a></li>
</ul>
<div class="group"></div>

<div class="center_wrapper">
  <div>
  <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3802317723662375" data-ad-slot="5762198341"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
  </div>
</div>

<h2 id="本家のアップデート">本家のアップデート</h2>

<p>一番大きなアップデートは9月のアップデートで
これまでfiletypeを<code>mkd</code>としていたものが
<code>markdown</code>となったことです。</p>

<p>rcmdnkバージョンでは既に<code>markdown</code>に変更してありましたが、
plasticboy版でも結局<code>markdown</code>にする様にしたみたいです。</p>

<p>それから設定項目として
<code>g:vim_markdown_initial_foldlevel</code>
という値が無くなりました。</p>

<p>この値はファイルを開いた時にどれだけ畳み込みを開くか、と言う値で、
0なら全て閉じる、1なら1段階だけ、2なら2段階だけ開く、と言ったパラメーター。</p>

<p>ただ、現在ではVim自体に<code>foldlevel</code>という値があってこれで同じことが出来ます。</p>

<p>これまでも自分の<strong>.vimrc</strong>の中では</p>

<figure class="code"><figcaption><span>.vimrc </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="vim"><span class="line"><span></span><span class="k">set</span> <span class="nb">foldlevel</span><span class="p">=</span><span class="m">100</span> <span class="c">&quot;open at first</span>
</span><span class="line">...
</span><span class="line"><span class="k">let</span> <span class="k">g</span>:vim_markdown_initial_foldlevel<span class="p">=</span>&amp;<span class="nb">foldlevel</span>
</span></code></pre></td></tr></table></div></figure>

<p>みたいな感じで単に<code>foldlevel</code>をコピーしていました。</p>

<p>値が無くなったのでこの値は<strong>.vimrc</strong>からも削除しておきました。</p>

<h2 id="本家との差">本家との差</h2>

<p>これまで一番大きな違いはfiletypeだったと思いますが、
それは同じになりました。</p>

<p>後はSyntaxを大分いい感じにしてあるつもりです。
特に、スペルチェックやHTMLタグのハイライトが本家では
大体の場所で無効になってるので
その辺りの変更があります。</p>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail">
  <a href="https://rcmdnk.com/blog/2013/11/17/computer-vim/"><img class="small-thumbnail-img" src="https://rcmdnk.com/images/post/thumbnail/20131117_vim-markdown_120_90.jpg" width="120" height="90" alt="20131117_vim-markdown_120_90" /></a>
</div><a class="click_box_link" href="https://rcmdnk.com/blog/2013/11/17/computer-vim/">VimでのMarkdown環境を整える</a></div></li></ul>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail">
  <a href="https://rcmdnk.com/blog/2014/10/30/computer-vim-markdown/"><img class="small-thumbnail-img" src="https://rcmdnk.com/images/post/thumbnail/20141030_markdown_120_90.jpg" width="120" height="90" alt="20141030_markdown_120_90" /></a>
</div><a class="click_box_link" href="https://rcmdnk.com/blog/2014/10/30/computer-vim-markdown/">VimでMarkdownの環境を整える その2</a></div></li></ul>

<p>また、Octopress様にLiquidタグのものなどが入っているので、
OctopressやJeykillでブログとかを書く時には便利だと思います。
この辺り、本家の方に入れるのはあれかな、ということもあってpull requestは見送っています。</p>

<p>ついでにOctopress様のスニペットも作りました。</p>

<div class="github-widget" data-repo="rcmdnk/vim-octopress-snippets"></div>

<p>その他、畳込みに関しての拡張については下記を参照。</p>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail"><div class="amazon-img">
  <a href="//www.amazon.co.jp/gp/product/B00L3SX2BM?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=B00L3SX2BM&amp;linkCode=shr&amp;tag=rcmdnk0c-22" rel="nofollow" target="_blank"><img src="https://images-na.ssl-images-amazon.com/images/I/61KMkNLjLEL._SS90_CR0,0,120,90_.jpg" alt="【@WONDER】洋服たたみボード　クイックプレス　楽に洗濯物が片付く　折りたたみ　洋服を素早くきれいにたためます。" /></a>
</div></div><a class="click_box_link" href="https://rcmdnk.com/blog/2014/11/18/computer-vim/">VimのFoldingを設定してみる</a></div></li></ul>

<p>また、インデントに関してもちょっと変更してあって、
<i class="key">Enter</i>で次の行に行く時等の挙動を
いい感じになるようにしてあります。</p>

<blockquote>
  <p><a href="https://github.com/rcmdnk/vim-markdown/pull/3">Fixed indent alfter list by hori-ryota · Pull Request #3 · rcmdnk/vim-markdown</a></p>
</blockquote>

<p>まあ、この辺は好みもあると思いますが。</p>

<p>この辺りの違いはREADMEにまとめてあります。</p>

<div class="github-widget" data-repo="rcmdnk/vim-markdown"></div>

<h2 id="まとめ">まとめ</h2>

<p>plasticboy版もfiletype:<code>markdown</code>を使うようになったので、
ファイル名が同じ<code>markdown.vim</code>等になって比較しやすくなりました。</p>

<p>それもあって適当な部分をPull Request出してみようかな、とも思ったんですが、
やはり好みの問題もあるかな、と言う感じの所が多いので今のところは自分好みのものとして持っておこうと思います。</p>

<p>何か改善点等があれば是非Pull RequestなりコメントなりTwitterなりで送っていただければ、と。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[vim-markdownのデフォルトブランチの変更]]></title>
    <link href="https://rcmdnk.com/blog/2015/10/19/computer-vim-markdown/"/>
    <updated>2015-10-19T00:00:00+00:00</updated>
    <id>https://rcmdnk.com/blog/2015/10/19/computer-vim-markdown</id>
    <content type="html"><![CDATA[<p><a href="https://github.com/rcmdnk/vim-markdown">vim-markdown</a>
というプラグインについて、これまで
デフォルトブランチを<code>master</code>以外のものとして使っていましたが、
<a href="https://github.com/Shougo/neobundle.vim">neobundle.vim</a>
で管理する上で問題が出るのでブランチ名を変更しました。</p>

<!-- more -->

<ul id="markdown-toc">
  <li><a href="#rcmdnkvim-markdown" id="markdown-toc-rcmdnkvim-markdown">rcmdnk/vim-markdown</a></li>
  <li><a href="#neobundleの仕様" id="markdown-toc-neobundleの仕様">NeoBundleの仕様</a></li>
  <li><a href="#gitのローカルリモートブランチの変更" id="markdown-toc-gitのローカルリモートブランチの変更">Gitのローカル、リモートブランチの変更</a></li>
  <li><a href="#プラグインのアップデート" id="markdown-toc-プラグインのアップデート">プラグインのアップデート</a></li>
</ul>
<div class="group"></div>

<div class="center_wrapper">
  <div>
  <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3802317723662375" data-ad-slot="5762198341"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
  </div>
</div>

<h2 id="rcmdnkvim-markdown">rcmdnk/vim-markdown</h2>

<div class="github-widget" data-repo="rcmdnk/vim-markdown"></div>

<p><a href="https://github.com/rcmdnk/vim-markdown">rcmdnk/vim-markdown</a>
は
Markdown形式のファイルを読み込む時にシンタックスハイライトを
してくれるVimのプラグインで、
<a href="https://github.com/plasticboy/vim-markdown">plasticboy/vim-markdown</a>
のフォーク版です。</p>

<p>いくつか改善を行ってますが、
Octopress用等、かなり自分用の変更もあったり、
元の設定の物が不具合なのか意図してるのか分からない部分もあるので、
取り敢えずPull Requestとかせずにフォークして使っています。</p>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail">
  <a href="https://rcmdnk.com/blog/2013/11/17/computer-vim/"><img class="small-thumbnail-img" src="https://rcmdnk.com/images/post/thumbnail/20131117_vim-markdown_120_90.jpg" width="120" height="90" alt="20131117_vim-markdown_120_90" /></a>
</div><a class="click_box_link" href="https://rcmdnk.com/blog/2013/11/17/computer-vim/">VimでのMarkdown環境を整える</a></div></li></ul>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail">
  <a href="https://rcmdnk.com/blog/2014/10/30/computer-vim-markdown/"><img class="small-thumbnail-img" src="https://rcmdnk.com/images/post/thumbnail/20141030_markdown_120_90.jpg" width="120" height="90" alt="20141030_markdown_120_90" /></a>
</div><a class="click_box_link" href="https://rcmdnk.com/blog/2014/10/30/computer-vim-markdown/">VimでMarkdownの環境を整える その2</a></div></li></ul>

<p>フォーク版なので、オリジナルの物を<code>master</code>ブランチに置いておいて
改変したものを<code>mod</code>と言うブランチにおいて、
GitHub上ではそちらをDefault branchにしていました。</p>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail"><div class="amazon-img">
  <a href="//www.amazon.co.jp/gp/product/1449368018?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=1449368018&amp;linkCode=shr&amp;tag=rcmdnk0c-22" rel="nofollow" target="_blank"><img src="https://images-na.ssl-images-amazon.com/images/I/51qlgNhTpYL._SS90_CR0,0,120,90_.jpg" alt="Github" /></a>
</div></div><a class="click_box_link" href="https://rcmdnk.com/blog/2014/06/09/compouter-git/">GitHubでForkしたリポジトリで元のリポジトリの変化を追う</a></div></li></ul>

<p>Default branchに指定しておくことでCloneした時のHeadが
これを指す様になります。</p>

<p>なので直接Cloneして<strong>.vim</strong>以下等に設置して使う場合には特に問題ないのですが、
<a href="https://github.com/Shougo/neobundle.vim">Shougo/neobundle.vim</a>
を使ってプラグイン管理をしている場合に問題が出るようになったので
ブランチを変更する必要が出ました。</p>

<h2 id="neobundleの仕様">NeoBundleの仕様</h2>

<p>実は丁度一年ほど前にもNeoBundleが<code>master</code>ブランチを必ず使うように変更があって、
その時ちょっとブログに書いたら作者の人が
これを回避するように設定を変更してくれました。</p>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail"><div class="amazon-img">
  <a href="//www.amazon.co.jp/gp/product/4774166340?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=4774166340&amp;linkCode=shr&amp;tag=rcmdnk0c-22" rel="nofollow" target="_blank"><img src="https://images-na.ssl-images-amazon.com/images/I/51KIzY7qfkL._SS90_CR0,0,120,90_.jpg" alt="Vim script テクニックバイブル ~Vim使いの魔法の杖" /></a>
</div></div><a class="click_box_link" href="https://rcmdnk.com/blog/2014/10/27/computer-vim-markdown/">VimでNeoBundleのアップデートに伴いプラグインのデフォルトブランチをmasterに変更</a></div></li></ul>

<p>なのですが、やはりこれだと問題が起こるらしく、
再び、ブランチを指定しない場合には<code>master</code>ブランチを使うように変更されました。</p>

<blockquote>
  <p><a href="https://github.com/Shougo/neobundle.vim/issues/413">How do you update to new locked revisions? · Issue #413 · Shougo/neobundle.vim</a></p>
</blockquote>

<p>ということで、
<a href="https://github.com/rcmdnk/vim-markdown">rcmdnk/vim-markdown</a>
と
<a href="https://github.com/Shougo/neobundle.vim">Shougo/neobundle.vim</a>
を使ってる人は</p>

<pre><code>"a.md" [New File]
Error detected while processing function &lt;SNR&gt;96_enable_quote_syntax:
line    7:
E119: Not enough arguments for function: markdown_quote_syntax#enable_quote_highlight
E119: Not enough arguments for function: markdown_quote_syntax#enable_quote_highlight
...
</code></pre>

<p>みたいなエラーが出る様になったと思います。</p>

<p>これは
<a href="https://github.com/rcmdnk/vim-markdown">rcmdnk/vim-markdown</a>
の<code>master</code>ブランチが実は元のplasticboyにちょっと変更を既にしてあって(単にちゃんと管理してなかっただけ)、
さらに別のプラグインに依存しているようになってるのが問題なのですが、
逆に、plasticboyのオリジナルそのものなら変更に気づきづらかったと思うので
怪我の功名だったかな、と。。。</p>

<h2 id="gitのローカルリモートブランチの変更">Gitのローカル、リモートブランチの変更</h2>

<p>実際に行った作業ですが、
レポジトリをcloneしてローカルで名前を変更し、
リモートのブランチにpush forceする形で送ります。</p>

<pre><code>$ git clone vim-markdown
</code></pre>

<p><a href="https://rcmdnk.com/blog/2014/08/21/computer-git-github/">hub</a>を使ってるので
自分のレポジトリはレポジトリ名だけでOK。</p>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail"><div class="amazon-img">
  <a href="//www.amazon.co.jp/gp/product/B00AQMSHWU?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=B00AQMSHWU&amp;linkCode=shr&amp;tag=rcmdnk0c-22" rel="nofollow" target="_blank"><img src="https://images-na.ssl-images-amazon.com/images/I/518mKZKXzgL._SS90_CR0,0,120,90_.jpg" alt="The Wrapper" /></a>
</div></div><a class="click_box_link" href="https://rcmdnk.com/blog/2014/08/21/computer-git-github/">hub: git clone時等に'git@github.com:'等を補完してくれるラッパー</a></div></li></ul>

<p>ブランチの状況は</p>

<pre><code>$ cd vim-markdown
$ git br -a
* mod
  remotes/origin/HEAD -&gt; origin/mod
  remotes/origin/master
  remotes/origin/mod
$
</code></pre>

<p>な感じ。</p>

<p>ここで、<code>master</code>を<code>plasticboy</code>に、<code>mod</code>を<code>master</code>に変更。</p>

<pre><code>$ git co master
$ git br -m plasticboy
$ git push origin plasticboy
$ git co mod
$ git br -m master
$ git push origin master -f
</code></pre>

<p><code>co</code>や<code>br</code>は<code>clone</code>、<code>branch</code>のalias。</p>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail"><div class="amazon-img">
  <a href="//www.amazon.co.jp/gp/product/B00FOSOUKE?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=B00FOSOUKE&amp;linkCode=shr&amp;tag=rcmdnk0c-22" rel="nofollow" target="_blank"><img src="https://images-na.ssl-images-amazon.com/images/I/41lqan5MweL._SS90_CR0,0,120,90_.jpg" alt="Nendoroid Ghost Shell GitS Tachikoma PVC Figure GSC フィギュア 人形 おもちゃ (並行輸入)" /></a>
</div></div><a class="click_box_link" href="https://rcmdnk.com/blog/2013/12/20/computer-git/">Gitのエイリアスで引数を使う</a></div></li></ul>

<p><code>master</code>に関する<code>push</code>は、既にリモートにも<code>master</code>ブランチが存在するので、
それを上書きするために<code>-f</code>で行います。</p>

<p><code>mod</code>レポジトリはもう必要ないので削除。</p>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail"><div class="amazon-img">
  <a href="//www.amazon.co.jp/gp/product/4798035009?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=4798035009&amp;linkCode=shr&amp;tag=rcmdnk0c-22" rel="nofollow" target="_blank"><img src="https://images-na.ssl-images-amazon.com/images/I/413R9ldNSXL._SS90_CR0,0,120,90_.jpg" alt="アリスとボブのGit入門レッスン" /></a>
</div></div><a class="click_box_link" href="https://rcmdnk.com/blog/2013/10/31/computer-git/">gitのブランチについてのまとめ</a></div></li></ul>

<p>次に、GitHubへ行ってこのレポジトリのDefault branchを変更。</p>

<p><code>hub</code>を使ってれば
ローカルのレポジトリ内で</p>

<pre><code>$ git browse
</code></pre>

<p>でページを呼び出せます。</p>

<p>レポジトリのページの<strong>Settings</strong>から<strong>Branches</strong>に行くと
<strong>Default branch</strong>の設定があるので
<code>master</code>に変更して<code>Update</code>します。</p>

<p><img src="https://rcmdnk.com/images/post/20151019_defaultbranch.jpg" alt="defaultbranch" class="pic" /></p>

<p><a href="https://github.com/rcmdnk/vim-markdown">https://github.com/rcmdnk/vim-markdown</a>
等、リポジトリページに行って、最初ブランチの所が<strong>Branch: master</strong>
になってればOK。</p>

<h2 id="プラグインのアップデート">プラグインのアップデート</h2>

<p>NeoBundleで管理している場合には、
Vimを立ち上げて</p>

<pre><code>: NeoBundleReinstall vim-markdown
</code></pre>

<p>を実行してください。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[日本語Markdownからスライド資料を作る]]></title>
    <link href="https://rcmdnk.com/blog/2015/04/23/computer-markdown/"/>
    <updated>2015-04-23T12:00:00+00:00</updated>
    <id>https://rcmdnk.com/blog/2015/04/23/computer-markdown</id>
    <content type="html"><![CDATA[<div class="amazon-img">
  <a href="//www.amazon.co.jp/gp/product/4861009448?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=4861009448&amp;linkCode=shr&amp;tag=rcmdnk0c-22" rel="nofollow" target="_blank"><img src="https://images-na.ssl-images-amazon.com/images/I/51BLIoZmwaL._SS200_.jpg" alt="slide:ology[スライドロジ―]―プレゼンテーション、ビジュアルの革新" /></a>
</div>

<p><a href="https://rcmdnk.com/blog/2014/02/19/computer-markdown/">Markdownからスライド資料を作る</a>
でMarkdownからPandocを使ってスライドを作る、ということを書きましたが、
日本語資料を使おうとするとそのままでは出来ないので、
日本語を使う際に必要な部分についての追記。</p>

<!-- more -->

<ul id="markdown-toc">
  <li><a href="#日本語資料をそのままpandocに渡す" id="markdown-toc-日本語資料をそのままpandocに渡す">日本語資料をそのままpandocに渡す</a></li>
  <li><a href="#lualatex" id="markdown-toc-lualatex">LuaLaTex</a></li>
</ul>
<div class="group"></div>

<div class="center_wrapper">
  <div>
  <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3802317723662375" data-ad-slot="5762198341"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
  </div>
</div>

<h2 id="日本語資料をそのままpandocに渡す">日本語資料をそのままpandocに渡す</h2>

<figure class="code"><figcaption><span>memo_jp.md </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span></span>% たいとる
</span><span class="line">% 名前
</span><span class="line">% 2015年4月23日
</span><span class="line">
</span><span class="line">## さいしょんぺーじ
</span><span class="line">
</span><span class="line">- 箇条書き
</span><span class="line">- 箇条書き
</span><span class="line">    - 箇条書き(4スペース)
</span><span class="line">
</span><span class="line">ブログはこちら: [rcmdnk&#39;s blog](http://rcmdnk.github.io/)
</span><span class="line">
</span><span class="line">## つぎのぺーじ
</span><span class="line">
</span><span class="line">### サブタイトル
</span><span class="line">
</span><span class="line">2ページ目
</span><span class="line">
</span><span class="line">![ロゴ](http://rcmdnk.github.io/images/MacApp/MacLogo.jpg)
</span></code></pre></td></tr></table></div></figure>

<p>こんなMarkdownファイルを作ったとします。</p>

<p>これを普通にPandocに渡すと</p>

<pre><code>$ pandoc -t beamer -V theme:Singapore -o slides_jp.pdf memo_jp.md
! Package inputenc Error: Unicode char \u8:た not set up for use with LaTeX.

See the inputenc package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...

l.66 \frame{\titlepage}

Try running pandoc with --latex-engine=xelatex.
pandoc: Error producing PDF from TeX source
$
</code></pre>

<p>こんな感じのエラーが出ます。最初の<code>たいとる</code>の<code>た</code>が
読めなくてエラーが出ています。</p>

<p>これはLaTexが日本語を処理できていないので、
処理をするためにLaTexの拡張版であるLuaLaTexを使います。</p>

<h2 id="lualatex">LuaLaTex</h2>

<blockquote>
  <p><a href="http://exoterisch.hatenablog.com/entry/2014/09/02/200558">LuaLaTeX をとにかく使えるようにする - Eksoterikoi bLogoi</a></p>
</blockquote>

<p>LuaLaTexはMacでMacTexとか入れると<code>/usr/texbin/lualatex</code>として
<code>latex</code>や<code>platex</code>と一緒に入っています。</p>

<p><code>pandoc</code>でLaTexエンジンを切り替えるためには</p>

<pre><code>$ pandoc -t beamer -V theme:Singapore -o slides_jp.pdf memo_jp.md --latex-engine=lualatex
</code></pre>

<p>の様に<code>--latex-engine</code>オプションを使います。</p>

<p>これで取り敢えずはPDF作成出来ますが、このままだと文字化けしています。</p>

<p>ここで、<code>beamer</code>クラスを使わないのであれば</p>

<pre><code>pandoc -o slides_jp.pdf memo_jp.md --latex-engine=lualatex -V documentclass=ltjarticle
</code></pre>

<p>な感じで<code>documentclass</code>に<code>ltjarticle</code>を加えてあげると日本語PDFが出来ます。</p>

<p>ただ、これだとスライドにならないのでスライドを作るには
スライドのスタイルに</p>

<pre><code>\usepackage{luatexja}
</code></pre>

<p>を加えます。</p>

<p><a href="https://rcmdnk.com/blog/2014/02/19/computer-markdown/">Markdownからスライド資料を作る</a>
で使ったSingaporeスタイルなんかだと、
最後の方に</p>

<figure class="code"><figcaption><span>beamerthemeSingapore.sty</span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="latex"><span class="line"><span></span> <span class="k">\addtoheadtemplate</span><span class="nb">{</span><span class="k">\pgfuseshading</span><span class="nb">{</span>beamer@headfade<span class="nb">}</span><span class="k">\vskip</span>-1.25cm<span class="nb">}{}</span>
</span><span class="line">
</span><span class="line"> <span class="k">\beamertemplatedotitem</span>
</span><span class="line">
</span><span class="line"> <span class="k">\hypersetup</span><span class="nb">{</span>colorlinks=true, linkcolor=blue, urlcolor=blue<span class="nb">}</span>
</span><span class="line">+<span class="k">\usepackage</span><span class="nb">{</span>luatexja<span class="nb">}</span>
</span><span class="line">
</span><span class="line"> <span class="k">\mode</span>
</span><span class="line"> &lt;all&gt;
</span></code></pre></td></tr></table></div></figure>

<p>こんな感じで加えます。(<code>hypersetup</code>の部分は前の時に加えた物。)</p>

<p>スタイルを探すときは<code>kpsewhich</code>コマンドが便利です。</p>

<pre><code>$ kpsewhich beamerthemeSingapore.sty
/usr/local/texlive/2014/texmf-dist/tex/latex/beamer/themes/theme/beamerthemeSingapore.sty
</code></pre>

<p>これで、</p>

<pre><code>$ pandoc -t beamer -V theme:Singapore -o slides_jp.pdf memo_jp.md --latex-engine=lualatex
</code></pre>

<p>とするとちゃんと日本語が反映されたスライドが作成できます。</p>

<p><a href="https://rcmdnk.com/others/slides/slides_jp.pdf"><img src="https://rcmdnk.com/images/post/20150423_slidesjp.jpg" alt="slides_jp" /></a></p>

]]></content>
  </entry>
  
</feed>
