<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: Octopress | rcmdnk's blog]]></title>
  <link href="http://rcmdnk.github.io/blog/tags/octopress/atom.xml" rel="self"/>
  <link href="http://rcmdnk.github.io/"/>
  <updated>2013-09-16T01:31:56+02:00</updated>
  <id>http://rcmdnk.github.io/</id>
  <author>
    <name><![CDATA[rcmdnk]]></name>
    <email><![CDATA[rdmdnk@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[ブログに置く便利なウィジェット]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/08/31/blog-octopress/"/>
    <updated>2013-08-31T23:47:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/08/31/blog-octopress</id>
    <content type="html"><![CDATA[<p>Octopress上で追加したWidgetについてのまとめ。</p>

<!-- more -->


<p><br class="clearBoth">

<h1>Contents</h1>
{:TOC}

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3802317723662375";
/* imgRectMid */
google_ad_slot = "9043394444";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>




</p>

<h1 id="はてブ人気エントリー">はてブ人気エントリー</h1>

<p><img src="/images/post/20130831_hatebu.jpg" "" ""></p>

<p>はてブの人気エントリーのウィジェットは
はてなの<a href="http://b.hatena.ne.jp/guide/blogparts.select?type=widget">ブログパーツの設定</a>
から作ることが出来ます(はてなアカウントが必要)。</p>

<p>自分のURLを入れるとコードを作ってくれるのでそれを貼り付けるだけで出来ます。
Octopressでは
これを<code>source/_includes/custom/asides/hatebu.html</code>としてコードを保存して
おきます。(<code>section</code>タグを追加)</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>source/_includes/custom/asides/hatebu.html </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;section&gt;</span>
</span><span class='line'>  <span class="nt">&lt;script </span><span class="na">language=</span><span class="s">&quot;javascript&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;http://b.hatena.ne.jp/js/widget.js&quot;</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>  <span class="nt">&lt;script </span><span class="na">language=</span><span class="s">&quot;javascript&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nx">Hatena</span><span class="p">.</span><span class="nx">BookmarkWidget</span><span class="p">.</span><span class="nx">url</span>   <span class="o">=</span> <span class="s2">&quot;http://rcmdnk.github.io/&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">Hatena</span><span class="p">.</span><span class="nx">BookmarkWidget</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="s2">&quot;人気エントリー&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">Hatena</span><span class="p">.</span><span class="nx">BookmarkWidget</span><span class="p">.</span><span class="nx">sort</span>  <span class="o">=</span> <span class="s2">&quot;count&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">Hatena</span><span class="p">.</span><span class="nx">BookmarkWidget</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="mi">250</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">Hatena</span><span class="p">.</span><span class="nx">BookmarkWidget</span><span class="p">.</span><span class="nx">num</span>   <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">Hatena</span><span class="p">.</span><span class="nx">BookmarkWidget</span><span class="p">.</span><span class="nx">theme</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">Hatena</span><span class="p">.</span><span class="nx">BookmarkWidget</span><span class="p">.</span><span class="nx">load</span><span class="p">();</span>
</span><span class='line'>  <span class="nt">&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;/section&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>こんな感じ。作成ページでもオプションを選べますが、
必要に応じてコードの値を変更することも出来ます。
Octopressのサイドバーに合うように<code>width</code>は<code>250</code>にしました。
<code>sort</code>の値が<code>count</code>だと全ページからはてブの多い順、
<code>hot</code>にすると新着エントリーになります。
載せる数や名前なども後から調整できます。</p>

<p>これで<code>_config.yml</code>の<code>default_asides</code>へ<code>custom/asides/hatebu.html</code>
を加えることでサイドバーへ表示することが出来ます。
(まだ少ないものばかりで敢えて載せるのは微妙。。。)</p>

<h1 id="Twitterタイムライン">Twitterタイムライン</h1>

<p><img src="/images/post/20130831_twitter.jpg" "" ""></p>

<p>Twitterの<a href="https://twitter.com/settings/widgets">ウィジェット</a>(Twitterのアカウントが必要)から好きなウィジェットを作れます<sup id='fnref:1'><a href='#fn:1' rel='footnote'>1</a></sup>。</p>

<p>今、サイドバーでは<code>検索</code>でアカウント名(<code>rcmdnk</code>)を検索したものを使っています(エゴサーチ。。。)。</p>

<p>ウィジェットを作成すると、そのウィジェットはTwitter内でID管理される様で、
出来上がったウィジェットのコードを直接書き換えて変更できることは
限られているようです。
(カスタマイズをすべて出来なくする設定もあります。)</p>

<p>上のページから作ったコードを下の様に
<code>source_includes/custom/asides/twitter_search.html</code>へ保存。
(<code>section</code>と<code>h1</code>も追加)</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>source/_includes/custom/asides/twitter_search.html </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;section&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h1&gt;</span>Tweets about rcmdnk <span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>  <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;twitter-timeline&quot;</span> <span class="na">data-chrome=</span><span class="s">&quot;transparent&quot;</span> <span class="na">width=</span><span class="s">&quot;280&quot;</span> <span class="na">height=</span><span class="s">&quot;400&quot;</span>  <span class="na">href=</span><span class="s">&quot;https://twitter.com/search?q=rcmdnk&quot;</span>  <span class="na">data-widget-id=</span><span class="s">&quot;373008330047770624&quot;</span><span class="nt">&gt;</span>Tweet about rcmdnk<span class="nt">&lt;/a&gt;&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;script&gt;</span><span class="o">!</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">s</span><span class="p">,</span><span class="nx">id</span><span class="p">){</span><span class="kd">var</span> <span class="nx">js</span><span class="p">,</span><span class="nx">fjs</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="nx">s</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span><span class="nx">p</span><span class="o">=</span><span class="sr">/^http:/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">location</span><span class="p">)</span><span class="o">?</span><span class="s1">&#39;http&#39;</span><span class="o">:</span><span class="s1">&#39;https&#39;</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">d</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">id</span><span class="p">)){</span><span class="nx">js</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span><span class="nx">js</span><span class="p">.</span><span class="nx">id</span><span class="o">=</span><span class="nx">id</span><span class="p">;</span><span class="nx">js</span><span class="p">.</span><span class="nx">src</span><span class="o">=</span><span class="nx">p</span><span class="o">+</span><span class="s2">&quot;://platform.twitter.com/widgets.js&quot;</span><span class="p">;</span><span class="nx">fjs</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">js</span><span class="p">,</span><span class="nx">fjs</span><span class="p">);}}(</span><span class="nb">document</span><span class="p">,</span><span class="s2">&quot;script&quot;</span><span class="p">,</span><span class="s2">&quot;twitter-wjs&quot;</span><span class="p">);</span><span class="nt">&lt;/script&gt;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;&lt;/section&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><code>data-chrome</code>を追加することで見た目を変えられます。</p>

<ul>
<li>noheader: ヘッダー無し</li>
<li>nofooter: フッター及びツイートボックス無し</li>
<li>nobarders: 境界線無し</li>
<li>noscrollbar: スクロールバー無し</li>
<li>transparent: 背景を透過</li>
</ul>


<p>のオプションがあります。
また、<code>width</code>、<code>height</code>で大きさを変えることも出来ます。</p>

<p>その他検索ワードなどを変更したい場合はTwitterのウィジェット管理のページから
ウィジェットの設定を変更する必要があります。</p>

<p>できたら、
<code>_config.yml</code>の<code>default_asides</code>へ<code>custom/asides/twitter_search.html</code>
を加えればOK。</p>

<h1 id="Zenback">Zenback</h1>

<p><img src="/images/post/20130831_zenback.jpg" "" ""></p>

<p><a href="http://zenback.jp/">Zenback</a>は色々な形式のフィードバックを
表示してくれるウィジェットを提供してくれます。</p>

<p>上のページからアカウントを作り、自分のブログ用のコードを作ります。
表示できるのは</p>

<ul>
<li>ソーシャルボタンセット</li>
<li>関連する記事</li>
<li>関連するみんなの記事・キーワード (必須)</li>
<li>おしらせ欄 (必須)</li>
<li>Twitterでの反応</li>
<li>はてなブックマークでの反応</li>
<li>Facebook コメント</li>
</ul>


<p>このページでは必須のものと、Twitter/はてブ/Facebookについて使っています。</p>

<p>設定を行いコードを取得したらコードを
<code>source_includes/custom/zenback.html</code>として保存。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>source/_includes/custom/zenback.html </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- X:S ZenBackWidget --&gt;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span><span class="nb">document</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">unescape</span><span class="p">(</span><span class="s2">&quot;%3Cscript&quot;</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot; src=&#39;http://widget.zenback.jp/?base_uri=http%3A//rcmdnk.github.io/&amp;nsid=112714283011311473%3A%3A112714293211884381&amp;rand=&quot;</span><span class="o">+</span><span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">((</span><span class="k">new</span> <span class="nb">Date</span><span class="p">()</span><span class="o">*</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">())</span><span class="o">+</span><span class="s2">&quot;&#39; type=&#39;text/javascript&#39;&quot;</span><span class="o">+</span><span class="nx">unescape</span><span class="p">(</span><span class="s2">&quot;%3E%3C/script%3E&quot;</span><span class="p">));</span><span class="nt">&lt;/script&gt;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- X:E ZenBackWidget --&gt;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>さらに<code>source/_layouts/post.html</code>へ</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>source/_layouts/post.html </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>...
</span><span class='line'><span class="nt">&lt;/article&gt;</span>
</span><span class='line'>{% if site.zenback_show == true and page.comments == true %}
</span><span class='line'><span class="nt">&lt;section&gt;</span>
</span><span class='line'>  {% include custom/zenback.html %}
</span><span class='line'><span class="nt">&lt;/section&gt;</span>
</span><span class='line'>{% endif %}
</span><span class='line'>{% if site.disqus_short_name and page.comments == true %}
</span><span class='line'>...
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>の様にDisqusの上に設置。
Disqus同様、<code>article</code>タグの外側に<code>section</code>タグの中に入れて
設定すると綺麗に納まります。
<code>page</code>にも必要な場合、<code>source/_layouts/page.html</code>へも<code>&lt;/article&gt;</code>の下へ設置します。</p>

<p>さらに有効化するために<code>_config.yml</code>へ</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>_config.yml </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="l-Scalar-Plain">&lt;h1 id=&quot;Zenback&quot;&gt;Zenback&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="l-Scalar-Plain">&lt;p&gt;zenback_show</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
を加えておきます。<code>page.comments</code>については、デフォルト状態だと
<code>rake new_post</code>で記事を作った場合にymlブロックに</p>

<pre><code>comments: true
</code></pre>

<p>があるはずです。ページ単位で向こうにしたいときはこれを<code>false</code>へ。</p>

<p>これだけで上の設定についてはOKですが、もし関連ページも表示させたいときは
その精度を上げるためにいくつかタグを追加します。</p>

<p><div><script src='https://gist.github.com/6401330.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>

<p>この様に、記事のタイトル前後に<code>zenback_title_begin/end</code>タグ、
記事部分に<code>zenback_body_begin/end</code>タグを入れるとより正確に関連記事と
そのタイトルを表示してくれる様になります<sup id='fnref:2'><a href='#fn:2' rel='footnote'>2</a></sup>。</p>

<p><code>page</code>の方では、直接<code>source/_layouts/page.html</code>の<code>page.title</code>の行の前後と、
<code>content</code>行の前後に上の<code>article.html</code>にあるように
<code>zenback</code>タグ達を入れておきます。</p>

<h1 id="LinkWithin">LinkWithin</h1>

<p><img src="/images/post/20130831_linkwithin.jpg" "" ""></p>

<p><a href="http://www.linkwithin.com/">LinkWitin</a>はブログ内の関連ページを
画像つきでリストするウィジェットを提供してくれます。
Zenbackにも同じ機能があるのですが、
Zenbackの場合は反映されるまでに暫く時間がかかるのと、
ページの画像が上手く取れなかったので<sup id='fnref:3'><a href='#fn:3' rel='footnote'>3</a></sup>、LinkWithinを試してみました。
今のところ、画像もきちんととてくれるし、即座に反映されています。</p>

<p>上のページから自分のページについてのウィジェットを作成
(<code>Platform</code>は<code>Other</code>で)。
得られたコードを<code>source/_include/custom/after_footer.html</code>に追加。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>source/_include/custom/after_footer.html  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>{% if site.linkwithin_show == true %}<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;script&gt;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">linkwithin_site_id</span> <span class="o">=</span> <span class="mi">1795279</span><span class="p">;</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://www.linkwithin.com/widget.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://www.linkwithin.com/&quot;</span><span class="nt">&gt;&lt;img</span> <span class="na">src=</span><span class="s">&quot;http://www.linkwithin.com/pixel.png&quot;</span> <span class="na">alt=</span><span class="s">&quot;Related Posts Plugin for WordPress, Blogger...&quot;</span> <span class="na">style=</span><span class="s">&quot;border: 0&quot;</span> <span class="nt">/&gt;&lt;/a&gt;&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;script&gt;</span><span class="nx">linkwithin_text</span><span class="o">=</span><span class="s1">&#39;You might also like...&#39;</span><span class="nt">&lt;/script&gt;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;</span>{% endif %}
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>最後の<code>linkwithin_text</code>はLinkWithinのタイトルを変更するための値です。</p>

<p>Zenback同様<code>linkwithin_show</code>で<code>_config.yml</code>から表示/非表示を変更出来るようにします。</p>

<p>表示するために、<code>_config.yml</code>
<div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>_config.yml </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="l-Scalar-Plain">&lt;h1 id=&quot;LinkWithin&quot;&gt;LinkWithin&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="l-Scalar-Plain">&lt;p&gt;linkwithin_show</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>を追加</p>

<p>この状態でもページの適当な部分に表示してくれるみたいですが、</p>

<pre><code>&lt;div class="linkwithin_div"&gt;&lt;/div&gt;
</code></pre>

<p>を置くと、この位置に表示場所を指定することが出来ます。</p>

<p>これを<code>source/_include/custom/linkwitin.html</code>というファイルを作って記入。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>source/_include/custom/linkwitin.html  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;linkwithin_div&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>さらに<code>source/_layout/post.html</code>へ</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>source/_layouts/post.html </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>...
</span><span class='line'><span class="nt">&lt;/article&gt;</span>
</span><span class='line'>{% if site.linkwithin_show == true %}
</span><span class='line'><span class="nt">&lt;section&gt;</span>
</span><span class='line'>  {% include linkwithin.html %}
</span><span class='line'><span class="nt">&lt;/section&gt;</span>
</span><span class='line'>{% endif %}
</span><span class='line'>{% if site.zenback_show == true and page.comments == true %}
</span><span class='line'><span class="nt">&lt;section&gt;</span>
</span><span class='line'>  {% include custom/zenback.html %}
</span><span class='line'><span class="nt">&lt;/section&gt;</span>
</span><span class='line'>{% endif %}
</span><span class='line'>{% if site.disqus_short_name and page.comments == true %}
</span><span class='line'>...
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>の様にZenbackの上に設置。</p>

<p>また、初期状態のままだと5つとか表示していると、
ブラウザの表示幅が狭くなった時、サイドバーに被ってしまいます。
これを回避するために、次の様な<code>sass/custom/_linkwithin.scss</code>を追加。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>sass/custom/_linkwithin.scss  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="nc">.linkwithin_inner</span> <span class="p">{</span><span class="na">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="na">&lt;pre&gt;&lt;code&gt;width</span><span class="o">:</span> <span class="mi">100</span><span class="kt">%</span> <span class="nv">!important</span><span class="p">;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="nt">code</span><span class="o">&gt;&lt;/</span><span class="nt">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nt">p</span><span class="o">&gt;</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><code>sass/custom/_styles.scss</code>でインクルード</p>

<pre><code>@import "_linkwithin.scss";
</code></pre>

<p>で狭い時は2段組になってくれます。</p>

<hr />

<p><div class="footnotes">
	<ol>
		<li id='fn:1'><p><a href="https://dev.twitter.com/ja/docs/embedded-timelines">埋め込みタイムライン</a>
  <a href='#fnref:1' rev='footnote'>↩</a></p>
</li><li id='fn:2'><p><code>&lt;/div&gt;&lt;footer&gt;</code>の部分は、この直後に<code>_post.html</code>の中で<code>&lt;footer&gt;</code>があるのですが、
  このつながりをみてOctopressが記事部分を抜き出すフィルターをかけてる
  部分があるので、間に<code>zenback_body_end</code>が入るとこのフィルターが上手く行かず、
  結果的にdescription等に影響が出ます。
  ので、無理矢理コメントでこのつながりを追加してあります。
  (<code>post_filters.rb-&gt;raw_content()</code>)
  <a href='#fnref:2' rev='footnote'>↩</a></p>
</li><li id='fn:3'><p>Zenbackのページを見ると、<code>og:image</code>を指定するとZenbackもそれを参照する、
  ということが書いてありますが、以前から<code>og:image</code>を追加(<a href="/blog/2013/05/21/blog-octopress/">OctopressのIndexページの変更</a>)
  して居るにも関わらず余り上手く行きませんでした(何故かアイコンロゴになることが多い)。
<a href='#fnref:3' rev='footnote'>↩</a></p>
</li>
	</ol>
</div>
</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ソースコードの表示色]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/07/07/blog-octopress/"/>
    <updated>2013-07-07T15:09:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/07/07/blog-octopress</id>
    <content type="html"><![CDATA[<p>コード部分のバックグラウンドの色が
コントラストが低すぎてちょっと見難いと思ったので
周りの色より暗かったのを明るくしてみたと
いうだけの話です。</p>

<!-- more -->


<p><br class="clearBoth">

<h1>Contents</h1>
{:TOC}

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3802317723662375";
/* imgRectMid */
google_ad_slot = "9043394444";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>




</p>

<h1 id="Before/After">Before/After</h1>

<p>もともと
<img class="pic" src="/images/post/20130707_codeblock0.jpg" "" ""></p>

<p>こんなだったのが</p>

<p><img class="pic" src="/images/post/20130707_codeblock1.jpg" "" ""></p>

<p>こんな感じ。
周りの背景が<code>#f2f2f2</code>で、前のコード背景が<code>#eaeaea</code>だったのに対して
新しい方では<code>#fafafa</code>。</p>

<p>ちなみにコードのsyntax highlightはgithubを真似る様にして作ってます。</p>

<h1 id="現状のテーマ:octogray">現状のテーマ:octogray</h1>

<p>まだちょこちょこ変更してますが、このブログの今の状態をテーマとしてまとめてみました。</p>

<blockquote><p><a href="https://github.com/rcmdnk/octogray">octogray</a></p></blockquote>

<p>他のテーマ同様<code>/.themes/</code>に入れて<code>rake install[octogray]</code>で入れられます。</p>

<p>
</p>

<hr />

<p></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[スクロール時に付いてくるサイドバー]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/06/21/blog-octopress/"/>
    <updated>2013-06-21T23:35:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/06/21/blog-octopress</id>
    <content type="html"><![CDATA[<p><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B004V4LJKG/rcmdnk0c-22/ref=nosim/" rel="nofollow" target="_blank" ><img class="left" src="http://ecx.images-amazon.com/images/I/71Tg6V717bL._SL160_.png" border="0"></a>
記事が長くなった時にサイドバーがあると、下の方に行った時に寂しくなるので
下の方のコンテンツが着いてくる様なサイトが良くありますが、
<a href="http://github.com/cyokodog/jquery.ex-flex-fixed">jquery--ex-flex-fiex</a>という
プラグインを使ってOctopressへ導入してみました。
基本となっているテーマはデフォルトのClassicです。</p>

<!-- more -->


<p><br class="clearBoth">

<h1>Contents</h1>
{:TOC}

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3802317723662375";
/* imgRectMid */
google_ad_slot = "9043394444";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>




</p>

<h1 id="jquery.ex-flex-fixedのインストール">jquery.ex-flex-fixedのインストール</h1>

<p>この<a href="https://github.com/cyokodog/jquery.ex-flex-fixed">レポジトリ</a>
から直接取ってくるかclone:</p>

<pre><code>git clone git://github.com/cyokodog/jquery.ex-flex-fixed.git
</code></pre>

<p>して、
取ってきた<code>jquery.exflexfixed-0.3.0.js</code>を<code>source/javascripts/</code>へ
入れます。</p>

<p>これを<code>source/_includes/custom/head.html</code>へ次の行を加えて
読み込み、さらに下記の様なスクリプトも<code>.side-scroll</code>というクラスに関して
作っておきます。
<div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;{{root_url}}/javascripts/jquery.exflexfixed-0.3.0.js&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;script&gt;</span>
</span><span class='line'>  <span class="nx">jQuery</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">){</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.scroll-fixed&#39;</span><span class="p">).</span><span class="nx">exFlexFixed</span><span class="p">({</span>
</span><span class='line'>      <span class="nx">watchPosition</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">container</span> <span class="o">:</span> <span class="s1">&#39;#content&#39;</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><code>#content</code>は<code>source/_layouts/default.html</code>にある
コンテンツ用の<code>div</code>要素に対するIDです。
(これがスクロールしたりするときにどこからどこまでを見るか、という<code>全体</code>をになる。)</p>

<p><code>watchPosition</code>については
<a href="http://d.hatena.ne.jp/cyokodog/20120427/exflexfixed01">作者さんのページ</a>
に説明がありますが、
少なくとも自分の今の状態だと入れておかないと
最初に表示した時に要素がかぶってしまうので必要でした。</p>

<h1 id="_config.ymlで着いてくる要素の数を決めれるようにする">_config.ymlで着いてくる要素の数を決めれるようにする</h1>

<p>サイドバーを構築する時に使われる<code>plugins/include_array.rb</code>を
下の様に変更して<code>&lt;div class="scroll-fixed"&gt;</code>~<code>&lt;\div&gt;</code>で
好きな数(n_scroll_fixed)だけサイドバーの要素を囲める様にします。</p>

<p><div><script src='https://gist.github.com/5834744.js'></script>
<noscript><pre><code></code></pre></noscript></div>
</p>

<p>これで、<code>_config_yml</code>へ</p>

<pre><code># scroll-fixed
n_scroll_fixed: 3
</code></pre>

<p>と書けば、下から3つがスクロールに対して着いてくる要素になります。</p>

<p>以上で導入は終わりで、
そんな感じで右のスクロールバーを見てもらうと、下の方の要素が
いくつか下の方に行った時に追随してくるのが分かるかと思います。</p>

<h1 id="その他似たようなプラグイン">その他似たようなプラグイン</h1>

<p><code>jquery--ex-flex-fiex</code>以外にもスクロールに追随するサイドバー用のプラグインとして
下のような物がありました。</p>

<ul>
<li><a href="http://blog.echoenduring.com/2010/11/15/freebie-contained-sticky-scroll-jquery-plugin/">Contained Sticky Scroll</a></li>
<li><a href="http://stickyjs.com/">sticky</a></li>
</ul>


<p>
</p>

<hr />

<p></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[OctopressでMac風キーボードのキーを表示をさせるプラグイン]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/06/19/blog-octopress/"/>
    <updated>2013-06-19T19:36:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/06/19/blog-octopress</id>
    <content type="html"><![CDATA[<p>OctpressでMacのキーボードの様な表示をさせるプラグインを作りました。
キーボード表示自体は簡単なCSSで実装して、
プラグインを使う事でCommand:&#x2318;(<code>&amp;#x2318;</code>)等の記号を
キーコードを覚えずにLiquidタグで簡単に書ける様になります。</p>

<!-- more -->


<p><br class="clearBoth">

<h1>Contents</h1>
{:TOC}

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3802317723662375";
/* imgRectMid */
google_ad_slot = "9043394444";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>




</p>

<h1 id="インストール">インストール</h1>

<p>以下のレポジトリからファイルを取ってきてREADMEに従ってプラグインと
scssファイルを導入して下さい</p>

<blockquote><p><a href="https://github.com/rcmdnk/keyboardkey">keyboardkey</a></p></blockquote>

<h1 id="使い方">使い方</h1>

<p>導入したら<code>key</code>とう言うLinquidタグが使える様になるので
好きなアルファベットなり単語を<code>key</code>の後に入れるだけです。</p>

<h2 id="hoge文字列をキーボード化">hoge文字列をキーボード化</h2>

<ul>
<li><code>{% key a %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>a</i></li>
<li><code>{% key A %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>A</i></li>
<li><code>{% key Enter %}</code>: &nbsp; &nbsp; <i class='key'>Enter</i></li>
</ul>


<h2 id="記号">記号</h2>

<p>文字列だけだと直接html書いても余り変わらないわけですが、
プラグインでは以下の記号について、<code>symbol</code>という引数を与えた後に
適当なワードを与えると記号に変換します。</p>

<ul>
<li><code>{% key symbol apple %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#xf8ff;</i></li>
<li><code>{% key symbol cmd %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#x2318;</i>

<ul>
<li>cmd等いくつかの記号については複数の1つの記号に対して複数のワードが用意されています

<ul>
<li><code>{% key symbol command %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#x2318;</i></li>
</ul>
</li>
<li>その他全てのワードについては<code>keyboardkey.rb</code>の中身を見てみて下さい。</li>
</ul>
</li>
<li><code>{% key symbol opt %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#x2325;</i></li>
<li><code>{% key symbol shift %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#x21e7;</i></li>
<li><code>{% key symbol ctr %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#x2303;</i></li>
<li><code>{% key symbol tab %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#x21e5;</i></li>
<li><code>{% key symbol esc %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#x238b;</i></li>
<li><code>{% key symbol bs %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#x232b;</i></li>
<li><code>{% key symbol return %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#x23ce;</i></li>
<li><code>{% key symbol delete %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#x2326;</i></li>
<li><code>{% key symbol clear %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#x2327;</i></li>
<li><code>{% key symbol eject %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#x23cf;</i></li>
<li><code>{% key symbol capslock %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#x21ea;</i></li>
<li><code>{% key symbol pageup %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#x21de;</i></li>
<li><code>{% key symbol pagedown %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#x21df;</i></li>
<li><code>{% key symbol home %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#x2196;</i></li>
<li><code>{% key symbol end %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#x2198;</i></li>
<li><code>{% key symbol left %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#x21e0;</i></li>
<li><code>{% key symbol up %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#x21e1;</i></li>
<li><code>{% key symbol right %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#x21e2;</i></li>
<li><code>{% key symbol down %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#x21e3;</i></li>
<li><code>{% key symbol eacute %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&eacute;</i></li>
<li><code>{% key symbol clock %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#x231a;</i></li>
<li><code>{% key symbol gear %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#x2699;</i></li>
<li><code>{% key symbol space %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&nbsp;</i></li>
<li><code>{% key symbol asterisk %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&lowast;</i></li>
<li><code>{% key symbol not %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&not;</i></li>
<li><code>{% key symbol sup2 %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&sup2;</i></li>
<li><code>{% key symbol sup3 %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&sup3;</i></li>
<li><code>{% key symbol times %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&times;</i></li>
<li><code>{% key symbol divide %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&divide;</i></li>
<li><code>{% key symbol radic %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&radic;</i></li>
<li><code>{% key symbol sdot %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&sdot;</i></li>
<li><code>{% key symbol middot %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&middot;</i></li>
<li><code>{% key symbol 3dots %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#133;</i></li>
<li><code>{% key symbol check %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#x2713;</i></li>
<li><code>{% key symbol diamond %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#x25c6;</i></li>
<li><code>{% key symbol diamond_white %}</code>: &nbsp; &nbsp; <i class='key'>&#x25c7;</i></li>
<li><code>{% key symbol quote %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&quot;</i></li>
<li><code>{% key symbol amp %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&amp;</i></li>
<li><code>{% key symbol lt %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&lt;</i></li>
<li><code>{% key symbol gt %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&gt;</i></li>
<li><code>{% key symbol lsquare %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#91;</i></li>
<li><code>{% key symbol rsquare %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#93;</i></li>
<li><code>{% key symbol lbrace %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#123;</i></li>
<li><code>{% key symbol rbrace %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#125;</i></li>
<li><code>{% key symbol lparensesis %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#40;</i></li>
<li><code>{% key symbol rparensesis %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&#41;</i></li>
<li><code>{% key symbol copy %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&copy;</i></li>
<li><code>{% key symbol deg %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key'>&deg;</i></li>
</ul>


<h2 id="サイズの変更">サイズの変更</h2>

<ul>
<li><code>{% key a key_half %}</code>: &nbsp; &nbsp; &nbsp; <i class='key key_half'>a</i></li>
<li><code>{% key a key_small %}</code>: &nbsp; &nbsp; <i class='key key_small'>a</i></li>
<li><code>{% key a key_large %}</code>: &nbsp; &nbsp; <i class='key key_large'>a</i></li>
<li><code>{% key a key_2x %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key key_2x'>a</i></li>
<li><code>{% key a key_3x %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key key_3x'>a</i></li>
<li><code>{% key a key_4x %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key key_4x'>a</i></li>
<li><code>{% key a key_5x %}</code>: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class='key key_5x'>a</i></li>
</ul>


<h2 id="黒キーボード">黒キーボード</h2>

<ul>
<li><code>{% key a key_black %}</code>: &nbsp; &nbsp; <i class='key key_black'>a</i></li>
</ul>


<h2 id="文字列を強制的に全て大文字化">文字列を強制的に全て大文字化</h2>

<ul>
<li><code>{% key a key_uppercase %}</code>: &nbsp; &nbsp; <i class='key key_uppercase'>a</i></li>
</ul>


<h2 id="複数の組み合わせ">複数の組み合わせ</h2>

<ul>
<li><code>{% key symbol cmd key_large key_black %}</code>: &nbsp; &nbsp; <i class='key key_large key_black'>&#x2318;</i></li>
</ul>


<h1 id="表示を変えたいとき">表示を変えたいとき</h1>

<p>表示が気に喰わない場合は<code>sass/custom/_keyboardkey.scss</code>を調整して下さい。</p>

<h1 id="Octopress以外で使う方法(plugin無しで使う方法)">Octopress以外で使う方法(plugin無しで使う方法)</h1>

<p>上の方法ではOctopressプレグインを使ってLiquidタグで簡単に
書ける様にしましたが、
<a href="https://github.com/rcmdnk/keyboardkey">keyboardkey</a>レポジトリにある
<code>keyboardkey.scss</code>と言うscssファイルを導入すれば
Octopress関係なく簡単に記号を含めたキーを書ける様になります。</p>

<p>こんな感じでi要素を書くと上にあるのと同じようなキーを表示します。</p>

<pre><code>&lt;i class='key'&gt;A&lt;/i&gt;
&lt;i class='key key_ctrl'&gt;&lt;/i&gt;
</code></pre>

<p><code>key_large</code>や<code>key_black</code>等はそのままクラス名なのでclassの所に加えて上げると
上と同じようになりますが、symbolに関してはLiquidで変換するための引数なので
記号変換したい場合は上の様に<code>key_</code>+<code>記号名</code>の様なクラスが定義してあるので
それを加えて下さい。
どの記号が使えるかはこれも<code>keyboardkey.scss</code>を参照、ということで。</p>

<p>
</p>

<hr />

<p></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[OctopressのIndexページの変更]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/05/21/blog-octopress/"/>
    <updated>2013-05-21T17:25:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/05/21/blog-octopress</id>
    <content type="html"><![CDATA[<p>Octopressの変更でIndex(表紙)ページ周りの変更について
まとめておきたいと思います。</p>

<!-- more -->


<p><br class="clearBoth">

<h1>Contents</h1>
{:TOC}

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3802317723662375";
/* imgRectMid */
google_ad_slot = "9043394444";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>




</p>

<h1 id="Indexページで各記事のボックス全体をリンクに">Indexページで各記事のボックス全体をリンクに</h1>

<p>通常Indexページから各記事へのリンクは、
各記事タイトルと最後の<code>Read on</code>(<code>_config.yml</code>で<code>excerpt_link</code>に設定した値)
の部分だけですが、紹介部分のボックス全体をリンクにするようにしました。</p>

<p><img class="pic" src="/images/post/20130521_index_click_box.jpg" alt=""/></p>

<p>まず、<code>_include/custom/head.html</code>へ以下のスクリプトを追加:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;script&gt;</span>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.index_click_box&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="o">=</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">parent</span><span class="p">().</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">).</span><span class="nx">eq</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;href&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>次に<code>sass/custom/_styles.scss</code>へ</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="nc">.index_click_box</span><span class="p">{</span><span class="na">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="na">&lt;pre&gt;&lt;code&gt;cursor</span><span class="o">:</span> <span class="no">pointer</span><span class="p">;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="nt">code</span><span class="o">&gt;&lt;/</span><span class="nt">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nt">p</span><span class="o">&gt;</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>を追加。</p>

<p>最後に<code>_include/article.html</code>の下の方で</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'> {% if index %}
</span><span class='line'><span class="gd">-  &lt;div class=&quot;entry-content&quot;&gt;{{ content | excerpt }}&lt;/div&gt;</span>
</span><span class='line'><span class="gi">+  &lt;div class=&quot;entry-content index_click_box&quot;&gt;{{ content | excerpt }}&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>と言った感じでIndexページの時のコンテンツ全体を<code>index_click_box</code>化。</p>

<p>これでIndexページに載っている文章部分も含めてリンクになります。
ただし、文章中に別のリンクがある場合はその部分だけは元々あるリンクとなります。</p>

<h1 id="NailThumbを使ってイメージ大きさ調整">NailThumbを使ってイメージ大きさ調整</h1>

<p><a href="http://www.garralab.com/nailthumb.php">NailThumb</a>は
イメージの大きさを自動調整してくれたりするjQueryプラグインです<sup id='fnref:1'><a href='#fn:1' rel='footnote'>1</a></sup>。
単に大きさ調整する以外にもアニメーションを付けたりすることもできます。</p>

<p>Indexページで単一の大きさの正方形画像を載せたかったのですが、
単純に大きさ指定すると縦横の縮小がおかしくなるので、
それを解決するのにこのプラグインを導入します。</p>

<p>導入するにはまず
<a href="http://www.garralab.com/nailthumb-downloads.php">Download &amp; support</a>
から最新のzipファイル(現在1.1)を取ってきて以下の物をコピーします。</p>

<ul>
<li><code>jquery.nailthumb.1.1.min.js</code>を<code>source/javascripts/</code>へ</li>
<li><code>jquery.nailthumb.1.1.css</code>を<code>sass/custom/_nailthumb.scss</code>としてコピー</li>
</ul>


<p>次に<code>source/_includes/custom/head.html</code>へ</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://rcmdnk.github.io//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;{{root_url}}/javascripts/jquery.nailthumb.1.1.min.js&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nx">jQuery</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">jQuery</span><span class="p">(</span><span class="s1">&#39;.nailthumb-container&#39;</span><span class="p">).</span><span class="nx">nailthumb</span><span class="p">({</span><span class="nx">width</span><span class="o">:</span><span class="mi">200</span><span class="p">,</span><span class="nx">height</span><span class="o">:</span><span class="mi">200</span><span class="p">,</span><span class="nx">maxShrink</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="nx">fitDirection</span><span class="o">:</span><span class="s1">&#39;left top&#39;</span><span class="p">});</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>といった感じに、nailthumbスクリプトの読み込みと実行スクリプトを書きます。
(jqueryの読み込みが既に他でしてあれば1行目は必要ありません。)
ここでは</p>

<ul>
<li>縦横200px</li>
<li>画像の縮小しない(200x200より大きい時は一部分を表示)</li>
<li>一部分表示の際は左上を表示、</li>
</ul>


<p>と言った設定にしてあります。</p>

<p>次に<code>sass/custom/_styles.scss</code>へ<code>@import "nailtumb";</code>を追加して
先ほどコピーした<code>_nailthumb.scss</code>も読み込む様にします。</p>

<p>さらに<code>sass/custom/_styles.scss</code>へ</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.title-thumb</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">width</span><span class="o">:</span> <span class="m">200px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">height</span><span class="o">:</span> <span class="m">200px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">float</span><span class="o">:</span> <span class="k">left</span><span class="p">;</span>
</span><span class='line'>  <span class="k">right</span><span class="o">-</span><span class="k">margin</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">bottom</span><span class="o">-</span><span class="k">margin</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>と言ったクラスを追加。</p>

<p>これで</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;pre&gt;&lt;code&gt;</span><span class="ni">&amp;lt;</span>div class=&quot;nailthumb-container&quot;<span class="ni">&amp;gt;</span>
</span><span class='line'>    <span class="ni">&amp;lt;</span>img src=&quot;http://rcmdnk.github.io/images/page_thumb.jpg&quot; alt=&quot;page_thumb&quot;/<span class="ni">&amp;gt;</span>
</span><span class='line'><span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
</span><span class='line'><span class="nt">&lt;/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>と言った記述で200x200に適宣変更された画像を表示出来るようになります。</p>

<h1 id="サムネイルをYAMLで指定するようにする">サムネイルをYAMLで指定するようにする</h1>

<p>簡単にタイトルサムネイルを決めるために、
YAMLブロックで指定するようにしました。</p>

<p>YAMLで<code>ogimage</code>という変数を与え、この値がある時は
記事の最初にサムネイルを入れる様にするため、
<code>_include/article.html</code>の下の方のcontent部分を以下の様に変更します。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'><span class="gu">@@ -17,6 +17,11 @@</span>
</span><span class='line'> {% endunless %}
</span><span class='line'> {% if index %}
</span><span class='line'>   &lt;div class=&quot;entry-content&quot;&gt;{{ content | excerpt }}&lt;/div&gt;
</span><span class='line'><span class="gi">+  {% if post.ogimage %}</span>
</span><span class='line'><span class="gi">+    &lt;div class=&quot;nailthumb-container title-thumb&quot;&gt;</span>
</span><span class='line'><span class="gi">+      &lt;img src=&quot;{{post.ogimage}}&quot; alt=&quot;&quot; title=&quot;&quot;/&gt;</span>
</span><span class='line'><span class="gi">+    &lt;/div&gt;</span>
</span><span class='line'><span class="gi">+  {% endif %}</span>
</span><span class='line'>   {% capture excerpted %}{{ content | has_excerpt }}{% endcapture %}
</span><span class='line'>   {% if excerpted == &#39;true&#39; %}&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt; &amp;lt;footer&amp;gt;
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;@@ -24,5 +29,12 @@&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt; &amp;lt;/footer&amp;gt;
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;   {% endif %}
</span><span class='line'> {% else %}
</span><span class='line'><span class="gd">-&lt;div class=&quot;entry-content&quot;&gt;{{ content }}&lt;/div&gt;</span>
</span><span class='line'><span class="gi">+&lt;div class=&quot;entry-content&quot;&gt;</span>
</span><span class='line'><span class="gi">+  {% if page.ogimage and page.no_ogimage != true %}</span>
</span><span class='line'><span class="gi">+    &lt;div class=&quot;nailthumb-container title-thumb&quot;&gt;</span>
</span><span class='line'><span class="gi">+      &lt;img src=&quot;{{page.ogimage}}&quot; alt=&quot;&quot; title=&quot;&quot;/&gt;</span>
</span><span class='line'><span class="gi">+    &lt;/div&gt;</span>
</span><span class='line'><span class="gi">+  {% endif %}</span>
</span><span class='line'><span class="gi">+  {{ content }}</span>
</span><span class='line'><span class="gi">+&lt;/div&gt;</span>
</span><span class='line'> {% endif %}
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>これで、<code>ogimage</code>の値が設定されている時はページの最初にサムネイルが追加
される様になります。</p>

<h1 id="Open+Graph+Protocol+(OGP)について">Open Graph Protocol (OGP)について</h1>

<p>Indexページとは直接関係無いのですが、<code>ogimage</code>と言う名前は
<a href="http://ogp.me/">OGP</a>での画像指定にも使ってみよう、と言うことでその名前にしました。
OGPはSNS等でページの解析に使われるための情報の定義方法で
Facebook等にシェアされる時、HTML内に</p>

<pre><code>&lt;meta property="og:image" content="http://page_image.jpg" /&gt;
</code></pre>

<p>等と書かれているとこのイメージがページのイメージ、
と指定でき、シェアされる時に表示される画像を明示的に決める事が出来る、
とのことです。</p>

<p>下を見てもらうと分かるように、このブログに<a href="http://zenback.jp/">Zenback</a>
を導入してみたのですが、
ここで関連記事の画像もog:imageを使う、とのことなので上手く
関連記事の画像表示をしてくれないかな、とと思ってOGPのデータも
Octopressで入れるようにしました。</p>

<p>OGPデータを追加するために<code>_include/custom/head.html</code>内に次の様な行を
追加します。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">&quot;og:title&quot;</span> <span class="na">content=</span><span class="s">&quot;{{page.title}}&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">&quot;og:type&quot;</span> <span class="na">content=</span><span class="s">&quot;blog&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">&quot;og:description&quot;</span> <span class="na">content=</span><span class="s">&quot;{{ description | strip_html | condense_spaces | truncate:150 }}&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>{% capture canonical %}{{ site.url }}{% if site.permalink contains &#39;.html&#39; %}{{ page.url }}{% else %}{{ page.url | remove:&#39;index.html&#39; | strip_slash }}{% endif %}{% endcapture %}
</span><span class='line'><span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">&quot;og:url&quot;</span> <span class="na">content=</span><span class="s">&quot;{{canonical}}&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>{% if page.ogimage %}
</span><span class='line'><span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">&quot;og:image&quot;</span> <span class="na">content=</span><span class="s">&quot;{{page.ogimage}}&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>{% endif %}
</span><span class='line'><span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">&quot;og:site_name&quot;</span> <span class="na">content=</span><span class="s">&quot;{{site.title}}&quot;</span> <span class="nt">/&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>description部分はページのdescriptionと同じです。</p>

<p>og:imageは200px x 200px以上が推奨で出来れば1500 x 1500が良いとのこと。
でも5MB以下でないといけません。<sup id='fnref:2'><a href='#fn:2' rel='footnote'>2</a></sup></p>

<p>Zenbackの表示でも、元が小さい画像の所は上手く表示されずに、
代わりにAbout Meにあるロゴが表示されています。
(ページ中に他に大きな画像もあるのに、何故なのかが謎...)</p>

<p>OGPについてはFacebookの<a href="http://developers.facebook.com/tools/debug">デバッガーページ</a>
で正しく設定されているか調べる事が出来ます。</p>

<h1 id="og:imageとページトップの画像を違うものにしたいとき">og:imageとページトップの画像を違うものにしたいとき</h1>

<p>上の設定だと最初に来る画像は常に小さく切り取られた絵になってしまうので、
もし、og:imageはSNS用だけに使って表示する時は別の表示にしたい時は
<code>_include/article.html</code>のif文を</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'><span class="gd">-{% if page.ogimage %}</span>
</span><span class='line'><span class="gi">+{% if page.ogimage and page.no_ogimage != true %}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>な感じで変更して、
YAMLブロックで<code>no_ogimage: true</code>と言ったフラグを定義して、
本文の方で適時画像を挿入すればOK。</p>

<h1 id="Indexページと本ページで分ける">Indexページと本ページで分ける</h1>

<p>さらに場合分けして、Indexページでは小さく切り取って
本ページの方ではそのまま表示したい場合は</p>

<p><code>_include/article.html</code>を</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>{% endunless %}
</span><span class='line'>{% if index %}
</span><span class='line'>  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;entry-content&quot;</span><span class="nt">&gt;</span>{{ content | excerpt }}<span class="nt">&lt;/div&gt;</span>
</span><span class='line'>  {% if post.ogimage and post.no_ogimage != true %}<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;pre&gt;&lt;code&gt;</span><span class="ni">&amp;lt;</span>div class=&quot;nailthumb-container title-thumb&quot;<span class="ni">&amp;gt;</span>
</span><span class='line'>  <span class="ni">&amp;lt;</span>img src=&quot;{{post.ogimage}}&quot; alt=&quot;&quot; title=&quot;&quot;/<span class="ni">&amp;gt;</span>
</span><span class='line'><span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
</span><span class='line'><span class="nt">&lt;/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;</span>  {% endif %}
</span><span class='line'>  {% capture excerpted %}{{ content | has_excerpt }}{% endcapture %}
</span><span class='line'>  {% if excerpted == &#39;true&#39; %}<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;pre&gt;&lt;code&gt;</span><span class="ni">&amp;lt;</span>footer<span class="ni">&amp;gt;</span>
</span><span class='line'>  <span class="ni">&amp;lt;</span>a rel=&quot;full-article&quot; href=&quot;{{ root_url }}{{ post.url }}&quot;<span class="ni">&amp;gt;</span>{{ site.excerpt_link }}<span class="ni">&amp;lt;</span>/a<span class="ni">&amp;gt;</span>
</span><span class='line'><span class="ni">&amp;lt;</span>/footer<span class="ni">&amp;gt;</span>
</span><span class='line'><span class="nt">&lt;/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;</span>  {% endif %}
</span><span class='line'>{% else %}<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;entry-content&quot;</span><span class="nt">&gt;</span>{{ content }}<span class="nt">&lt;/div&gt;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;entry-content&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  {% if post.ogimage and post.no_ogimage != true %}
</span><span class='line'>    {% case post.thumb_page %}
</span><span class='line'>    {% when 0 %}
</span><span class='line'>    {% when 2 %}
</span><span class='line'>      <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">&quot;{{page.ogimage}}&quot;</span> <span class="na">alt=</span><span class="s">&quot;&quot;</span> <span class="na">title=</span><span class="s">&quot;&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>    {% else %}
</span><span class='line'>      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;nailthumb-container title-thumb&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">&quot;{{page.ogimage}}&quot;</span> <span class="na">alt=</span><span class="s">&quot;&quot;</span> <span class="na">title=</span><span class="s">&quot;&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>    {% endcase %}
</span><span class='line'>  {% endif %}
</span><span class='line'>  {{ content }}
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;</span>{% endif %}
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>とかして、</p>

<ul>
<li><code>thumb_page: 0</code>だと本ページの方では表示しない</li>
<li><code>thumb_page: 2</code>だと本ページの方では大きさ変更せずそのまま表示</li>
<li><code>thumb_page: 1</code>もしくは定義無しならサムネイル表示</li>
</ul>


<p>とかで。</p>

<hr />

<p><div class="footnotes">
	<ol>
		<li id='fn:1'><p> これ以外にも<a href="https://github.com/karacas/imgLiquid">imgLiquid</a>や
  <a href="https://github.com/karacas/imgLiquid">MyThumnail</a>と言った
  似たような事が出来るプラグインもあります。
  <a href='#fnref:1' rev='footnote'>↩</a></p>
</li><li id='fn:2'><p> <a href="https://developers.facebook.com/docs/opengraph/creating-object-types/#properties">Facebook Developers</a>
<a href='#fnref:2' rev='footnote'>↩</a></p>
</li>
	</ol>
</div>
</p>
]]></content>
  </entry>
  
</feed>
