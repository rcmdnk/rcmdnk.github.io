<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: Vimperator | rcmdnk's blog]]></title>
  <link href="https://rcmdnk.com/blog/tags/vimperator/atom.xml" rel="self"/>
  <link href="https://rcmdnk.com/"/>
  <updated>2020-08-11T22:46:49+00:00</updated>
  <id>https://rcmdnk.com/</id>
  <author>
    <name><![CDATA[rcmdnk]]></name>
    <email><![CDATA[rcmdnk@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Vimperator亡き後のためにVimium-FFを試してみる]]></title>
    <link href="https://rcmdnk.com/blog/2017/10/20/computer-firefox-vimperator/"/>
    <updated>2017-10-20T00:00:00+00:00</updated>
    <id>https://rcmdnk.com/blog/2017/10/20/computer-firefox-vimperator</id>
    <content type="html"><![CDATA[<p>Firefox 57 (Quantum)のリリース予定(11/14)まで後1ヶ月を切りました。
57からはWebExtensionsベースではない旧式のアドオンが
使えなくなります。</p>

<p>一ヶ月前の今でも対応してないアドオンはたくさんあり、
いくつかのアドオンについては既に作者の人が
対応する予定は無い、と言い切っているものもあります。</p>

<p>そんな中、Firefoxを使う一番の理由であるVimperatorも旧式で
対応しようとはしているものの少なくとも11/14までには間に合いそうもありません。</p>

<p>ということでとりあえず現状代わりになりそうなものを探して
ちょっと試してみました。</p>

<!-- more -->

<ul id="markdown-toc">
  <li><a href="#vimium-ff" id="markdown-toc-vimium-ff">Vimium-FF</a></li>
  <li><a href="#vimperatorっぽくしてみる" id="markdown-toc-vimperatorっぽくしてみる">Vimperatorっぽくしてみる</a></li>
  <li><a href="#現状での問題点" id="markdown-toc-現状での問題点">現状での問題点</a></li>
  <li><a href="#vimiumでは出来ないvimperatorの動作" id="markdown-toc-vimiumでは出来ないvimperatorの動作">Vimiumでは出来ないVimperatorの動作</a></li>
  <li><a href="#他の候補" id="markdown-toc-他の候補">他の候補</a></li>
  <li><a href="#chromeなら" id="markdown-toc-chromeなら">Chromeなら</a></li>
  <li><a href="#まとめ" id="markdown-toc-まとめ">まとめ</a></li>
</ul>
<div class="group"></div>

<div class="center_wrapper">
  <div>
  <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3802317723662375" data-ad-slot="5762198341"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
  </div>
</div>

<h2 id="vimium-ff">Vimium-FF</h2>

<div class="github-widget" data-repo="philc/vimium"></div>

<blockquote>
  <p><a href="https://addons.mozilla.org/en-GB/firefox/addon/vimium-ff/">Vimium-FF :: Add-ons for Firefox</a></p>
</blockquote>

<p>VimiumはもともとGoogle Chrome用の拡張機能として開発されたものですが、
最近Firefoxでも使えるバージョンを出しました。(多分Vimperatorが使えなくなるのを見越した対応。)
WebExtensionsにも対応済です。</p>

<p>基本的な使い方はChrome版、Firefox版共通で、
キー設定などはアドオンの設定画面にある<strong>Custom key mappings</strong>に書き込むことで
変更が出来ます。</p>

<p><img src="https://rcmdnk.com/images/post/20171020_vimiumsettings.jpg" alt="vimiumsettings" class="pic" /></p>

<p>この欄の右側にある<strong>Show available commands</strong>を押すと設定一覧が出てきます。
さらに右下にある<strong>Show advanced commands</strong>を押すと隠れている設定も出てきます。</p>

<p><img src="https://rcmdnk.com/images/post/20171020_vimiumcommands.jpg" alt="20171020_vimiumcommands.jpg" class="pic" /></p>

<p>この一覧の中の括弧()内にあるのがコマンドで、
これをキーにマッピングすることで動作を設定できます。</p>

<pre><code>map d removeTab
map &lt;c-j&gt; scrollDown
</code></pre>

<p>とか。
Controlを書く時に<code>&lt;&gt;</code>で囲って<code>c-</code>で書きますが、
<code>c</code>は大文字でも小文字でも大丈夫な様子。</p>

<p>Alt(Command)を使いたい場合は<code>a-</code>と書くみたいですがMacでは上手く効きませんでした(Chromeでも)。</p>

<p><a href="https://github.com/philc/vimium/wiki/Visual-Mode">Visual Mode</a>とかも一応設定がありますが
マップに関しては<code>map</code>のみで設定します。
設定を削除したい場合には<code>unmap d</code>とか。
全ての設定を一度削除したい場合には<code>unmapAll</code>が使えます。</p>

<p>VimiumはVimperatorに比べると単純な操作のキーマッピングだけをしているようなかんじですが、
Hit-a-Hintの機能が使えるのが1つ嬉しいところかと。</p>

<h2 id="vimperatorっぽくしてみる">Vimperatorっぽくしてみる</h2>

<p>差し当たりVimperatorの動作と違うキー設定になってて引っかかった部分が多かったので
出来る部分だけでもVimperatorっぽくした設定がこちら。</p>

<pre><code>map &lt;c-f&gt; scrollPageDown count=2
map &lt;c-b&gt; scrollPageUp count=2
map y copyCurrentUrl
map &lt;c-g&gt; openCopiedUrlInNewTab
map F LinkHints.activateModeToOpenInNewForegroundTab
map t Vomnibar.activateInNewTab
map &lt;c-o&gt; goBack
map &lt;c-i&gt; goForward
map d removeTab
map u restoreTab
map &lt;c-p&gt; previousTab
map &lt;c-n&gt; nextTab
</code></pre>

<p><code>scrollPageDown</code>は半ページだけ動く様な動作だったので
1ページ動く様に<code>count=2</code>を追加。
この様に後ろに<code>count=&lt;n&gt;</code>を入れるとn回繰り返して行います。</p>

<h2 id="現状での問題点">現状での問題点</h2>

<p>こんな設定でやってみましたがいくつか出来ないことが。</p>

<ul>
  <li><code>copyCurrentUrl</code>が効かない(Firefoxのみ)。
    <ul>
      <li><code>Yanked ...</code>みたいなメッセージが右下に出るにも関わらずクリップボードに入ってない。</li>
    </ul>
  </li>
  <li><code>openCopiedUrlInNewTab</code>の動作がおかしい(Firefoxのみ)。
    <ul>
      <li>クリップボードにURLがあっても単に空白ページが新しく出来る。</li>
    </ul>
  </li>
  <li>特定のページで操作が効かない。
    <ul>
      <li>設定ページなどではVimperatorも効かないので仕方がない部分はある。</li>
      <li>ただし、空白ページ(about:blank)等でも効かない。
        <ul>
          <li>空白ページを作ってからとか全てのタブを削除していって残った空白ページで<code>o</code>で開く、とかが出来ない。</li>
        </ul>
      </li>
      <li>ページごとに設定を無効化する設定があるがそれを全て無くしても特定のページで操作できない。
        <ul>
          <li>Firefox Addon、Chromeの拡張のページなどで効かない。</li>
          <li>さらに何故かFeedlyのページでも効かない(Firefoxのみ)。
            <ul>
              <li>Gmailのページでは設定しなければ効く。</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li><code>o</code>などで開くページのURLの書き換えが出来ない。</li>
  <li>検索の動作が不安定(Firefox)。
    <ul>
      <li>検索ワードを入力する時に、特に日本語を入力すると変なタイミングで一部だけ変換されたりする。</li>
      <li>たまに検索しようとしても文字が入力できない時がある。</li>
    </ul>
  </li>
  <li><code>&lt;RETURN&gt;</code>をマップできない。</li>
</ul>

<p>と言った感じがとりあえずの感想。</p>

<p>URLの書き換えが出来ない、というのはChromeだと<code>o</code>を押すと</p>

<p><img src="https://rcmdnk.com/images/post/20171020_vimiumfirefox.jpg" alt="20171020_vimiumfirefox.jpg" class="pic" /></p>

<p>こんな感じで画面の真ん中情報に書き込み欄が出てきて補完候補が出ますが、
候補を<i class="key">Tab</i>で選んでも書き込み欄には反映されません。
選んだ状態で<i class="key">Return</i>を押せばそのURLに飛ぶことが出来ますが、
<i class="key">Delete</i>とかを押すと最初に書き込んだ文字列が消されるだけです。</p>

<p>Vimperatorや下に書くChromeの拡張のcVimだと</p>

<p><img src="https://rcmdnk.com/images/post/20171020_vimiumchrome.jpg" alt="20171020_vimiumchrome.jpg" class="pic" /></p>

<p>こんな感じで補完候補を<i class="key">Tab</i>で候補を選択した時、選択行にあるものが書き込み欄に入ります。
この状態から<i class="key">Delete</i>したり文字を入力してURLを改変することが可能です。</p>

<p>Firefoxのみで上手く言ってない操作に関しては今後のアップデートで
治る可能性もありますが、
両者で出来ない機能、というのはそもそもそういう動作を目指してなかったりすることもあるかもしれないので
そのままの可能性が高いです。</p>

<h2 id="vimiumでは出来ないvimperatorの動作">Vimiumでは出来ないVimperatorの動作</h2>

<p>まあ沢山あるわけですが、差し当たり</p>

<ul>
  <li><code>qmark</code>機能が使えない
    <ul>
      <li><code>silent qmark m https://mail.google.com</code>みたいな設定をしておいて</li>
      <li><code>gom</code>と押すとGmailのページに行ける機能。(<code>gnm</code>なら新しいタブに開く。)</li>
    </ul>
  </li>
  <li><code>multi_requester.js</code>が使えない。
    <ul>
      <li>辞書ページなどにキーワードを与えてその結果をオーバーレイで表示してくれる拡張機能。</li>
    </ul>
  </li>
  <li><code>copy.js</code>が使えない。
    <ul>
      <li>JavaScriptなどでページの情報を取ってきてクリップボードに入れてくれる機能。</li>
      <li>ブックマークレット代わりに使える。(<code>qmark</code>と違ってクリップボードに直接値を入れたい時に便利。)</li>
    </ul>
  </li>
  <li>コマンドが使えない。
    <ul>
      <li><code>restart</code>とか色々。</li>
    </ul>
  </li>
</ul>

<p>などなど。</p>

<p>Vimiumで出来ることはHit-a-Hintを除いて
すべて通常のFirefoxのキーボードショートカットを変更すれば出来ることです。</p>

<p><code>open</code>コマンド等もアドレスバーにフォーカスを当てれば良いだけ。</p>

<ul>
  <li>Mac: <i class="key">Command</i>-<i class="key">L</i>もしくは<i class="key">F6</i></li>
  <li>Windows: <i class="key">Control</i>-<i class="key">L</i>もしくは<i class="key">Alt</i>-<i class="key">D</i>または<i class="key">F6</i></li>
</ul>

<p>他の移動操作などは簡単な割当で出来ます。
なのでMacならKarabiner-Elements、WindowsならAutoHotkeyと言った外部アプリを使って
当てはめる事も可能です。</p>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail">
  <a href="https://rcmdnk.com/blog/2017/09/05/computer-mac-karabiner-vim/"><img class="small-thumbnail-img" src="https://rcmdnk.com/images/post/thumbnail/20170905_vimemu_120_90.jpg" width="120" height="90" alt="20170905_vimemu_120_90" /></a>
</div><a class="click_box_link" href="https://rcmdnk.com/blog/2017/09/05/computer-mac-karabiner-vim/">Vim以外でVimする: Mac+Karabiner-Elements編</a></div></li></ul>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail">
  <a href="https://rcmdnk.com/blog/2013/08/03/computer-windows-autohotkey/"><img class="small-thumbnail-img" src="https://rcmdnk.com/images/post/thumbnail/20130723_AutoHotKey_120_90.jpg" width="120" height="90" alt="20130723_AutoHotKey_120_90" /></a>
</div><a class="click_box_link" href="https://rcmdnk.com/blog/2013/08/03/computer-windows-autohotkey/">Vim以外でVimする: Windows+AutoHotkey編</a></div></li></ul>

<p>これらを使えば空白ページや設定ページでも動作を当てる事が可能なのでむしろ便利にできそうです。</p>

<p><code>qmarks</code>の機能なども実装しようと思えば出来ると思います。</p>

<p>出来ないのはHit-a-Hintの機能で、現状これだけを出来るアドオンというのもないので
とりあえずVimiumを入れてこの機能だけ使う、というのもありかもしれません。</p>

<h2 id="他の候補">他の候補</h2>

<p><a href="https://addons.mozilla.org/ja/firefox/addon/saka-key/">Saka Key</a>
というアドオンが色々と設定できるアドオンとして候補になると思います。</p>

<blockquote>
  <p><a href="https://key.saka.io/">Introduction · Saka Key Handbook</a></p>
</blockquote>

<blockquote>
  <p><a href="https://github.com/lusakasa/saka-key">lusakasa/saka-key: A keyboard interface to the web</a></p>
</blockquote>

<p>こちらもWebExtensionsに対応済です。
また、このアドオンもChromeの拡張機能としても使える様になっています。</p>

<p>Hit-a-Hintとかが使え、ページ移動などの一通りの事は出来ますが、
現状openコマンド的な事が出来ません。</p>

<blockquote>
  <p><a href="https://github.com/lusakasa/saka-key/issues/36">Key command to focus omnibar · Issue #36 · lusakasa/saka-key</a></p>
</blockquote>

<p>通常のショートカットキーで出来るので簡単にできそうなものですが何やら難しいようです。
他のアドオンとかでは見た目的に敢えて独自の入力欄を作っているんだと思ってましたが、
実は技術的な理由でアドレスバーにフォーカスすることがアドオンの中では出来ないから
作らざるを得ない状況があるようです。</p>

<p>ドキュメントには<code>Commands</code>という項目があってJavaScriptを使って
色々書いていけそうな雰囲気はありますが
少なくとも通常の設定画面からどうこう出来る様なものではないみたいです。</p>

<p>ということで使い勝手という点では今のところVimiumからopenコマンドを引いた感じなのでちょっと難しいです。</p>

<p>それ以外だと
<a href="https://addons.mozilla.org/ja/firefox/addon/vimfx/">VimFx</a>
というアドオンもあって、一時期Vimperatorが使えなくなっていた頃にちょっと代替え用として出てきてましたが
残念ながらこのアドオンもWebExtensionsには対応してないので57以降は使えなくなります。</p>

<div class="postscript">
  <p><strong>追記: 2017/11/01 </strong></p>

  <p>Firefoxで有望そうな新たしいアドオンが出てきました。</p>

  <ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail"><div class="amazon-img">
  <a href="//www.amazon.co.jp/gp/product/B011QUSK04" rel="nofollow" target="_blank"><img src="https://images-na.ssl-images-amazon.com/images/I/61Xx2McqhaL._SS90_CR0,0,120,90_.jpg" alt="牝狐の夏　夜逃げ若殿 捕物噺　: 11 (二見時代小説文庫) | 聖 龍人 | 日本の小説・文芸 | Kindleストア | Amazon" /></a>
</div>
</div><a class="click_box_link" href="https://rcmdnk.com/blog/2017/11/01/computer-firefox/">Vim Vixen: Vimperatorの代わりになるかもしれないアドオン</a></div></li></ul>

  <p><strong>追記ここまで</strong></p>
</div>

<h2 id="chromeなら">Chromeなら</h2>

<p>ChromeであればVimiumの他にcVimという拡張機能があります。</p>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail"><div class="amazon-img">
  <a href="//www.amazon.co.jp/gp/product/B00IE67ZSM?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=B00IE67ZSM&amp;linkCode=shr&amp;tag=rcmdnk0c-22" rel="nofollow" target="_blank"><img src="https://images-na.ssl-images-amazon.com/images/I/3110x9TzbSL._SS90_CR0,0,120,90_.jpg" alt="【並行輸入品】Toshiba Chromebook CB35-A3120 PLM01U-002005 13.3-Inch Cloud Computer" /></a>
</div></div><a class="click_box_link" href="https://rcmdnk.com/blog/2014/10/22/computer-firefox/">cVim: Google ChromeのVimperatorみたいな拡張</a></div></li></ul>

<p>こちらはHit-a-Hintは勿論、<code>qmarks</code>の機能も持っています。</p>

<p>上にも書いたとおりopenコマンドなどでの操作も便利になっています。</p>

<p>また、設定ファイルの書き方がよりVimっぽくなっていてやりやすいです。</p>

<p>あと、ちょっと今触ってみて気づいたところだと、新しいタブを開く、をURL無しな状態でcVimでやると
cVimが作った特殊な新しい空白ページを開き、そのページ上だとcVimは有効になります。
(通常の空白ページではVimium同様操舵できない。)</p>

<ul>
  <li><a href="https://chrome.google.com/webstore/detail/vimium/dbepggeogbaibhgnhhndojpepiihcmeb">Vimium - Chrome ウェブストア</a>: ユーザー262517人
    <ul>
      <li><a href="https://github.com/philc/vimium">GitHub - philc/vimium: The hacker’s browser.</a></li>
    </ul>
  </li>
  <li><a href="https://chrome.google.com/webstore/detail/cvim/ihlenndgcmojhcghmfjfneahoeklbjjh?hl=ja">cVim - Chrome ウェブストア</a>: ユーザー27223人
    <ul>
      <li><a href="https://github.com/1995eaton/chromium-vim">GitHub - 1995eaton/chromium-vim: Vim bindings for Google Chrome.</a></li>
    </ul>
  </li>
</ul>

<p>Chromeストアで見てみるとVimiumの方が一桁ユーザー数が多いみたいですが、
レビューを見てると前までcVimの方が結構不安定だったのかな、といった感じです。
GitHubのスターでもVimiumの方が数倍多くなっています。</p>

<p>ただ、最近のレビューではVimiumから移った、という人も結構居てcVimの方が良さそうに見えます。</p>

<p>実際に出来ることは圧倒的にcVimの方が多いですし、上にも書いたとおりVimiumは単位ショートカットキー設定をしているに過ぎない程度なので
使うのであればcVimでないと意味が無いかな、という感じすらします。</p>

<p>また、両者ともにGitHubを見ていると最近も結構アクティブに更新しているみたいなので
今後の進化も見ておく必要があるとは思います。</p>

<h2 id="まとめ">まとめ</h2>

<p>色々見てみればみるほど厳しい現実が待っている感じです。</p>

<p>なるべく現状に近い形で使い続けたいのであれば、
Chromeに移ってcVimを使う、というのが一番簡単に出来る事になりそうです。</p>

<p>ただ、Firefox 57でせっかくFirefoxが速くなるのにそのタイミングで移るのもなんか悔しい感じもします。
アドオンとかは作ったことが無いのでどうしたもんだか分からないのですが
Karabiner-ElementsやAutoHotkeyを使って<code>qmarks</code>とかの機能を含めた動作をある程度再現することは出来るかと思いますが、
Hit-a-Hintは別途必要なのでとりあえずVimiumを入れるとか。</p>

<p>困った。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Firefoxのページ内検索に関するabout:config設定]]></title>
    <link href="https://rcmdnk.com/blog/2017/07/14/computer-firefox-vimperator-2/"/>
    <updated>2017-07-14T13:00:00+00:00</updated>
    <id>https://rcmdnk.com/blog/2017/07/14/computer-firefox-vimperator-2</id>
    <content type="html"><![CDATA[<p>Firefoxのページ内検索に関して
<a href="https://rcmdnk.com/blog/2017/07/14/computer-firefox-vimperator/">ちょっと調べることがあった</a>
のでついでにいろいろメモ。</p>

<!-- more -->

<ul id="markdown-toc">
  <li><a href="#firefoxのページ内検索に関するaboutconfig設定" id="markdown-toc-firefoxのページ内検索に関するaboutconfig設定">Firefoxのページ内検索に関するabout:config設定</a></li>
  <li><a href="#findbar" id="markdown-toc-findbar">findbar</a></li>
  <li><a href="#accessibilitytypeaheadfind" id="markdown-toc-accessibilitytypeaheadfind">accessibility.typeaheadfind</a></li>
  <li><a href="#設定ファイルで管理する" id="markdown-toc-設定ファイルで管理する">設定ファイルで管理する</a>    <ul>
      <li><a href="#userjs" id="markdown-toc-userjs">user.js</a></li>
      <li><a href="#vimperatorrc" id="markdown-toc-vimperatorrc">vimperatorrc</a></li>
    </ul>
  </li>
  <li><a href="#他の端末と共有する" id="markdown-toc-他の端末と共有する">他の端末と共有する</a>    <ul>
      <li><a href="#設定ファイルを使う" id="markdown-toc-設定ファイルを使う">設定ファイルを使う</a></li>
      <li><a href="#firefox-syncで同期する" id="markdown-toc-firefox-syncで同期する">Firefox Syncで同期する</a></li>
    </ul>
  </li>
</ul>
<div class="group"></div>

<div class="center_wrapper">
  <div>
  <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3802317723662375" data-ad-slot="5762198341"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
  </div>
</div>

<h2 id="firefoxのページ内検索に関するaboutconfig設定">Firefoxのページ内検索に関するabout:config設定</h2>

<p>Firefoxでは<a href="about:config">about:config</a>を開いて値を変更することで
直接ブラウザの設定を変える事が出来ます。
(ただし、いろいろ出来すぎてしまうので問題になる場合もあるのでいじる時は自己責任で。)</p>

<p>検索に関するものなので<code>search</code>とかで探せばあると思いきや
ページ内検索に関するものは<code>find</code>で探すと出てきます。</p>

<p><code>search</code>では<code>browser.search</code>など検索バーに関する設定などが見つかります。</p>

<h2 id="findbar">findbar</h2>

<p>ページ内検索に関わるものとして<code>findbar.*</code>と言うものがあります。</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">設定名</th>
      <th style="text-align: left">型</th>
      <th style="text-align: left">値(初期値)</th>
      <th>意味</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">findbar.entireword</td>
      <td style="text-align: left">真偽値</td>
      <td style="text-align: left">false</td>
      <td>検索時に完全一致にするかどうか</td>
    </tr>
    <tr>
      <td style="text-align: left">findbar.highlightAll</td>
      <td style="text-align: left">真偽値</td>
      <td style="text-align: left">false</td>
      <td>検索時に一致した全てのものをハイライトするかどうか</td>
    </tr>
    <tr>
      <td style="text-align: left">findbar.modalHighlight</td>
      <td style="text-align: left">真偽値</td>
      <td style="text-align: left">false</td>
      <td>モーダルなハイライトをするかどうか</td>
    </tr>
    <tr>
      <td style="text-align: left">findbar.iteretortimeout</td>
      <td style="text-align: left">整数値</td>
      <td style="text-align: left">100</td>
      <td>検索時に該当文字列を探すのに当てる時間のタイムアウト</td>
    </tr>
  </tbody>
</table>

<p><code>entireword</code>がちょっと探して必要だった設定。</p>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail">
  <a href="https://rcmdnk.com/blog/2017/07/14/computer-firefox-vimperator/"><img class="small-thumbnail-img" src="https://rcmdnk.com/images/post/thumbnail/20170714_firefoxfind0_120_90.jpg" width="120" height="90" alt="20170714_firefoxfind0_120_90" /></a>
</div><a class="click_box_link" href="https://rcmdnk.com/blog/2017/07/14/computer-firefox-vimperator/">Firefoxの検索で単語全体でなく一部でも検索出来る様にする</a></div></li></ul>

<p><code>highlightAll</code>を<code>modalHighlight</code>も<code>entireword</code>と同時に
Firefox 50で一応搭載された見たいです。</p>

<p><code>highlightAll</code>はそのままですが、<code>modalHighlight</code>は
こんな感じでその他の部分を暗くして検索一致部分がより強調される様になります。</p>

<p><img src="https://rcmdnk.com/images/post/20170714_firefoxmodal.jpg" alt="firefoxmodal" class="pic" /></p>

<p>最後のはちょっと自信がないですが、多分検索文字を入力した際、
ページ内を検索する際に余りに時間がかかる場合、
この時間(ミリ秒)以上経った場合には中断する、という値だと思います。</p>

<blockquote>
  <p><a href="https://dxr.mozilla.org/mozilla-central/source/toolkit/modules/FinderIterator.jsm">FinderIterator.jsm - DXR</a></p>
</blockquote>

<h2 id="accessibilitytypeaheadfind">accessibility.typeaheadfind</h2>

<p><code>find</code>で検索すると<code>findbar</code>以外に<code>accessibility.typeaheadfind</code>で始まる設定名が見つかります。</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">設定名</th>
      <th style="text-align: left">型</th>
      <th style="text-align: left">値(初期値)</th>
      <th>意味</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">accessibility.typeaheadfind</td>
      <td style="text-align: left">真偽値</td>
      <td style="text-align: left">false</td>
      <td>キー入力時に検索を開始する(Find As You Type, FAYT)</td>
    </tr>
    <tr>
      <td style="text-align: left">accessibility.typeaheadfind.autostart</td>
      <td style="text-align: left">真偽値</td>
      <td style="text-align: left">true</td>
      <td>trueならどのキーを打っても検索開始、falseなら<code>'</code>か<code>/</code>を打った後に検索開始</td>
    </tr>
    <tr>
      <td style="text-align: left">accessibility.typeaheadfind.casesensitive</td>
      <td style="text-align: left">整数値</td>
      <td style="text-align: left">0</td>
      <td>0:大文字小文字関係なし、1:大文字小文字を区別、0/1以外:大文字を入れた場合のみ大文字小文字を区別(所謂smart case)</td>
    </tr>
    <tr>
      <td style="text-align: left">accessibility.typeaheadfind.enablesound</td>
      <td style="text-align: left">真偽値</td>
      <td style="text-align: left">true</td>
      <td>打ち込んだ文字列に該当するものがページ内にない場合にアラート音を鳴らす</td>
    </tr>
    <tr>
      <td style="text-align: left">accessibility.typeaheadfind.enabletimeout</td>
      <td style="text-align: left">真偽値</td>
      <td style="text-align: left">true</td>
      <td><code>timeout</code>の時間だけキー入力がなければ検索を中止する</td>
    </tr>
    <tr>
      <td style="text-align: left">accessibility.typeaheadfind.flashBar</td>
      <td style="text-align: left">整数値</td>
      <td style="text-align: left">1</td>
      <td>1ならテキストが見つかった時に検索バーを点滅させる</td>
    </tr>
    <tr>
      <td style="text-align: left">accessibility.typeaheadfind.linksonly</td>
      <td style="text-align: left">真偽値</td>
      <td style="text-align: left">false</td>
      <td>リンクに含まれるテキストのみを検索する</td>
    </tr>
    <tr>
      <td style="text-align: left">accessibility.typeaheadfind.matchesCountLimit</td>
      <td style="text-align: left">整数値</td>
      <td style="text-align: left">1000</td>
      <td>該当文字列を探す最大数</td>
    </tr>
    <tr>
      <td style="text-align: left">accessibility.typeaheadfind.prefillwithselection</td>
      <td style="text-align: left">真偽値</td>
      <td style="text-align: left">false</td>
      <td><i class="key">Ctrl</i>-<i class="key">F</i>時に選択している文字列がある場合それを検索文字として予め検索窓に入力する</td>
    </tr>
    <tr>
      <td style="text-align: left">accessibility.typeaheadfind.soundURL</td>
      <td style="text-align: left">文字列</td>
      <td style="text-align: left">beep</td>
      <td>アラート音設定(<code>beep</code>/<code>default</code>(Firefox 2.0以前のデフォルト音)/音ファイルへのパス/空(鳴らさない))</td>
    </tr>
    <tr>
      <td style="text-align: left">accessibility.typeaheadfind.startlinksonly</td>
      <td style="text-align: left">真偽値</td>
      <td style="text-align: left">false</td>
      <td>文字列の最初からマッチする場合のみに取る</td>
    </tr>
    <tr>
      <td style="text-align: left">accessibility.typeaheadfind.timeout</td>
      <td style="text-align: left">整数値</td>
      <td style="text-align: left">5000</td>
      <td><code>enabletimeout</code>で検索を中止するまでの時間(ミリ秒)</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p><a href="http://kb.mozillazine.org/Accessibility.typeaheadfind">Accessibility.typeaheadfind - MozillaZine Knowledge Base</a></p>
</blockquote>

<blockquote>
  <p><a href="http://website-archive.mozilla.org/www.mozilla.org/access/access/type-ahead/">Keyboard Feature: Find As You Type</a></p>
</blockquote>

<p><code>accessibility.typeaheadfind</code>は
<strong>環境設定</strong><i class="fa fa-arrow-right"></i>
<strong>詳細</strong><i class="fa fa-arrow-right"></i>
<strong>一般</strong>
にある<strong>アクセシビリティ</strong>の欄の<strong>キー入力時に検索を開始する</strong>(Find As You Type, FAYT)の項目に該当します。</p>

<p>これをチェックすれば
<code>accessibility.typeaheadfind</code>がtrueになります。</p>

<p>なんですが、ここにある他の子設定達は
このFAYTの場合だけでなく
通常の検索時にも影響を与えます。
<code>prefillwithselection</code>なんかは逆にFAYT時には関係ありません。</p>

<p>通常の検索で大文字小文字を区別したい場合にも
<code>accessibility.typeaheadfind.casesensitive</code>の値を0以外の数字にします。</p>

<h2 id="設定ファイルで管理する">設定ファイルで管理する</h2>

<p>これらの設定をブラウザで直接いじっても良いですが、
設定ファイルに書いておくと簡単に新しい環境で
設定できます。</p>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail">
  <a href="https://rcmdnk.com/blog/2016/03/02/computer-firefox-vimperator/"><img class="small-thumbnail-img" src="https://rcmdnk.com/images/post/thumbnail/20160302_setcommand_120_90.jpg" width="120" height="90" alt="20160302_setcommand_120_90" /></a>
</div><a class="click_box_link" href="https://rcmdnk.com/blog/2016/03/02/computer-firefox-vimperator/">Firefoxのabout:config設定を.vimperatorrcで管理する</a></div></li></ul>

<h3 id="userjs">user.js</h3>

<p><strong>user.js</strong>というファイルを作りその中に</p>

<figure class="code"><figcaption><span>user.js  </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="js"><span class="line"><span></span><span class="nx">user_pref</span><span class="p">(</span><span class="s2">&quot;accessibility.typeaheadfind.casesensitive&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>

<p>の様にJavaScriptで<code>user_pref</code>という関数に<strong>設定名</strong>、<strong>値</strong>を入れる様に書いていきます。</p>

<p>このファイルを
Firefoxのユーザープロファイルフォルダに入れます。</p>

<p>Windowsだと</p>

<pre><code>C:\Users\&lt;USER&gt;\AppData\Roaming\Mozilla\Firefox\Profiles\XXXXXXXX.default-XXXXXXXXXXXXX
</code></pre>

<p>Macだと</p>

<pre><code>/Users/&lt;USER&gt;/Library/Application Support/Firefox/Profiles/XXXXXXXX.default-XXXXXXXXXXXXX
</code></pre>

<p>と言ったフォルダになっているはずです。(<code>XXXXX</code>の部分はランダムな文字列)</p>

<p>もし見つからない場合などはFirefoxの
<strong>メニューボタン(ハンバーガーボタン)</strong>
<i class="fa fa-arrow-right"></i>
<strong>ヘルプ(?)ボタン</strong>
<i class="fa fa-arrow-right"></i>
<strong>トラブルシューティング情報</strong>
へ行って
<strong>アプリケーション基本情報</strong>の欄の<strong>プロファイルフォルダー</strong>の項目にある
<strong>フォルダを開く</strong>(Windows)/<strong>Finderに表示</strong>(Mac)ボタンを押すと
<strong>Explorer</strong>/<strong>Finder</strong>に該当フォルダが表示されます<sup id="fninref:1"><a href="#fnin:1" rel="footnote">1</a></sup>。</p>

<p>この中には<strong>prefs.js</strong>と言うファイルがありその中に<code>user_pref</code>の設定が沢山書いてありますが
このファイルはFirefoxで変更した設定を書き込むファイルです。
なのでこれを書き換えることは<strong>about:config</strong>なんかで直接変更するのに近い形になりますが
コアな設定ファイルなのでなるべくいじらない方が安全です。</p>

<p><strong>user.js</strong>というファイルをこのフォルダに入れると<strong>prefs.js</strong>を読み込んだ後に
読み込んで設定を上書きしてくれます。
なので安全に必要な設定を導入することが出来ます。</p>

<h3 id="vimperatorrc">vimperatorrc</h3>

<p>Vimperatorを使ってる場合には<strong>.vimperatorrc</strong>に</p>

<figure class="code"><figcaption><span>.vimperatorrc </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="vim"><span class="line"><span></span><span class="k">set</span><span class="p">!</span> accessibility.typeaheadfind.casesensitive<span class="p">=</span><span class="m">2</span>
</span></code></pre></td></tr></table></div></figure>

<p>の様に<code>set!</code>を使って設定を書いていくことが出来ます。</p>

<p>この設定は上記の<strong>prefs.js</strong>や<strong>user.js</strong>より後に設定されるので
設定の上書きになります。</p>

<p><strong>user.js</strong>だとプロファイルフォルダをわざわざ開けてファイルをコピーしたりしないといけないので
結構面倒ですが、
Vimperatorを使ってるならホームディレクトリにある<strong>.vimperatorrc</strong>に書き込む
だけなのでこちらのが簡単で他との共有も楽に出来るのでおすすめです。</p>

<p>ちなみに上記項目については基本的にデフォルトのままですが
<code>casesensitive</code>だけVimで言う所のsmart case方式にしたいのでその設定を行っています。
他にも手違いで変更した時に戻すようにや、
バージョンが上がった時にデフォルトが変わって動作が変わるのを防ぐために
以下の様なものを書いています。</p>

<figure class="code"><figcaption><span>.vimperatorrc </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="vim"><span class="line"><span></span><span class="k">set</span><span class="p">!</span> accessibility.typeaheadfind<span class="p">=</span>false
</span><span class="line"><span class="k">set</span><span class="p">!</span> accessibility.typeaheadfind.casesensitive<span class="p">=</span><span class="m">2</span>
</span><span class="line"><span class="k">set</span><span class="p">!</span> findbar.highlightAll<span class="p">=</span>false
</span><span class="line"><span class="k">set</span><span class="p">!</span> findbar.entireword<span class="p">=</span>false
</span><span class="line"><span class="k">set</span><span class="p">!</span> findbar.modalHighlight<span class="p">=</span>false
</span></code></pre></td></tr></table></div></figure>

<p>ちなみに<code>highlightAll</code>と<code>modalHighlight</code>に関してですが、
これらは機能としては有効にした方が便利かな、と思う点もあるのですが(特に<code>highlightAll</code>)
Vimperatorの検索の中でこれらを使うと、
<i class="key">Esc</i>で検索を中止してもハイライトがそのまま残ってしまいます。</p>

<p>消すにはリロードするか一度
<i class="key">Ctrl</i>-<i class="key">F</i>で検索バーを出してそれを消す、みたいな作業が必要になります。
なので現状Vimperatorを使う限りこれらのオプションはオフにしておく必要があります。</p>

<h2 id="他の端末と共有する">他の端末と共有する</h2>

<h3 id="設定ファイルを使う">設定ファイルを使う</h3>

<p><strong>user.js</strong>を使ってるなら新しい端末に<strong>user.js</strong>を持っていって
プロファイルに入れます。</p>

<p>Vimperatorを使っているなら<strong>.vimperatorrc</strong>をGitHubのdotfilesレポジトリ
なんかで管理して同じファイルを各端末で使う様にすればOK。</p>

<h3 id="firefox-syncで同期する">Firefox Syncで同期する</h3>

<p>現在のFirefoxではFirefox Syncという機構で
アドオンや一部の設定項目をクラウドで管理して同期させることが出来ます。
<strong>about:config</strong>
の設定も一部は同期されますが全てはされません。</p>

<p>上記<code>accessibility.typeaheadfind.casesensitive</code>なんかは同期されませんが、
これを同期したい場合、</p>

<pre><code>services.sync.prefs.sync.accessibility.typeaheadfind.casesensitive
</code></pre>

<p>と言う設定名を新たに<strong>about:config</strong>で真偽値として作り、
trueにすると同期されます。</p>

<p>これはどれか1つの端末で設定すると他の端末にも伝わって同期されるようになります。</p>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail"><div class="amazon-img">
  <a href="//www.amazon.co.jp/gp/product/4150504032?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=4150504032&amp;linkCode=shr&amp;tag=rcmdnk0c-22" rel="nofollow" target="_blank"><img src="https://images-na.ssl-images-amazon.com/images/I/41vv91DG6VL._SS90_CR0,0,120,90_.jpg" alt="SYNC: なぜ自然はシンクロしたがるのか (ハヤカワ文庫 NF 403 〈数理を愉しむ〉シリーズ)" /></a>
</div></div><a class="click_box_link" href="https://rcmdnk.com/blog/2014/11/16/computer-firefox/">Firefox Syncで通常同期されない個人設定を同期できる様にする方法</a></div></li></ul>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Firefoxの検索で単語全体でなく一部でも検索出来る様にする]]></title>
    <link href="https://rcmdnk.com/blog/2017/07/14/computer-firefox-vimperator/"/>
    <updated>2017-07-14T12:00:00+00:00</updated>
    <id>https://rcmdnk.com/blog/2017/07/14/computer-firefox-vimperator</id>
    <content type="html"><![CDATA[<p>FirefoxではVersion 50からページ内検索に関して<strong>完全一致</strong>というオプションが追加されました。</p>

<p>これは英単語に関していくつかの文字ではなく完全に単語と一致する
ものだけを検索するオプションです。</p>

<p>最近どうも検索の調子がおかしいな、と思ってたら
このオプションのせいだったのでこれを無効化しました。</p>

<!-- more -->

<ul id="markdown-toc">
  <li><a href="#完全一致オプション" id="markdown-toc-完全一致オプション">完全一致オプション</a></li>
  <li><a href="#完全一致オプションを無効にする" id="markdown-toc-完全一致オプションを無効にする">完全一致オプションを無効にする</a></li>
  <li><a href="#いつから有効だったのか" id="markdown-toc-いつから有効だったのか">いつから有効だったのか</a></li>
</ul>
<div class="group"></div>

<div class="center_wrapper">
  <div>
  <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3802317723662375" data-ad-slot="5762198341"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
  </div>
</div>

<h2 id="完全一致オプション">完全一致オプション</h2>

<p>Firefoxでは通常<i class="key">Ctrl</i>-<i class="key">F</i>を押すことで
検索窓が下部に現れ、そこに検索語を入れる事で
ページ内検索が出来ます。</p>

<p><img src="https://rcmdnk.com/images/post/20170714_firefoxfind0.jpg" alt="firefoxfind0" class="pic" /></p>

<p>この時、<strong>完全一致</strong>オプションが有効だと英単語に関して
単語と完全一致しない限りマッチしません。</p>

<p>ここで言う<strong>単語</strong>はスペースやハイフン、スラッシュなどを区切りにしている様です。</p>

<p>例えばプログラム関連で調べ物をしていて、ライブラリの検索で<code>-lssl</code>みたいなものを探したい時、
<code>ssl</code>で検索しも引っかからなくなります。</p>

<p><code>-lssl</code>または<code>lssl</code>とすれば引っかかります。</p>

<h2 id="完全一致オプションを無効にする">完全一致オプションを無効にする</h2>

<p>このオプションを無効にしたい場合は
<i class="key">Ctrl</i>-<i class="key">F</i>で出てくる検索窓の右側にある
<strong>完全一致</strong>という所をクリックすると濃いグレー背景が他と同じ背景になるので
これで無効化されます。</p>

<p><img src="https://rcmdnk.com/images/post/20170714_firefoxfind1.jpg" alt="firefoxfind1" class="pic" /></p>

<p>この設定は<a href="about:config">about:config</a>で</p>

<pre><code>findbar.entireword
</code></pre>

<p>という値が<code>true</code>だと有効、<code>false</code>だと無効です。</p>

<p><code>about:config</code>の方で書き換えても上の<strong>完全一致</strong>の所の
背景が変わります。</p>

<h2 id="いつから有効だったのか">いつから有効だったのか</h2>

<p>このオプションはFirefox 50から追加されたもので、
<code>about:config</code>での初期値は<code>false</code>なので
初期設定は無効になっている様です。</p>

<p>有効にした覚えが無いんですが、
Firefox 50は昨年末にリリースされて半年以上経っていて
この件に関する不快感はここ1ヶ月位感じてるだけな気がするので
やはり自分で変えてしまったんだと思います。</p>

<p>また、これらのオプションはVimperatorにおける検索でもそのまま反映されます。</p>

<p>普段は
<i class="key">Ctrl</i>-<i class="key">F</i>は使わずVimperatorの検索を使っていて
VimperatorではFirefoxの検索窓は出さないまま検索するので
この<strong>完全一致</strong>のオプション部分は普段見ないわけで、
いつの間にか有効になっていてなんか検索しづらいな、と思ってたいながら
変更に気づかなかったわけです。</p>

<p>多分
<i class="key">Ctrl</i>-<i class="key">F</i>を何らかの拍子で使った時、
あるボタンを適当に押してみたりしたのかと。</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Firefox 51対応のVimperator 3.16.0がAdd-ons for Firefoxでも公開]]></title>
    <link href="https://rcmdnk.com/blog/2017/02/27/computer-firefox-vimperator/"/>
    <updated>2017-02-27T00:00:00+00:00</updated>
    <id>https://rcmdnk.com/blog/2017/02/27/computer-firefox-vimperator</id>
    <content type="html"><![CDATA[<p>Firefox 51にアップデートされたことにより一部機能が動かなくなっていたVimperatorですが
Firefox公式のAdd-ons for Firefoxでもアップデート版が公開されきちんと動作する様になっています。</p>

<!-- more -->

<ul id="markdown-toc">
  <li><a href="#-vimperator-3160" id="markdown-toc--vimperator-3160"># Vimperator 3.16.0</a></li>
</ul>
<div class="group"></div>

<div class="center_wrapper">
  <div>
  <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3802317723662375" data-ad-slot="5762198341"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
  </div>
</div>

<h2 id="-vimperator-3160"># Vimperator 3.16.0</h2>

<p>1月にFirefoxの51がリリースされ
e10s (Electrolysis)というマルチプロセス技術が
有効になったことによりVimperatorのタブ関連の機能等が動かなくなっていました。</p>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail">
  <a href="https://rcmdnk.com/blog/2017/01/27/computer-firefox/"><img class="small-thumbnail-img" src="https://rcmdnk.com/images/MacApp/thumbnail/Firefox_120_90.png" width="120" height="90" alt="Firefox_120_90" /></a>
</div><a class="click_box_link" href="https://rcmdnk.com/blog/2017/01/27/computer-firefox/">Firefox 51で使えなくなったVimperatorのtabopenなど一部機能を自分で実装する</a></div></li></ul>

<p>その後、これを修正するPull RequestがGitHubのレポジトリに入り
取り入れられてGitHubのレポジトリページには新しい3.16.0が2月頭に公開されました。</p>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail">
  <a href="https://rcmdnk.com/blog/2017/02/01/computer-firefox-vimperator/"><img class="small-thumbnail-img" src="https://rcmdnk.com/images/MacApp/thumbnail/Firefox_120_90.png" width="120" height="90" alt="Firefox_120_90" /></a>
</div><a class="click_box_link" href="https://rcmdnk.com/blog/2017/02/01/computer-firefox-vimperator/">VimperatorのFirefox 51対応が公式レポジトリに反映された</a></div></li></ul>

<p>ただ正式にFirefoxの審査を抜けるにはちょっと時間がかかるみたいで
どうしても使いたい場合は上の署名なしのビルドを自分で署名を追加して使う必要がありました。
(現在のFirefoxでは署名なしのものはインストール出来ないため。)</p>

<p>この3.16.0ですが、2月18日にAdd-ons for Firefox(AMO)でも審査を通過し公開された様です。</p>

<blockquote>
  <p><a href="https://addons.mozilla.org/ja/firefox/addon/vimperator/">Vimperator :: Add-ons for Firefox</a></p>
</blockquote>

<p>ちなみに
<a href="https://addons.mozilla.org/ja/firefox/">Add-ons for Firefox</a>
を<strong>AMO</strong>と呼ぶのを今更ながら知りました。
(色々なところでAMOでは~みたいなのがあってなんのことやらと思っていましたが。)</p>

<p>ここには
最終更新日2月1日となっていますが、どうもこれは審査を請求した日みたいで、
FirefoxのアドオンページからVimperatorを検索すると2月18日に更新したと出てくるので
この日に公開された様です。</p>

<p>上記のGitHubで公開されてるバージョンを入れてる人も居るかと思いますが、
そのままだとアップデートが自動でされなかったり、
またFirefox Syncで同期出来ない状態になってるので
Add-ons for Firefoxで公開されてるものに入れ直した方が良いです。</p>

<p>ただ、いずれにしろ現状では11月に来る
WebExtensionsベースではないアドオンの無効化導入により
Vimperatorは動かなくなってしまいます。</p>

<p>この問題は随分前から分かっていた事ではあるのですが
なかなか人手が無くて解決に向けて進んで居ませんでした。</p>

<p>ですが、今回のe10sのアップデートでの動作停止によって火が付いたみたいで、
ちょっとこの辺りに盛り上がりを見せています。</p>

<p><a href="https://github.com/vimperator/vimperator-labs/issues/705">Port to WebExtension · Issue #705 · vimperator/vimperator-labs</a></p>

<p>この中にもありますが、
Vim機能を拡張機能として取り入れようとしているアドオンは今では結構沢山あります。</p>

<p>Google Chromeにもそう言ったアドオンが沢山あります。</p>

<p>それらのアドオンの中には既にWebExtensionsに対応したものもあり、
この辺の情報も共有したいな、ということで
Vim拡張アドオンに関するチャットルームが作られています。</p>

<p><a href="https://gitter.im/vim-webextension/Talk">vim-webextension/Talk - Gitter</a></p>

<p>作られてすぐにちょっと話をしてそれから以後会話が一切出てませんが。。。</p>

<p>Vim機能を拡張機能として入れているアドオンは
今では結構色々ありますがVimperatorの特徴は何と言ってもコマンドラインが使える所です。</p>

<p>単に<code>open</code>コマンドだけであればURLバーにフォーカスを当てれば同じ様な動作になりますが
Vimperatorでは他にも色々なコマンドがあったり自分でもプラグインなどで追加出来ます。
この辺、使って無ければ他のアドオンでも良いしChromeのVim拡張でもやりたいこと出来ると思いますが、
色々コマンドラインの機能を使ってるとやはりVimperatorから離れられません。</p>

<p>のでなんとかこの辺の話がまとまってうまいこと言って11月までに間に合う様に祈っています(他人任せ)。</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[VimperatorのFirefox 51対応が公式レポジトリに反映された]]></title>
    <link href="https://rcmdnk.com/blog/2017/02/01/computer-firefox-vimperator/"/>
    <updated>2017-02-01T13:00:00+00:00</updated>
    <id>https://rcmdnk.com/blog/2017/02/01/computer-firefox-vimperator</id>
    <content type="html"><![CDATA[<p>Firefox 51になって一部機能が効かなくなっていたVimperatorですが、
対応するためのPull Requestが作られて公式レポジトリに取り入れられました。</p>

<!-- more -->

<ul id="markdown-toc">
  <li><a href="#firefox-51対応アップデート" id="markdown-toc-firefox-51対応アップデート">Firefox 51対応アップデート</a></li>
  <li><a href="#firefoxアドオンの今後" id="markdown-toc-firefoxアドオンの今後">Firefoxアドオンの今後</a></li>
  <li><a href="#まとめ" id="markdown-toc-まとめ">まとめ</a></li>
</ul>
<div class="group"></div>

<div class="center_wrapper">
  <div>
  <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3802317723662375" data-ad-slot="5762198341"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
  </div>
</div>

<h2 id="firefox-51対応アップデート">Firefox 51対応アップデート</h2>

<div class="postscript">
  <p><strong>追記: 2017/02/27 </strong></p>

  <p>現在は既にFirefox 51に対応したVimperator3.16.0が正式に公開されています。</p>

  <ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail">
  <a href="https://rcmdnk.com/blog/2017/02/27/computer-firefox-vimperator/"><img class="small-thumbnail-img" src="https://rcmdnk.com/images/MacApp/thumbnail/Firefox_120_90.png" width="120" height="90" alt="Firefox_120_90" /></a>
</div><a class="click_box_link" href="https://rcmdnk.com/blog/2017/02/27/computer-firefox-vimperator/">Firefox 51対応のVimperator 3.16.0がAdd-ons for Firefoxでも公開</a></div></li></ul>

  <p><strong>追記ここまで</strong></p>
</div>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail">
  <a href="https://rcmdnk.com/blog/2017/01/27/computer-firefox/"><img class="small-thumbnail-img" src="https://rcmdnk.com/images/MacApp/thumbnail/Firefox_120_90.png" width="120" height="90" alt="Firefox_120_90" /></a>
</div><a class="click_box_link" href="https://rcmdnk.com/blog/2017/01/27/computer-firefox/">Firefox 51で使えなくなったVimperatorのtabopenなど一部機能を自分で実装する</a></div></li></ul>

<p>上で書いたように現在のVimperator 3.15.0はFirefox 51では
<code>tabopen</code>などタブに関連する項目やHit-a-Hintの機能がきちんと動きません。</p>

<p>上のポストでは取り敢えずタブ周りはなんとなくごまかせてましたがHit-a-Hintは使えない状態。</p>

<p>そんな中、これらを直すPull Requestが作られ公式に取り入れられました。</p>

<blockquote>
  <p><a href="https://github.com/vimperator/vimperator-labs/pull/675">Fix #568: loading the tabs module failed by ma8ma · Pull Request #675 · vimperator/vimperator-labs</a></p>
</blockquote>

<p>この問題は随分前から分かっては居たけど開発者の人たちが対応しきれてなかった、と言う感じみたいです。</p>

<blockquote>
  <p><a href="https://github.com/vimperator/vimperator-labs/issues/211">Add support for e10s (electrolysis) · Issue #211 · vimperator/vimperator-labs</a></p>
</blockquote>

<p>とりあえず上のアップデートでFirefox 51では動く様になっています。</p>

<p>まだ公式のリリースが無いので、今すぐに使いたい場合には自分でビルドする必要があります。</p>

<blockquote>
  <p><a href="https://github.com/vimperator/vimperator-labs/issues/568#issuecomment-275891186">Tabs module doesn’t work in Firefox 51 (not e10s) · Issue #568 · vimperator/vimperator-labs</a></p>
</blockquote>

<p>これに沿ってやってみます。</p>

<p>まず、
<a href="https://addons.mozilla.org/ja/firefox/">Add-ons for Firefox</a>
に行って上にある<strong>ユーザー登録</strong>からユーザー登録を行う必要があります。
ただし、Firefox Syncとかを使ってる場合にはそのアカウントが有効なのでそれでログイン出来ます。</p>

<p>ユーザー登録できたら
<a href="https://addons.mozilla.org/en-US/developers/addon/api/key/">Manage API Keys</a>
に行って鍵を作ります。</p>

<p>ISSUERとして<code>user:xxxx</code>みたいなものとSECRETとしてランダムな文字列が得られるはずです。</p>

<p>これらをメモしておいて、公式レポジトリをcloneしてビルドします。</p>

<pre><code>$ git clone git@github.com:vimperator/vimperator-labs.git
$ cd vimperator-labs/vimperator
$ cp private.properties.in private.properties
</code></pre>

<p>ここで、<strong>private.properties</strong>の内容が</p>

<figure class="code"><figcaption><span>private.properties </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="properties"><span class="line"><span></span><span class="na">VERSION</span>       <span class="o">:</span><span class="s">= $(VERSION).$(shell date &#39;+%Y%m%d%H%M%S&#39;)</span>
</span><span class="line"><span class="na">UUID</span>           <span class="o">=</span> <span class="s">&lt;your UUID&gt;</span>
</span><span class="line"><span class="na">AMO_API_KEY</span>    <span class="o">=</span> <span class="s">&lt;your API key&gt;</span>
</span><span class="line"><span class="na">AMO_API_SECRET</span> <span class="o">=</span> <span class="s">&lt;your API secret&gt;</span>
</span><span class="line"><span class="na">UPDATE_URL</span>     <span class="o">=</span> <span class="s">&lt;your updateURL if available&gt;</span>
</span><span class="line"><span class="na">UPDATE_URL_XPI</span> <span class="o">=</span> <span class="s">&lt;link to update XPI&gt;</span>
</span></code></pre></td></tr></table></div></figure>

<p>こんな感じになってるのですが、<code>AMO_API_KEY</code>、<code>AMO_API_SECRET</code>に関しては
上でメモしたISSUERとSECRETを入れます。</p>

<p><code>VERSION</code>はそのままでOK。<code>UPDATE_URL</code>、<code>UPDATE_URL_XPI</code>は空白に。</p>

<p>残りはUUIDなのですが、上のインストラクションだと<code>vimerator@&lt;uniqueid&gt; # e.g. vimperator@&lt;yourdomain&gt;</code>となってるんですが
これがよく分かってません。。。</p>

<blockquote>
  <p><a href="https://blog.halpas.com/archives/8404">FirefoxアドオンのIDを変更する方法【重複ID対策】  ハルパス</a></p>
</blockquote>

<p>を見るとユニークな文字列なら良い様な感じなので、
上のページの中にある
<a href="http://www.somacon.com/p113.php">Generate GUID Online</a>
にアクセスしてGUIDを1つ作って<strong>private.properties</strong>のUUIDに入れます。</p>

<p>公式ではここが<code>vimperator@vimperator.org</code>みたいになってるんですが、これを入れると当然他の人が使ってる、と言われて上手くいきませんでした。</p>

<p>ちょっとこの辺は自己責任でやってもらうとして、
ファイルを書き直したら、<code>make</code>します。</p>

<p><code>make</code>する際に
<a href="https://github.com/mozilla-jetpack/jpm">jpm</a>
が必要なのでそれを別途インストールしておく必要があります。</p>

<pre><code>$ npm install -g jpm
</code></pre>

<p>準備できたらサイン付きのxpiを作るために</p>

<pre><code>$ make sign
</code></pre>

<p>すると、<strong>vimperator-labs/downloads</strong>というディレクトリが出来ていて、
その中に<strong>vimperator-3.15.0.XXXXXXXXXXXXXX-signed.xpi</strong>みたいなファイルが出来ていて
これが署名付きアドオンファイルになります。</p>

<p>後はこれを右クリック等からFirefoxで開きます。
上手く行ってればアドオンをインストールするかどうか聞かれるのでインストール。</p>

<p>再起動すれば<code>tabopen</code>等が正しく動くVimperatorが入っているはずです。</p>

<p>ちなみにこの前同じようなことをFork版のレポジトリで試したら
<strong>このアドオンは壊れているため、インストールできませんでした。</strong>みたいなエラーが出てできませんでした。</p>

<p>公式のレポジトリと比べると、コードは全く一緒の状態になっていたので、
試しにもう一回ビルドして入れてみるとなんと今度は何も問題なく。。。何が問題だったのかよく分かりませんが、
取り敢えず現在公式のmasterブランチにあるものは自分でコンパイルすると使えます。</p>

<h2 id="firefoxアドオンの今後">Firefoxアドオンの今後</h2>

<p>Firefox 51のe10sに関するアップデートに関しては取り敢えず解決したようで、
後は公式のリリースがMozillaに認証されるのを待つ形になりました。</p>

<p>これには数日とかちょっと時間がかかる可能性もあるので、
どうしても今すぐ使いたい、と言う場合には上の様に自分でビルドすることで使えます。</p>

<p>なんですが、どうも今年はFirefoxの大きな転換期になるような感じで、
いろいろなアドオンがそのままでは使えなくなる感じになっています。</p>

<blockquote>
  <p><a href="https://github.com/vimperator/vimperator-labs/issues/211">Add support for e10s (electrolysis) · Issue #211 · vimperator/vimperator-labs</a></p>
</blockquote>

<blockquote>
  <p><a href="https://blog.mozilla.org/addons/2016/11/23/add-ons-in-2017/">Add-ons in 2017  Mozilla Add-ons Blog</a></p>
</blockquote>

<p>Firefox 57から<a href="https://developer.mozilla.org/ja/Add-ons/WebExtensions">WebExtensions</a>ベースでない
アドオンが利用不可になるということで、
Vimperatorもこのままだと使えなくなります。
Firefox 57は今年の11月頃にリリース予定になっています。</p>

<p>先日、
<a href="https://addons.mozilla.org/ja/firefox/addon/the-fox-only-better/">Beyond Australis</a>
というFirefoxの見た目をスリムにしてくれるアドオンの作者の人も
この変更には対応できないのでここまで、という話を出しています。</p>

<blockquote>
  <p><a href="http://fasezero.com/">I cannot continue working on my add-ons anymore. I’m sorry, but it’s time.</a></p>
</blockquote>

<p>このアドオン(最初はThe Fox, Only Betterと言う名前だった)も結構長いこと使ってて
無いと不便だなと感じるものです。</p>

<ul class="post_card"><li class="index_click_box"><div class="group"><div class="title-small-thumbnail">
  <a href="https://rcmdnk.com/blog/2014/05/17/computer-firefox/"><img class="small-thumbnail-img" src="https://rcmdnk.com/images/post/thumbnail/20140517_firefox_nobar_120_90.jpg" width="120" height="90" alt="20140517_firefox_nobar_120_90" /></a>
</div><a class="click_box_link" href="https://rcmdnk.com/blog/2014/05/17/computer-firefox/">Firefox 29でナビゲーションツールバーを隠す</a></div></li></ul>

<p>他のアドオンも使えなくなるものは多いと思います。</p>

<p>なので今年の11月には結構な混乱が起こりそう。いっそChromeとかに移る人も多いかも。。。</p>

<h2 id="まとめ">まとめ</h2>

<p>とりあえずVimperatorはFirefox 51に対応することは出来たようで、
現在新しいリリースの認証待(またはその準備中)になっています。</p>

<p>今すぐ使いたい場合には公式レポジトリのmasterブランチの最新のものを自分でビルドすれば使える様になります。</p>

<p>ただ先を考えると次は11月に大きな転換期を迎える様で、
Vimperatorのみではなくていろいろなアドオンが動かなくなるかもしれません。</p>

]]></content>
  </entry>
  
</feed>
