<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: Dropbox | rcmdnk's blog]]></title>
  <link href="http://rcmdnk.github.io/blog/tags/dropbox/atom.xml" rel="self"/>
  <link href="http://rcmdnk.github.io/"/>
  <updated>2013-08-29T13:35:49+02:00</updated>
  <id>http://rcmdnk.github.io/</id>
  <author>
    <name><![CDATA[rcmdnk]]></name>
    <email><![CDATA[rdmdnk@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[KDriveのサービス終了でオンラインストレージ使用について考えてみる]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/08/23/computer/"/>
    <updated>2013-08-23T09:43:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/08/23/computer</id>
    <content type="html"><![CDATA[<p>オンラインストレージサービスのKDriveが個人向けサービスを終了するようです。</p>

<!-- more -->


<p><br class="clearBoth">

<h1>Contents</h1>
{:TOC}

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3802317723662375";
/* imgRectMid */
google_ad_slot = "9043394444";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>



<!--      Fluct グループ名「rcmdnk's blog：336x280（記事中）」      -->
<script type="text/javascript" src="http://sh.adingo.jp/?G=1000013152&guid=ON"></script>
<!--      Fluct ユニット名「rcmdnk's blog：336x280（記事中）」     -->
<script type="text/javascript">
//<![CDATA[
if(typeof(adingoFluct)!="undefined") adingoFluct.showAd('1000017961');
//]]>
</script>



</p>

<h1 id="KDrive終了">KDrive終了</h1>

<p>KDriveはアカウント作るだけで40GB無料で使え、さらにログイン等の簡単な作業だけで
50GBまで増えるオンラインストレージサービスなので、
一応アカウント作って、あまり重要でないけど
外から見たくなったら見えたら嬉しい、的な物を
メインのPCのみでバックアップも兼ねて同期して使ってました。</p>

<p>それがサービスを終了するようです。
<a href="http://info.kingsoft.jp/company/information/2013/08/20130823.html">キングソフトからのお知らせ</a>
によると、2013/9/2に新規アカウント停止、9/25日には無料版はアップロード停止、
さらに2014/2/28にはログインもできなくなる模様。
有料版でも2014/8/29で全て終了するみたいです。</p>

<p>法人向けサービスは続くみたいですが、やはり、50GBを簡単に無料で提供する、と言うのは
なかなか成り立つものではないのでしょうかね。
今やオンラインストレージサービスはいたるところにあるので、
有料で使うくらいなら他を使うし、無料で取り敢えず50GBだけ使ってるって人が
多かったんでしょうか？
ちょっと前に30GB無料とかやってたNドライブも<a href="http://ndrive.naver.jp/notice?page=1&amp;docId=4005">終了のアナウンス</a>出してましたが。</p>

<h1 id="乗り換え先">乗り換え先</h1>

<p>乗り換え先としては時々キャンペーンで50GBの振る舞いをしてた時に取った
Boxかな、と思って久々に開いてみたら削除された。。。
<a href="https://app.box.com/legal_text/tos">120日間ノーアクセスだと消されるようですね</a>。
いずれにしろ無料だと最大ファイルサイズが250MBなので使い道が限られるため、
あまり使い勝手が良くないかもしれません。</p>

<p>探してみたら色々ありすぎて大変な状況ですが、同じくらいの量を無料で、となると
<a href="http://www.adrive.com/">ADrive</a>辺りですが、無料だとデスクトップクライアントも
使えないので自動で同期したりすることは出来なそうです。</p>

<p>それであれば、同様にMEAGAUPLOADの後継？の<a href="https://mega.co.nz/">Mega</a>
なんかも50GB使えますが、流石に微妙な所。</p>

<p>差し当たり同じ様な量を同じように使える感じの所はない感じです。
ので、ちょっと別の方向で考えようかな、と。</p>

<h1 id="メインで使っているオンラインストレージ">メインで使っているオンラインストレージ</h1>

<div class="nailthumb-container title-thumb">
  <a href="https://www.dropbox.com/" rel="nofollow" target="_blank" >
    <img src="/images/WinApp/Dropbox.png" alt="" title="" >
  </a>
</div>


<p>今、オンラインストレージはDropboxをメインに使っていて、これは大分無料でも
容量が増えたので手持ちのマシンで色々共有するのに使っています。
20GB程度まで増えてるので、それなりに必要な物は充分共有できてます。</p>

<p>ですがそれでも20GB程度なので、ちょっと大きな物を取り敢えず入れておこう、というわけにはいきません。</p>

<p>SugerSyncやGoogle Drive等色々使えば増えますが、細切れで入れてくのも
管理が面倒になるので避けたいところです。(SugerSyncはあまり容量が増えてないので。。。)</p>

<h1 id="人のサーバーを通さないオンライン共有">人のサーバーを通さないオンライン共有</h1>

<p>上に挙げた物は<code>オンラインストレージ</code>で、サーバーを借りて
ファイルを入れておき、そこと手元のマシンで同期したりダウンロードしたり
する感じですが、最近、そのような環境をオンラインサーバーを通さず
に作れる様な物も出てきました。</p>

<h2 id="AeroFS">AeroFS</h2>

<div class="nailthumb-container title-thumb">
  <a href="https://www.aerofs.com/" rel="nofollow" target="_blank" >
   <img class="left" src="/images/WinApp/AeroFS.png" >
  </a>
</div>


<p><a href="https://aerofs.com/">AeroFS</a>はDropboxの様なファイル同期を
サーバーを通さず行います。
前にあったWindows Live Meshみたいなものです。
ちょっと前までベータ版で招待制でしたが、今は正式版ですぐに登録できます。</p>

<p>登録すると、各マシンからのアクセス等、ユーザー管理はAeroFSで行いますが、
ファイル自体はP2Pで受け渡しが行われるので完全にPrivateです。
サーバーに置いておくわけではないので、Google Driveで騒ぎになった
所有権の問題も全く関係ありえません。</p>

<p>一方、サーバー通さないので、例えば2つのマシンで共有したい時は
両方が同時に起動してないと同期できません。
一台ファイルサーバー的に常時起動しておくマシンがあればDropboxに限りなく近く
使えると思います。</p>

<p>サーバーを通さないので、基本的に自分の持っているディスク分だけいくらでも
共有可能で制限はありません。</p>

<p>履歴などの機能もありますが、これもローカルディスクに作るので、その分
ディスクは圧迫しますが、逆にディスクさえ充分あればいくらでもできます。</p>

<p>また、Share機能もあって、ファイルをShare設定しておけば
他の人ともAeroFSでフォルダを共有できる用にもなります。</p>

<p>今は一部のPCで比較的大きなファイルの共有をするのに使っています。</p>

<p>ただ、これだとWebインターフェースからファイルにはアクセス出来ないので、
AeroFSのアプリケーションを入れてないとファイルにアクセス出来ません。
それからiOS用のアプリがないので、現状iPhone等からアクセスする手段はありません。
Android版はあるみたいです。</p>

<p>ですので、完全に同期、共有化のためのシステムな感じです。</p>

<h2 id="ownCloud">ownCloud</h2>

<div class="nailthumb-container title-thumb">
  <a href="https://www.aerofs.com/" rel="nofollow" target="_blank" >
    <img class="left" src="/images/WinApp/owncloud.png" >
  </a>
</div>


<p><a href="http://owncloud.org/">ownCloud</a>はAeroFSと違いDropboxのような環境を
自前で作ってしまおう、と言った形のシステムです。
サーバーを自分で作って、そこにクライアントからアクセスします。</p>

<p>ですので、この場合には1台常時起動しているシステムが必須です。
AeroFSの場合は、例えば3台持ってたらそのうち2台ずつでも起動していれば
結果的に全て同期できますが、ownCloudではサーバーを動かしておくための
マシンが必要です。</p>

<p>その代わり、webサーバーを立ち上げて、Dropboxの様にWebアクセスも出来る様になります。
なので、完全にDropboxのようなオンラインストレージサービスを自分で
持つことが出来ます。ユーザー管理等も勿論自前なので、
完全に独立したPrivateな環境を作ることが出来ます。</p>

<p>前に見た時はサーバーがLinux専用で、自分で常時起動しておけるLinuxマシンが無かったので
試してませんでしたが、今はWindowsやMac用もあるみたいなので、そのうち試して見たいと思ってます。</p>

<p>サーバーにするのに固定IPが必要ですが、<a href="http://www.noip.com/">No-IP</a>
の様なサービスを使えば、ドメインを貰えて、そのドメインとマシンのIP
を定期的に同期し続ける事が出来るので、 擬似的に固定IPを使える様な形になり、
無理に固定IPサービスをプロバイダに頼まなくても使えます。(でないと無駄に1000円くらいするので…)</p>

<p>ownCloudで検索した時に<a href="http://owncloud.com/">http://owncloud.com/</a>も出てきましたが、
orgの方が元々立ち上げられたコミュニティのためのページで、
comの方はowonCloudを使ったサービスを提供する企業のページ、ということみたいです<sup id='fnref:1'><a href='#fn:1' rel='footnote'>1</a></sup><sup id='fnref:2'><a href='#fn:2' rel='footnote'>2</a></sup>。</p>

<p>ちなみに日本でもビーグッド・テクノロジーと言う会社が<a href="http://owncloud.jp/">http://owncloud.jp/</a>というドメインを取得してサポート等を提供しているみたいです。</p>

<p>ownCloudはかなり活発に開発が行われてて大分使いやすそうなので、
DropboxやAeroFSで使ってる部分はそのままにして、
KDriveで行っていた作業的なものは、1台古いPCをファイルサーバーにしてしまって
ownCloudで行おうかな、と思ってます。
速度の問題さえ無ければDropbox分も移行しても良いかもしれません。
ハードディスクも大分安くなったので、そのサーバーで適当にバックアップを
取っておけば便利ですし。
完全にサーバー化するならLinuxにしておいた方が便利かな、とも思います。
そのうちやろう…</p>

<hr />

<p><div class="footnotes">
	<ol>
		<li id='fn:1'><p><a href="http://forum.owncloud.org/viewtopic.php?f=17&amp;t=8594">Difference .ORG and .COM</a>
  <a href='#fnref:1' rev='footnote'>↩</a></p>
</li><li id='fn:2'><p><a href="http://sourceforge.jp/magazine/11/12/15/0513233">オンラインストレージソフトウェアの商用サービスを提供する「ownCloud.com」設立。サービス開始は3か月後を予定</a>
<a href='#fnref:2' rev='footnote'>↩</a></p>
</li>
	</ol>
</div>
</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iPhoneでMailboxとDropboxを連携して1GBゲット]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/08/18/computer-ios-dropbox/"/>
    <updated>2013-08-18T15:49:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/08/18/computer-ios-dropbox</id>
    <content type="html"><![CDATA[<p><a href="https://www.dropbox.com/">Dropbox</a>の新たなキャンペーンとして、
<a href="https://itunes.apple.com/jp/app/mailbox/id576502633?mt=8">Mailbox</a>
と連携することで1GBゲットできるキャンペーンが始まったようなので<sup id='fnref:1'><a href='#fn:1' rel='footnote'>1</a></sup>
Mailboxを入れてゲットしていみました。</p>

<!-- more -->


<p><br class="clearBoth">

<h1>Contents</h1>
{:TOC}

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3802317723662375";
/* imgRectMid */
google_ad_slot = "9043394444";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>



<!--      Fluct グループ名「rcmdnk's blog：336x280（記事中）」      -->
<script type="text/javascript" src="http://sh.adingo.jp/?G=1000013152&guid=ON"></script>
<!--      Fluct ユニット名「rcmdnk's blog：336x280（記事中）」     -->
<script type="text/javascript">
//<![CDATA[
if(typeof(adingoFluct)!="undefined") adingoFluct.showAd('1000017961');
//]]>
</script>



</p>

<h1 id="Dropboxの容量増加ページを見てみると">Dropboxの容量増加ページを見てみると</h1>

<p>Web上のDropboxの自分のホームから上にある<code>無料で容量アップ</code>の項目に行くと、
次の様な項目が追加されています。</p>

<p><img src="/images/post/20130818_dropbox_mailbox.png" "" ""></p>

<p>iPhoneなどiOSでMailboxを連携させると1GB貰えるようです。
(Androidは今のところ話無しの様。)</p>

<h1 id="Mailboxをインストールしてみる">Mailboxをインストールしてみる</h1>

<p>一時期Gmailの新しいメールクライアントとして登録することに行列を作るという
様なことをやっていたMailboxですが、
基本的な思想はInboxにあるメールに手動で簡単にいつ読むか、重要度などを設定出来るのが
強みだと思いますが、
Gmailだけ対応なのと、手動で振り分けする前にラベルで振り分けで充分
(逆に手動でやってられない)ので使ってませんでした。</p>

<p>ということで、無料なので取り敢えずApple StoreからiPhoneにインストール。</p>

<p>Googleアカウントと紐付けようとした所、Gmailとの連携時に
<code>IMAP Folders Disabled    Mailbox needs access to your IMAP folders in order to sync your data. Please enable your AllMail, Snet, Trash and [Mailbox] folders in Gmail settings and try again.</code>と言ったエラーが出て進めない。</p>

<p>Gmailの設定を見てみると<sup id='fnref:2'><a href='#fn:2' rel='footnote'>2</a></sup>、IMAPは有効にしてあったのですが、
<code>すべてのメール</code>(<code>AllMail</code>)で<code>IMAPで表示</code>のチェックが外れてました。
基本、すべてのメールにラベル付けしているので、
普段、PCのメールクライアントで見るときに、すべてのメールも同期すると
余計に未読数が増えて見えたり、すべてローカルに取ってくる設定だと
重複してしまうのでこの設定は外してました。</p>

<p>ので、一時的にここにチェックを入れてiPhoneでMailboxを再び試してみると
上手く行きました。
後は、設定からDropboxとの連携をポチッとするだけ。(Dropboxは当然インストールされてるとして。)</p>

<p>これで、Dropboxのページを見ると、
獲得したボーナス容量のページに<code>Linking with the Mailbox app</code>として1GB追加されてました。</p>

<p>ちなみに、Mailboxで最初連携ができなかった時、<code>[Mailbox]</code>というラベルを
Gmail側に作れば良い、という様なのをいくつか見かけましたが、
現在はこれは作らなくて良いようです。(MailboxとGmailを連携した後このラベルは自動で作られる様。)</p>

<p>試しにちょっとMailboxを使ってみましたが、一度手動でいつ見るか振り分ける、
という作業をGmailだけでそれもiPhone上でやる気にならないのでやはり使わないかな、と。
GmailだけじゃなくてIMAPやExchange等全般的に対応してデスクトップクライアントも
あればその機能そのものは割と使いこなせば便利だとは思うのですが。。。</p>

<hr />

<p><div class="footnotes">
	<ol>
		<li id='fn:1'><p><a href="http://lifehacker.com/mailbox-users-can-get-a-free-gigabyte-of-dropbox-space-1159534393">Get 1GB of Free Dropbox Space with Mailbox for iOS</a>
  <a href='#fnref:1' rev='footnote'>↩</a></p>
</li><li id='fn:2'><p>Gmailページの左のラベル一覧の一番下にある<code>ラベルの管理</code>からチェック。
<a href='#fnref:2' rev='footnote'>↩</a></p>
</li>
	</ol>
</div>
</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Git + Dropbox使用時の注意点]]></title>
    <link href="http://rcmdnk.github.io/blog/2013/05/12/computer-octopress-git-github-dropbox/"/>
    <updated>2013-05-12T20:57:00+02:00</updated>
    <id>http://rcmdnk.github.io/blog/2013/05/12/computer-octopress-git-github-dropbox</id>
    <content type="html"><![CDATA[<p>OctopressのファイルはDropboxに入れて管理していて、
複数の端末からアップデートすることがあります。</p>

<p>先日<code>rake deploy</code>してもページがアップデートされないな、
と思っていたらgitで<code>commit</code>/<code>push</code>するときにエラーが出ていました。
(<code>generate</code>した時のエラーは気をつけますが<code>deploy</code>時は
ちゃんと見てなかった。。。)
ついでにcygwin上でのパーミッション等についても調べたので
まとめておきます。</p>

<!-- more -->


<p><br class="clearBoth">

<h1>Contents</h1>
{:TOC}

<script type="text/javascript"><!--
google_ad_client = "ca-pub-3802317723662375";
/* imgRectMid */
google_ad_slot = "9043394444";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>



<!--      Fluct グループ名「rcmdnk's blog：336x280（記事中）」      -->
<script type="text/javascript" src="http://sh.adingo.jp/?G=1000013152&guid=ON"></script>
<!--      Fluct ユニット名「rcmdnk's blog：336x280（記事中）」     -->
<script type="text/javascript">
//<![CDATA[
if(typeof(adingoFluct)!="undefined") adingoFluct.showAd('1000017961');
//]]>
</script>



</p>

<h1 id="Dropboxでの競合エラー">Dropboxでの競合エラー</h1>

<p>ちゃんと見れば簡単なことなのですが、次の様なエラーが起っていました。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;h2 id="copying+public+to+_deploy">copying public to _deploy&lt;/h2>
</span><span class='line'>
</span><span class='line'>&lt;p>$ rake deploy
</span><span class='line'>...&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>cp -r public/. &lt;em>deploy
</span><span class='line'>cd &lt;/em>deploy&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;h2 id="Commiting:+Site+updated+at+2013-05-11+16:59:45+UTC">Commiting: Site updated at 2013-05-11 16:59:45 UTC&lt;/h2>
</span><span class='line'>
</span><span class='line'>&lt;p>fatal: Reference has invalid format: 'refs/heads/master (XXXX の競合コピ ー 2013-05-10)'&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;h2 id="Pushing+generated+_deploy+website">Pushing generated _deploy website&lt;/h2>
</span><span class='line'>
</span><span class='line'>&lt;p>fatal: Reference has invalid format: 'refs/heads/master (XXXX の競合コピ ー 2013-05-10)'&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;h2 id="Github+Pages+deploy+complete">Github Pages deploy complete&lt;/h2>
</span><span class='line'>
</span><span class='line'>&lt;p>cd -
</span><span class='line'>fatal: The remote end hung up unexpectedly</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>よく見ればちゃんと<code>fatal</code>と言ってるんですが、
ローカルで<code>preview</code>チェックはOKだったので<code>deploy</code>コマンド打って
ブラウザでチェック、まではもう深く考えない流れ作業なので、
ブラウザを何度更新してもアップデートされないな、とちょっと悩んでしまいました...</p>

<p>問題は<code>_deploy/.git/refs/heads/</code>以下に上に出ている
<code>master (XXXX の競合コピー 2013-05-10)</code>と言う名前のファイルが出来ていて、
gitが変なファイルがあって分からない、と言っている訳です。</p>

<p>このファイルは、Dropboxで競合が起こった時に上手くマージ出来なかった時に
作られます。
今回は片方の端末でDropboxがちょっと落ちていた時があって、
その間にもOctopress内をアップデートしてしまったのが原因だと思います。</p>

<p>取り敢えず、この<code>master</code>以外にもいくつか競合コピーがあったので
全て削除したら文句を言われなくなりましたのでOKです。</p>

<p>Dropbox内なので、最悪上手くいかなくても復元出来るので取り敢えず消してしまいましたが、
安全を取るならバックアップを取っておくべきかもしれません
(この程度のことならば冗長かもしれませんが)。</p>

<h1 id="Dropboxでのファイルパーミッションの問題(各OSでのパーミッションについて)">Dropboxでのファイルパーミッションの問題(各OSでのパーミッションについて)</h1>

<p>ついでに、これまで何度かファイルのパーミッションがおかしくて
手で権限変更したりする必要があって気になっていたことがあったので
調べてみました。</p>

<p>通常、Dropbox内でのファイルをExploerとかから見る場合は
読み取り実行など問題ありません。</p>

<p>ただ、Macでターミナルから見たり、Windowsでcygwinからファイルを
見たりするとそれぞれのパーミッションが違って見えます。</p>

<p>最初はMacとWindows(cygwin)
で使っているとそれぞれでパーミッションの構造自体が単に違うだけかな、
とか思っていたんですが、
どうやらDropboxでは基本的にファイルやディレクトリのパーミッションは
伝播されず、1つの端末でパーミッションを変更しても
他の端末では反映されません。(Windows同士でも反映されませんでした。)</p>

<p>さらに、問題はファイルなどが作られた時の初期パーミッションが
環境によって違うことです。</p>

<p>通常の設定だと、ファイルやディレクトリ(フォルダ)を作った場合
次の様なパーミッション(権限)<sup id='fnref:1'><a href='#fn:1' rel='footnote'>1</a></sup>になります。</p>

<table class="center">
  <tr>
    <th>OS</th>
    <th>作成方法</th>
    <th>作成物</th>
    <th>権限</th>
  </tr>
  <tr>
    <td rowspan="4" >Windows<sup id='fnref:2'><a href='#fn:2' rel='footnote'>2</a></sup></td>
    <td rowspan="2">Explorer</td>
    <td>ファイル</td>
    <td>700(*)</td>
  </tr>
  <tr>
    <td>ディレクトリ</td>
    <td>700(*)</td>
  </tr>
  <tr>
    <td rowspan="2">Command</td>
    <td>ファイル</td>
    <td>644</td>
  </tr>
  <tr>
    <td>ディレクトリ</td>
    <td>755</td>
  </tr>
  <tr>
    <td rowspan="4">Mac<sup id='fnref:3'><a href='#fn:3' rel='footnote'>3</a></sup></td>
    <td rowspan="2">Finder</td>
    <td>ファイル</td>
    <td>644</td>
  </tr>
  <tr>
    <td>ディレクトリ</td>
    <td>755</td>
  </tr>
  <tr>
    <td rowspan="2">Command</td>
    <td>ファイル</td>
    <td>644</td>
  </tr>
  <tr>
    <td>ディレクトリ</td>
    <td>755</td>
  </tr>
  <tr>
    <td>Linux<sup id='fnref:4'><a href='#fn:4' rel='footnote'>4</a></sup></td>
    <td colspan="3">Macと同じ</td>
  </tr>
</table>


<p><code>Explorer</code>、<code>Finder</code>となっているのはExplorer等で右クリックから
新規作成で作った場合です。
OSの普通の作業で作られる場合も同様で、
従ってDropboxの同期によって作られるファイルも<code>Exploer</code>と同様になります。</p>

<p>見て分かるように、Macの場合はFinderでもコマンドラインからでも
同じ様に扱われますが、
Windowsの場合、cygwin以外で作られたファイル等は全て
700のパーミッションを持っています。</p>

<hr />

<p><em>2013/06/25 WindowsのAdministrators状態について追記</em></p>

<p>さらに700と言っても</p>

<pre><code>$ ls -l
-rwx------+ 1 Administrators None 2 May 12 21:00 a.txt
</code></pre>

<p>の様に所有者を見ると<code>Administrators</code>になっています。
cygwin上で作ったファイルはちゃんとユーザーのものになります。</p>

<pre><code>$ touch b.txt
$ ls -l
-rwx------+ 1 Administrators None 2 May 12 21:00 a.txt
-rwx------+ 1 User           None 2 May 12 21:10 b.txt
</code></pre>

<p>この所有者はExploerからファイルを右クリックして<code>プロパティ</code>の<code>詳細</code>から見れるものとは
同期してない様です。
新規作成で作ったテキスト等は<code>詳細</code>ではユーザー名になっていても
cygwinからはAdministratorsの物に見えていました。</p>

<p>Windows内のDropbox以外のフォルダも見てみましたが、
最初にシステムに作られるユーザーのもの(Desktopフォルダだったり)は
ユーザーの所有に見えたり、その後自分で作った物に関しては
作ったソフトも関係しているのか、まばらでいまいちどの様に決まるのか良く分かってません。</p>

<p>問題なのはAdministrators用で700なので、ここでユーザーに権限が無いように見えることです。
これに関しては詳しく調べて無いですが、手元で使ってる環境で、
共にユーザーが管理者権限持っていてUAC等切っている状態で、</p>

<ul>
<li>Windows Vista : 読む、実行はできるが書き込みが出来ない。ただ、どうも
<code>管理者だけど書き込み権限が無い</code>状態にあるみたいで、viで<code>:w!</code>とすれば書き込めるし、
<code>chmod +w a.txt</code>とすれば普通に書き込める様になる。(<code>ls -l</code>の結果は変わらず)。
所謂root権限状態?</li>
<li>Windows 7: Administrators所有で700になっているファイルも普通に書き込める。
つまりAdministratorsと管理者権限を持ったユーザーの区別無し?</li>
</ul>


<p>といった感じです。問題なのはVistaの場合で、
DropboxでOctopressの記事なんかを管理していると全てreadonlyの状態になっているので
他で作った記事は毎回<code>chmod +w file</code>する必要があります。
<code>rake isolate[file]</code>的な事を一旦すれば、全てが再生成される形になるので、
記事全てがreadonly状態に。</p>

<p>仕方が無いのでoctopressのトップディレクトリやDropboxのトップディレクトリで
気が向いたら(気になったら)</p>

<pre><code>$ chmod -R +w ./
</code></pre>

<p>として書き込み権限を与えています。</p>

<p><em>追記終わり</em></p>

<hr />

<hr />

<p>*2013/06/26 さらに追記
ファイルを作る際に親フォルダの権限を変えると中に作られる
ファイルの権限も変わってくる様です。</p>

<p>Cygwin外で作られるファイルがAdministratorsの所有物なのは変わらないのですが、
フォルダを<code>chmod 755 folder</code>としてから<code>folder</code>内に
Cygwin外からファイルを作ると、パーミッションが755だったりします。
さらにファイルに書き込み可能だったりします。
また、フォルダを<code>chown +w folder</code>等としても同様(?)。</p>

<p>取り敢えず、Cygwinでのトップディレクトリに行って全部USER所有に変えてみました。</p>

<pre><code>$ cd /
$ chown -R +w ./
</code></pre>

<p>この状態で、Explorer上で新規ファイルを作ったりするとAdministrators所有で
700状態ですが、USERで書き込み可能です。</p>

<p>この状態でDropboxで新たなファイルを他のPCで追加した所、同期されたファイルは</p>

<pre><code>$ ls 
----------+ 1 Administrators None     0 Jun 26 23:00 a.txt
</code></pre>

<p>の様な形に...読んだりパーミッションを変えたり所有者を変えたりはできますが、
最初の状態は書き込み不可なので結局以前と一緒です。</p>

<p>ソフトによっても動作が違う様で、イマイチ良くわからない、という感じで
中途半端で申し訳ないですが、
取り敢えず、Cygwinからよく使うフォルダは<code>chmod -R +w</code>しておくと
Explorerなどで作ったファイルは書き込み可能な状態に出来ます。</p>

<p>ただ、VistaでDropboxフォルダを使う場合、Dropbox経由でコピーされてきた
ファイルはどうしても書き込み権限が無い状態で作られるようです。
(cronで<code>chmod -R +w ./Dropbox</code>的なコマンドを1日1回くらい実行する、とかで対処するくらい
しかないのでしょうか...?)</p>

<p><em>追記終わり</em></p>

<hr />

<p>WindowsではNTFSアクセス制御リスト(Access Control List, ACL)<sup id='fnref:5'><a href='#fn:5' rel='footnote'>5</a></sup><sup id='fnref:6'><a href='#fn:6' rel='footnote'>6</a></sup>
と呼ばれるシステムでファイルを管理していて、
これで決定されたパーミッションがcygwinからも見えています。
つまり、通常作られるファイルは、他人からは見えない様なファイルで、
所有者には実行権限も与えられています。</p>

<p>このACLは<code>/etc/fstab</code>へマウント設定を追加してあげると無効にすることが出来ます。
<sup id='fnref:7'><a href='#fn:7' rel='footnote'>7</a></sup></p>

<p>:warning: 以下に設定変更方法を書いていますが、下にも書く様に副作用が
強いため、結果的には使わないことにしています。</p>

<p>まず、現状のマウントポイントを確認:</p>

<pre><code>$ mount
C:/cygwin/bin on /usr/bin type ntfs (binary,auto)
C:/cygwin/lib on /usr/lib type ntfs (binary,auto)
C:/cygwin on / type ntfs (binary,auto)
C: on /cygdrive/c type ntfs (binary,posix=0,user,noumount,auto)
</code></pre>

<p><code>/etc/fstab</code>に何も書かれて居ない状態ですが、上の4つについては
最初からマウントされるようになっています。
のでセットアップで特に変更しなければ上の様になっているかと思います。</p>

<p>次に、これらに関連する項目を<code>/etc/fstab</code>へ書いて定義を変更します。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>/etc/fstab</span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>C:/cygwin/bin /usr/bin  ntfs     binary,noacl,notexec              0 0
</span><span class='line'>C:/cygwin/lib /usr/lib  ntfs     binary,noacl,notexec              0 0
</span><span class='line'>C:/cygwin     /         ntfs     binary,noacl,notexec,override     0 0
</span><span class='line'>none          /cygdrive cygdrive binary,noacl,notexec,posix=0,user 0 0</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>と追加します。(初期のままだと<code>/etc/fstab</code>にはコメントが書かれているだけです。)</p>

<p>書き方は<sup id='fnref:8'><a href='#fn:8' rel='footnote'>8</a></sup></p>

<pre><code>Windowsのパス Cygwinのパス ファイルシステム　オプション 0 0
</code></pre>

<p>Windowsのパスも<code>\</code>でなく</code>/<code>を使います。
最後のcygdriveの設定ではファイルシステムは</code>cygdrive`を設定します。
最後の2つはdump/fsckオプションですが、cygwinでは使わない(?)ので、
ここでは0にしておきます。</p>

<p>上で確認したものと比べて分かるように、追加したオプションは
<code>noacl</code>でこれによってACLの設定を無視する様になります。</p>

<p>この設定を加えてからcygwinを再起動すると、全てのファイルの
cygwinから見えるパーミッションが変わります。</p>

<p>ただ、<code>noacl</code>だとファイルのパーミッションをcygwinが勝手に中身を
判断して決定するようになってしまい、<code>chmod</code>等でも変更が出来ません。<sup id='fnref:9'><a href='#fn:9' rel='footnote'>9</a></sup></p>

<p>さらに気持ち悪いことに、実行権限が無いファイルでも実行出来てしまうようになります。
(TAB補完は効かないが、ちゃんと書けばどんなファイルでも実行しようとする。)</p>

<p>また、<code>exec</code>/<code>notexec</code>と言うオプションがあって、これらを指定すると
以下のディレクトリのファイル全てが実行ファイル(755)/通常ファイル(644)
になります。
この場合でも一意に決まってしまって変更出来ません。</p>

<p>ので、結局上の設定を消して元に戻しました。
(元に戻すと、<code>noacl</code>等を設定する以前のパーミッションに全て戻ります。)</p>

<p>大分古い記事ですがACLやマウント方法について詳細に書いてあるものもありました<sup id='fnref:10'><a href='#fn:10' rel='footnote'>10</a></sup>。
細かい事を直したいときに参考になるかもしれません。</p>

<h1 id="Dropbox上でのgit/svn">Dropbox上でのgit/svn</h1>

<p>パーミッション関連で困ることは、勿論スクリプトに実行権限がついてなくて
実行出来ない、と言うこともあるのですが、
それ以上にgitでコミットするといちいちファイルモードを変更してしまって
困ってしまいます。</p>

<p>なので、特にDropbox上でgit(svnでも)のレポジトリを管理している場合は、</p>

<pre><code>git config core.filemode false
</code></pre>

<p>するか<code>./.git/config</code>を書き換えて(<code>filemode = true</code>を<code>false</code>へ)
ファイルのパーミッションは無視する様にした方が余計な変更を入れない
ので良いと思います。</p>

<p>特にOctopressの様な場合は、基本的に実行ファイルは含まないので、
問題ないと思います。</p>

<p>Octopressの場合はOctopressの親ディレクトリの<code>./.git/config</code>と
deploy用の<code>./_deploy/.git/config</code>を変更して下さい。</p>

<p>ちなみに、大概の場合各レポジトリのconfigファイルにfilemodeの設定が
加えられているので
<code>$HOME/.gitconfig</code>で設定しても意味がないことが多いので注意が必要です。</p>

<hr />

<p><div class="footnotes">
	<ol>
		<li id='fn:1'><p> ここではWindowsの場合はcygwinから見た場合のパーミッションの話です。
  Unix系の権限は所有者、グループユーザー、その他の枠でそれぞれ、
  読み(4)、書き(2)、実行(1)の権限を指定しますが、この時、
  表にあるように権限の数字を足した物を並べて表示します。
  <code>ls -l</code>すると<code>rwxr-xr-x</code>等と出ますがこれは所有者r(読み)w(書き)r実行可能で、
  グループユーザー及びその他は読み込みと実行のみ許可されている、と言うことで、
  数字では755になります。
  <a href='#fnref:1' rev='footnote'>↩</a></p>
</li><li id='fn:2'><p> Windows Vista/7, cygwin 1.7.18
  <a href='#fnref:2' rev='footnote'>↩</a></p>
</li><li id='fn:3'><p> Mac OS X Lion (10.7.5)
  <a href='#fnref:3' rev='footnote'>↩</a></p>
</li><li id='fn:4'><p> Scientific Linux 6
  <a href='#fnref:4' rev='footnote'>↩</a></p>
</li><li id='fn:5'><p> <a href="http://www.atmarkit.co.jp/fwin2k/win2ktips/700whatisacl/whatisacl.html">アクセス制御リストACLとは？</a>
  <a href='#fnref:5' rev='footnote'>↩</a></p>
</li><li id='fn:6'><p> <a href="http://www.teppi.com/solution/file_mgmt/006_filing_win_acl01.php">Windowsアクセス権設定（ACL）の基礎知識</a>
  <a href='#fnref:6' rev='footnote'>↩</a></p>
</li><li id='fn:7'><p> <a href="http://www.akamoz.jp/you/uni/cygwin.htm">Cygwin 1.5からCygwin 1.7へのアップグレード</a>
  <a href='#fnref:7' rev='footnote'>↩</a></p>
</li><li id='fn:8'><p> <a href="http://ksugita.blog62.fc2.com/blog-entry-23.html">Cygwin1.7の /etc/fstabのフォーマット</a>
  <a href='#fnref:8' rev='footnote'>↩</a></p>
</li><li id='fn:9'><p> 先頭行を見て<code>#!</code>等かどうかで判断して実行ファイル(755)か
  通常ファイル(644)に自動的に決まるとのことです: Ref <a href="http://d.hatena.ne.jp/kfujieda/20110521/1305982895">普段はWindowsを使っているのよ</a>
  <a href='#fnref:9' rev='footnote'>↩</a></p>
</li><li id='fn:10'><p><a href="http://www.sixnine.net/cygwin/cygwin-doc/professional.html">Cygwin for Professionals</a></p></p>

<p><a href='#fnref:10' rev='footnote'>↩</a>

</li>
	</ol>
</div>
</p>
]]></content>
  </entry>
  
</feed>
