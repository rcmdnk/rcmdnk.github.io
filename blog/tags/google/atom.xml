<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: Google | rcmdnk's blog]]></title>
  <link href="https://rcmdnk.com/blog/tags/google/atom.xml" rel="self"/>
  <link href="https://rcmdnk.com/"/>
  <updated>2018-08-23T00:51:36+00:00</updated>
  <id>https://rcmdnk.com/</id>
  <author>
    <name><![CDATA[rcmdnk]]></name>
    <email><![CDATA[rcmdnk@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Google Analytics始まるData Retention controlsについて]]></title>
    <link href="https://rcmdnk.com/blog/2018/05/15/blog-google/"/>
    <updated>2018-05-15T00:00:00+00:00</updated>
    <id>https://rcmdnk.com/blog/2018/05/15/blog-google</id>
    <content type="html"><![CDATA[<p>Google Analyticsを使ってる人には数か月前からリマインダーのメールが
何度も来てるかと思いますが、
5月25日からData Retention controls(データ保持コントロール)と呼ばれる機能が有効になります。</p>

<p>デフォルトのままだと今後26ヶ月以上経ったデータは削除されるデータが出てきます。
ただし全てのデータではなくユーザー個々に関わるデータに関してのみで
アクセス数などの統計データには影響はありません。</p>

<p>これに関して設定の確認をしてくださいと言われてるので何が必要か見てみました。</p>

<!-- more -->

<ul id="markdown-toc">
  <li><a href="#data-retention-controls" id="markdown-toc-data-retention-controls">Data Retention controls</a></li>
  <li><a href="#設定変更" id="markdown-toc-設定変更">設定変更</a></li>
  <li><a href="#設定変更すべきか" id="markdown-toc-設定変更すべきか">設定変更すべきか</a></li>
</ul>
<div class="group"></div>

<div class="center_wrapper">
  <div>Sponsored Links</div>
  <div>
  <ins class="adsbygoogle google-img-rect" style="display:inline-block" data-ad-client="ca-pub-3802317723662375" data-ad-slot="7116417646"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
  </div>
</div>

<h2 id="data-retention-controls">Data Retention controls</h2>

<p>数か月前から何度か<strong>Important Reminder</strong>とか<strong>Action Required</strong>とか言う題名で
メールが来てましたが
Data Retention controlsが有効になると以下のようなデータが
指定した期間より古くなった場合に削除される様になります。</p>

<blockquote><p>保持期間は、Cookie、ユーザーの識別子（例: ユーザー ID）、広告 ID（DoubleClick Cookie、Android の広告 ID、Apple 広告主向け識別子など）に関連付けられたユーザー単位やイベント単位のデータに適用されます。</p><footer><strong>データの保持 - アナリティクス ヘルプ</strong> <cite><a href="https://support.google.com/analytics/answer/7667196">support.google.com/analytics/&hellip;</a></cite></footer></blockquote>

<p>これはヨーロッパで制定された
<a href="https://ja.wikipedia.org/wiki/EU%E4%B8%80%E8%88%AC%E3%83%87%E3%83%BC%E3%82%BF%E4%BF%9D%E8%AD%B7%E8%A6%8F%E5%89%87">EU一般データ保護規則(General Data Protection Reguration, GDPR)</a>
に対応するためで、この規則が施行されるのが5月25日なのでその日に合わせて
Google AnalyticsでもData Retention controlsが有効になるようになっています。</p>

<p>GDPRは個人のデータ保護について今まで以上に強力な規則の様なものです。
この規則の中でデータ管理者と処理者を分けて考えるところがあり、
Google Analyticsは処理者で管理者がAnalyticsの使用者になります。</p>

<p>そういった点も含めてAnalytics側としてはユーザーデータに関して一定期間で削除したり
出来る様にしたようです。</p>

<p>デフォルトでは26ヶ月間のデータ保持期間になっていて
26ヶ月以上経ったデータについて削除していきます。</p>

<p>なので今から2年以上は何もしなくても消えるものはありませんが、
それ以降にはこれから取るデータが期間を超えると消えていくことになります。</p>

<p>ただし、これは個々のユーザーのデータに限ったことで
アクセス数だとかそういった統計的なデータに関しては過去のデータでも消えることはありません。</p>

<h2 id="設定変更">設定変更</h2>

<p>設定を変更したい場合は
Google Aanlyticsの管理ページから
各アカウントの<strong>プロパティ</strong>の欄ある<strong>トラッキング情報</strong>をクリックして
項目を開き<strong>データ保持</strong>をクリックします。</p>

<p>すると以下の様な設定画面が出てくるので
<strong>ユーザーデータとイベントデータの保持</strong>
の設定を変更します。</p>

<p><img src="https://rcmdnk.com/images/post/20180515_googleanalytics.jpg" alt="google analytics" class="pic" /></p>

<p><strong>14ヶ月</strong>、<strong>26ヶ月</strong>、<strong>38ヶ月</strong>、<strong>50ヶ月</strong>または<strong>自動的に期限切れにならない</strong>から選べるので
適当な物を選択。</p>

<p><strong>自動的に期限切れにならない</strong>を選べばこれまで通り
データを保持し続けられます。</p>

<p>下の<strong>新しいアクティビティをリセット</strong>は同じユーザーからのアクセスが有った場合に
そのユーザーに関連するデータの保持期間を全てリセットするかどうか、という設定です。
<strong>自動的に期限切れにならない</strong>にしている場合は意味はなくなります。</p>

<p>また、関連するところとして、以前からあるものですが、
<strong>アカウント設定</strong>のところに<strong>データ処理修正条項</strong>を確認して同意するところがありますが、
これに関しては特別ヨーロッパ向けのサイトでない限りは無視してかまわないようです。
(ヨーロッパ向けのサイトの場合はきちんと確認してどうするかする必要がありそうです。)</p>

<h2 id="設定変更すべきか">設定変更すべきか</h2>

<p>このようにユーザーデータを保持し続ける事は出来ますが、
その意味がない場合は単なるリスクでしか無いので適当に時間を置いて削除する様にしておいた方が無難です。</p>

<p>商用サイトであればそれらのデータを解析してどうこうしたいところだと思いますが、
単にアクセス数を見てニヤニヤしたいだけならば
削除されるデータは関係ないものです。</p>

<p>一方、GDPRはヨーロッパ以外の管理者に対しても影響するので、
下手にユーザーデータを保持し続けていていると極端な場合何らかの訴訟等の対象になりかねません。
日本語サイトでもヨーロッパからアクセスが無いとも限らないので。</p>

<p>26ヶ月の保持が安全かどうか、どの期間なら良いのか、というのはまだ始まってもないのでわからないところですが、
意図的に永久保持する様にした場合はきちんと管理しないと問題にされやすいと思います。</p>

<p>とりあえず26ヶ月とかにしておけばすぐに大きな問題にはならないと思います。</p>

<p>また、GDPRでは個人情報の収集などに関しても厳しく規定しているので
プライバシーポリシーなどの掲示もきちんとしてないと大きな問題になる可能性があるので
この際その辺も見直しておいた方が良いかと。</p>

<p>ということで、この様な個人データに関して深く解析したり
使ったりすることもないので、
とりあえずGoogleが設定したデフォルトのまま26ヶ月のデータ保持ということにしておこうと思います。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Googleのインスタント検索を無効化する方法]]></title>
    <link href="https://rcmdnk.com/blog/2016/11/02/computer-google/"/>
    <updated>2016-11-02T00:00:00+00:00</updated>
    <id>https://rcmdnk.com/blog/2016/11/02/computer-google</id>
    <content type="html"><![CDATA[<p>Googleの検索にはインスタント検索という機能があり、
検索窓に文字をちょっと記入した段階で勝手に
検索結果を表示出来る様になっています。</p>

<p>これが結構鬱陶しいので無効化しました。</p>

<!-- more -->

<ul id="markdown-toc">
  <li><a href="#googleインスタント検索の予測" id="markdown-toc-googleインスタント検索の予測">Googleインスタント検索の予測</a></li>
  <li><a href="#googleの言語設定日本語の状態ではfirefoxでは使えない" id="markdown-toc-googleの言語設定日本語の状態ではfirefoxでは使えない">Googleの言語設定日本語の状態ではFirefoxでは使えない</a></li>
  <li><a href="#オートコンプリートの無効化" id="markdown-toc-オートコンプリートの無効化">オートコンプリートの無効化</a></li>
</ul>
<div class="group"></div>

<div class="center_wrapper">
  <div>Sponsored Links</div>
  <div>
  <ins class="adsbygoogle google-img-rect" style="display:inline-block" data-ad-client="ca-pub-3802317723662375" data-ad-slot="7116417646"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
  </div>
</div>

<h2 id="googleインスタント検索の予測">Googleインスタント検索の予測</h2>

<p>Googleの検索窓にキーワードを入力し始めると、
検索ボタンを押さなくてもある程度入力した時点で自動で
検索結果を表示してくれる機能です。</p>

<blockquote>
  <p><a href="https://japan.googleblog.com/2011/04/blog-post_26.html">Google Japan Blog: 検索を入力のスピードよりも速く</a></p>
</blockquote>

<blockquote>
  <p><a href="https://support.google.com/websearch/answer/186645?hl=ja">検索候補を表示するインスタント検索 - ウェブ検索 ヘルプ</a></p>
</blockquote>

<p>この機能は2011年頃から使える様になっています。</p>

<p>ただこの機能、特に英単語で一度検索して、
その後ちょっと単語を付け足そう、とした時に
ちょっとでも入力した瞬間に新しい検索結果が表示されたりして
結構鬱陶しかったりします。</p>

<p>1単語追加したいだけの時は割と最終的なものをきちんと表示してくれることもありますが、
全体的にはそうでもないことも結構あるので。</p>

<p>この設定を変えるには、
<a href="https://www.google.co.jp/">Googleのフロントページ</a>の右下にある
<strong>設定</strong>か、検索結果ページの右上にある歯車ボタンから、
<strong>検索設定</strong>に行きます。</p>

<p>そこにある<strong>Googleインスタント検索の予測</strong>(<strong>Google Instant predictions</strong>)
の項目を<strong>インスタント検索結果は表示しない</strong>(<strong>Never show Instant results</strong>)にします。</p>

<p><img src="https://rcmdnk.com/images/post/20161102_googlesearch.jpg" alt="20161102_googlesearch.jpg" class="pic" /></p>

<p>これで入力中に勝手に検索結果が変わることはなくなります。</p>

<h2 id="googleの言語設定日本語の状態ではfirefoxでは使えない">Googleの言語設定日本語の状態ではFirefoxでは使えない</h2>

<p>現在、Googleの言語設定で日本語を最優先にした状態で
FirefoxでGoogle検索を行うとこの設定は必ず無効になっています。</p>

<p>設定項目に行くと一応変更できそうな感じなんですが
保存しても再度設定を開くと必ず、<strong>パソコンの処理速度が十分に速い場合のみ</strong>(<strong>Only when my computer is fast enough</strong>)
にチェックが戻ってしまいますが実際には無効化されています。</p>

<blockquote>
  <p><a href="http://bugzilla.mozilla.gr.jp/show_bug.cgi?id=6891">bug 6891 - 新しいgoogle mapのルート検索で入力文字列の最初が即時確定する。</a></p>
</blockquote>

<p>どうも入力時のバグがあってとりあえず無効に、という状態のままのようです。</p>

<p>ただし、FirefoxでもGoogleの言語設定(Firefoxの動作言語ではなく)
で英語とかを優先にすると使用することが出来ます。</p>

<p>バグの現象を見ると特にGoogleの言語自体はあまり関係ないような気もするのですが
日本語設定特有の制限になっています。</p>

<p>日本語にしておいてもChromeは勿論、Safari、Edgeなどでも普通に使えました。</p>

<p>無効化すると検索の表示数を10以外の20-100の数に変更することが出来るんですが、
この変更はインスタント検索が無効なときのみ使える様なオプションなので、
その部分を変更できないFirefox+日本語Googleだと
この数を変更することが不可能になっています。</p>

<p>無効にしたい、というのが今回やりたいことなのでどうせ無効になってれば良いんですが、
検索数は30位あっても良いかな、と思うので、それが変更できないのはちょっとだるい。</p>

<p>で、なんで今回これに気づいたかというと、
最初Firefoxでも有効だった期間があるみたいなので、
その間どうだったか全く覚えてませんが(つまりはそのまま使ってたはず)、
少なくとも上のレポートにある2014年位からはFirefox上で無効な状態で使ってたことになります。</p>

<p>それが、数カ月から1年位前に言語設定で英語を最優先にしてたので
この機能が有効になって気になり始めたみたいです。</p>

<p>英語にした理由は、英単語だけで英語の資料を探したい時にも
日本語優先にしておくと無駄に日本語のぺーじがしゃしゃり出てくることが多かったからです。</p>

<p>今回の件であるように、逆にFirefoxでも
インスタント検索を使いたい、と言う場合には
Googleの言語設定を英語にするのもありだと思います。</p>

<h2 id="オートコンプリートの無効化">オートコンプリートの無効化</h2>

<p>インスタント検索とごっちゃ勘違いしてたりすることも多いみたいなのでついでですが、
<strong>オートコンプリート</strong>の方は検索窓に何か入れたら
それに関するキーワード群をコンテクストメニューの様に表示してくれる機能のことです。</p>

<p>これをオフにする設定はGoogleの設定にはありません。</p>

<p>そこでもしやりたければ、GoogleのURLの最後に<code>?complete=0</code>を加えて
フロントページを表示します。</p>

<blockquote>
  <p><a href="https://www.google.co.jp/?complete=0">Google complete=0</a></p>
</blockquote>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[コマンドラインでGoole Taks(ToDoリスト)を表示する方法]]></title>
    <link href="https://rcmdnk.com/blog/2013/05/10/computer-mac-geektool-google/"/>
    <updated>2013-05-10T12:00:00+00:00</updated>
    <id>https://rcmdnk.com/blog/2013/05/10/computer-mac-geektool-google</id>
    <content type="html"><![CDATA[<p><a href="https://rcmdnk.com/blog/2013/04/18/computer-mac-geektool-desktop">以前GeekToolの自分設定を紹介した記事</a>
タスクリストは<a href="http://hasseg.org/icalBuddy/">icalBuddy</a>
を使ってiCalの情報を載せる様にしている、と書きましたが、
実際に現在iCal自体を使わなくなっているのでこの欄は空欄のままでした。</p>

<p>一方で<a href="https://mail.google.com/tasks/canvas">Google Tasks (ToDoリスト)</a>で、
GDTと言える程ではないものの、適当に思いついたことをメモしておくのにも使っています。</p>

<p>それをそのままiCal情報を載せてた場所に載せれば良いとは思っててしばらく
放っておいてしまいましたが、
今回Google Tasksをこの欄へ載せる様にスクリプトを書いてアップデートしました。</p>

<p>GoogleのAPI関連と一緒にまとめておきます。</p>

<!-- more -->

<ul id="markdown-toc">
  <li><a href="#googleclで挑戦上手くいかない" id="markdown-toc-googleclで挑戦上手くいかない">googleclで挑戦(上手くいかない)</a></li>
  <li><a href="#自分でスクリプトを書いてみる" id="markdown-toc-自分でスクリプトを書いてみる">自分でスクリプトを書いてみる</a></li>
</ul>
<div class="group"></div>

<div class="center_wrapper">
  <div>Sponsored Links</div>
  <div>
  <ins class="adsbygoogle google-img-rect" style="display:inline-block" data-ad-client="ca-pub-3802317723662375" data-ad-slot="7116417646"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
  </div>
</div>

<h2 id="googleclで挑戦上手くいかない">googleclで挑戦(上手くいかない)</h2>
<p><a href="http://code.google.com/p/googlecl/">googlecl</a>と言う
Google APIを使ったツールを見つけたので導入してみました。</p>

<blockquote>
  <p>Ref: <a href="http://code.google.com/p/googlecl/wiki/DiscoveryManual">DiscoveryManual</a></p>
</blockquote>

<p>によるとTasks等が入ったDiscovery Service用のAPIが
あり、これらをインストールして、最新のgoogleclを使えば
Tasksも使える、とのこと。</p>

<p>ただ、これ、2011年くらいの話なので、このTasks等のAPIは</p>

<pre><code>$ sudo  easy_install --upgrade google-api-python-client
</code></pre>

<p>と<a href="https://rcmdnk.com/blog/2013/04/18/computer-mac-geektool-desktop">前回</a>インストールした時点で
入っていると思います。
<a href="https://developers.google.com/api-client-library/python/start/installation">Google APIs Client Libary for Python</a>のページへ言ってもこれしかないので。</p>

<p>googleclの方も、上のDiscoveryManualのページだと、svnにあるアルファ版の
最新のを、と書いてありますが、svnのtrunkを見ると、0.9.14で
tagsにある最新のものとおそらく一緒のものです。</p>

<p>通常googleclをインストールする場合には</p>

<pre><code>$ sudo easy_install googlecl
</code></pre>

<p>だけでOKですが、今回は一応svnのtrunkから取ってきてインストールしてみました。</p>

<pre><code>$ svn checkout http://googlecl.googlecode.com/svn/trunk/ googlecl-read-only
$ cd googlecl-read-only
$ sudo python setup.py install
</code></pre>

<p>これで<code>google</code>コマンドが使える様になります。</p>

<p>しかし、<code>calendar</code>等のコマンドは使えましたがtasksをやろうとすると</p>

<pre><code>$ google tasks
...
FATAL ERROR:
Discovery API unavailable.  Services limited to:help, picasa, blogger, youtube, docs, contacts, calendar, finance
Unknown service: tasks
</code></pre>

<p>となり、Discovery APIが入っていないと怒られます。</p>

<p>この辺、しっかりと追ってないですが、
すでにgoogle-api-python-clientに統一されていて、
googleclの中で判定する際に古い構造を探しに行って失敗しているのか、
とかなのかな、と思ってます(違ったら教えて下さい)。</p>

<p>googlecl自体が古いままで止まっているので、
あまりやっても意味ないかな、ということで取り敢えず断念。</p>

<h2 id="自分でスクリプトを書いてみる">自分でスクリプトを書いてみる</h2>
<p><a href="https://developers.google.com/api-client-library/python/start/installation">Google APIs Client Libary for Python</a>のページ内の
<code>Getting started: Quickstart</code>と言う項目で</p>

<ul>
  <li><code>Select an API</code>からTasks API</li>
  <li><code>Select a Platform</code>からCommand-Line</li>
</ul>

<p>を選ぶと、<code>Configure Project</code>というボタンが出てくるのでこれを押して
さらに出てきた窓で<code>Continue</code>を押すと
下の様な画面にきます。</p>

<p><img src="https://rcmdnk.com/images/post/20130510_googleapi.jpg" alt="googleapi" title="googleapi" /></p>

<p>ここからサンプルコード(<code>Download the starter application</code>)を取って来ることができますので、特に中にある<code>sample.py</code>
を参考にしてスクリプトを書いていくことができます。
(client_secretコードも必要ならとっておく。)</p>

<p>取り敢えずリストを取ってこれれば良いだけなので、簡単に次の様なスクリプトを作ってみました。</p>

<ul>
  <li><a href="https://github.com/rcmdnk/python/blob/master/gtaskslist.py">gtaskslist.py</a>
    <ul>
      <li>そのまま走らせれば全てのリストを取ってくる</li>
      <li>-l (–list)でリストを指定する(指定しない場合は全てを使用)</li>
      <li>-i (–item)で指定した言葉を含むタスクだけ取ってくる(指定しない場合は全てを取ってくる)
        <ul>
          <li><code>,</code>で区切って複数指定出来る</li>
        </ul>
      </li>
      <li>オプション指定しない引数は-iと同様にタスクの選択に使う</li>
      <li>例) ./gtaskslist.py -l mylist -i work,home important<br />
<i class="fa fa-arrow-right"></i><code>mylist</code>と言うリストの中から
<code>work</code>, <code>home</code>または<code>important</code>と言う単語の入ったタスクのみ表示する</li>
    </ul>
  </li>
</ul>

<p>こんな感じです。
メモや期限は取り敢えず無視しています。</p>

<p>試しに以下の様なタスクリスト(test)をGoogle Tasksに作って表示してみます。</p>

<p><img src="https://rcmdnk.com/images/post/20130510_tasks_canvas.jpg" alt="tasks_canvas" title="tasks_canvas" /></p>

<p>ちなみに、Google TasksへはCalendarからも操作できますが
<a href="https://mail.google.com/tasks/canvas">https://mail.google.com/tasks/canvas</a>
というアドレスへアクセスするとフル画面で操作することが出来ます。</p>

<p><code>gtaskslist.py</code>は適当なところへおいて、<code>~/usr/bin/gtaskslist</code>へ
リンクを張ってあります。(<code>~usr/bin</code>は<code>PATH</code>が通っている所。この辺は好きな様に。)</p>

<pre><code>cd ~/usr/bin/
ln -s ~/Dropbox/08_Settings/Git/python/gtaskslist.py
</code></pre>

<p>この状態でshell GeekletのCommand欄へ</p>

<pre><code>~/usr/bin/gtaskslist -l test -i IMPORTANT
</code></pre>

<p>と入力しておきます。</p>

<p>結果は下の様になります。</p>

<p><img src="https://rcmdnk.com/images/post/20130510_geektool_gtaskslist.jpg" alt="geektool_gtaskslist" title="geektool_gtaskslist" /></p>

<p>上のスクリプトではタスクを言葉でピックアップしてそのまま並べているだけですが、
期限等も含めて表示したい場合は
<a href="https://developers.google.com/google-apps/tasks/?hl=ja">Google Tasks API</a>
を参考に項目を追加したりしてみれば意外と簡単に出来ると思います。</p>

]]></content>
  </entry>
  
</feed>
